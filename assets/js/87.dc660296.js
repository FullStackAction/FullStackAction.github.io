(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{433:function(t,s,e){"use strict";e.r(s);var a=e(15),r=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blockquote",[s("p",[t._v("随着项目功能的不断增加，越来越多的开发人员加入，业务主线也随之越来越多，造成耦合越来越严重，编译越来越慢，测试不独立等一系列问题。为了解决此类情况，我们可以考虑到使用组件化开发")])]),t._v(" "),s("p",[t._v("1.概念\n组件化就是将一个单一工程的项目, 分解成为各个独立的组件， 然后按照某种方式, 任意组织成一个拥有完整业务逻辑的工程。")]),t._v(" "),s("p",[t._v("2.优势")]),t._v(" "),s("ul",[s("li",[t._v("独立：独立编写、编译、运行、测试")]),t._v(" "),s("li",[t._v("重用：功能代码的重复使用。比如不同项目使用同一功能模块")]),t._v(" "),s("li",[t._v("高效：任意增删模块，实现高效迭代")]),t._v(" "),s("li",[t._v("组件化还可以配合二进制化, 提高项目编译速度")])]),t._v(" "),s("p",[t._v("3.组件分类\n大体上分三类：基础组件、功能组件和业务组件"),s("br")]),t._v(" "),s("ul",[s("li",[t._v("基础组件：也称为公共组件，存放平时定义的宏、常量、协议、分类、对必要的第三方的封装类，以及各种处理工具类，如：时间、日期、设备信息、文件处理、沙盒管理等")]),t._v(" "),s("li",[t._v("功能组件： 自定义视图控件、一些特定功能的封装（如录音、播放音频封装）")]),t._v(" "),s("li",[t._v("业务组件：各种业务线")])]),t._v(" "),s("hr"),t._v(" "),s("blockquote",[s("p",[t._v("本篇先来介绍下远程私有库的基本使用，建议按顺序看完之后，回来再看一遍步骤归纳，加深了解，如有不足之处，欢迎指出，感谢 : )")])]),t._v(" "),s("h2",{attrs:{id:"步骤归纳"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤归纳"}},[t._v("#")]),t._v(" 步骤归纳")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("创建远程索引库和私有库")])]),t._v(" "),s("li",[s("p",[t._v("将远程索引库添加到本地 "),s("code",[t._v("pod repo add 索引库名称 索引库地址")])])]),t._v(" "),s("li",[s("p",[t._v("在本地创建一个pod模板库 "),s("code",[t._v("pod lib create 组件名称")]),s("br"),t._v("\n将框架的核心代码添加到Classes目录下"),s("br"),t._v("\n本地安装测试核心代码是否可用 "),s("code",[t._v("pod install")]),s("br"),t._v("\n修改Spec描述文件"),s("br"),t._v("\n将修改好的模板库上传至远程私有库")])]),t._v(" "),s("li",[s("p",[t._v("上传代码和打标签"),s("br"),t._v(" "),s("code",[t._v("git init")]),s("br"),t._v(" "),s("code",[t._v("git add .")]),s("br"),t._v(" "),s("code",[t._v('git commit -m "提交描述"')]),s("br"),t._v(" "),s("code",[t._v("git remote add origin 远程私有库地址")]),s("br"),t._v(" "),s("code",[t._v("git push origin master")]),s("br"),t._v(" "),s("code",[t._v("git tag '0.1.0'")]),s("br"),t._v(" "),s("code",[t._v("git push --tags")])])]),t._v(" "),s("li",[s("p",[t._v("提交spec至私有索引库"),s("br"),t._v(" "),s("code",[t._v("pod lib lint --private")]),s("br"),t._v(" "),s("code",[t._v("pod spec lint --private")]),s("br"),t._v(" "),s("code",[t._v("pod repo push 索引库的本地名称 xx.podspec")])])]),t._v(" "),s("li",[s("p",[t._v("使用"),s("br"),t._v(" "),s("code",[t._v("source 官方索引库url")]),s("br"),t._v(" "),s("code",[t._v("source 私有索引库url")]),s("br"),t._v(" "),s("code",[t._v("pod '组件名称'")]),s("br"),t._v(" "),s("code",[t._v("pod install")])])])]),t._v(" "),s("p",[s("strong",[t._v("接下来我们就来实战如何创建和使用私有库")])]),t._v(" "),s("h2",{attrs:{id:"一、创建私有索引库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、创建私有索引库"}},[t._v("#")]),t._v(" 一、创建私有索引库")]),t._v(" "),s("p",[t._v("这里以码云为例，创建一个LXFSpecs的私有索引库，这玩意的作用如其名，就是用来索引的")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210110203652.png",alt:"私有索引库"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210110203705.png",alt:"LXFSpecs"}})]),t._v(" "),s("h2",{attrs:{id:"二、本地添加私有索引库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、本地添加私有索引库"}},[t._v("#")]),t._v(" 二、本地添加私有索引库")]),t._v(" "),s("h3",{attrs:{id:"_1、查看本地索引库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、查看本地索引库"}},[t._v("#")]),t._v(" 1、查看本地索引库")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("pod repo\n")])])]),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210110203722.png",alt:"查看本地索引库"}})]),t._v(" "),s("p",[t._v("如图，目前本地仅有github上的那个公有索引库")]),t._v(" "),s("h3",{attrs:{id:"_2、添加私有索引库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、添加私有索引库"}},[t._v("#")]),t._v(" 2、添加私有索引库")]),t._v(" "),s("p",[t._v("将我们刚刚新建的私有索引库LXFSpecs添加到本地")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// pod repo add 索引库名称 索引库地址\npod repo add LXFSpecs https://gitee.com/LinXunFeng/LXFSpecs.git\n")])])]),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210110203743.png",alt:""}})]),t._v(" "),s("p",[t._v("现在本地就有两个索引库，好，索引库的事情就先放一边去了～")]),t._v(" "),s("h2",{attrs:{id:"三、创建组件库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、创建组件库"}},[t._v("#")]),t._v(" 三、创建组件库")]),t._v(" "),s("p",[t._v("码云上的创建操作同上，这里以LXFBase为例，创建基础组件库\n"),s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210110203801.png",alt:"LXFBase"}})]),t._v(" "),s("h3",{attrs:{id:"_1、快速创建模版库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、快速创建模版库"}},[t._v("#")]),t._v(" 1、快速创建模版库")]),t._v(" "),s("p",[t._v("到合适的位置创建一个与组件名相同的文件夹，cd进去后，使用如下命令")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// pod lib create 组件名\npod lib create LXFBase\n")])])]),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210110203818.png",alt:""}})]),t._v(" "),s("p",[t._v("这里会让你配置一些信息，根据自己的情况自行配置即可。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210110203830.png",alt:"配置"}})]),t._v(" "),s("h3",{attrs:{id:"_2、添加组件内容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、添加组件内容"}},[t._v("#")]),t._v(" 2、添加组件内容")]),t._v(" "),s("p",[t._v("创建完成后会自动帮我们打开相应的Example项目，LXFBase目录中会出现如图这些文件，我们把基础组件相关的东西丢到Classes文件夹中，并且把"),s("code",[t._v("ReplaceMe.m")]),t._v("文件删除")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210110203842.png",alt:"目录结构"}})]),t._v(" "),s("p",[t._v("默认Classes文件夹中存放的文件就是pod install时要下载下来的文件，当然可以通过修改spec文件的配置来更改位置")]),t._v(" "),s("h3",{attrs:{id:"_3、安装与测试本地库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、安装与测试本地库"}},[t._v("#")]),t._v(" 3、安装与测试本地库")]),t._v(" "),s("p",[t._v("在Example项目的Podfile文件中可以看到")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("pod 'LXFBase', :path => '../'\n")])])]),s("p",[t._v("模板库已经默认帮我们在Podfile中指定了LXFBase.podspec的位置，使组件LXFBase可以正常安装使用和方便测试")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("pod install\n")])])]),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210110203903.png",alt:"pod install"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210110203915.png",alt:"pod"}})]),t._v(" "),s("p",[t._v("可以看到我们已经将本地的组件添加进Example中了，现在可以尽情地做你想做的测试，确保组件的可用。")]),t._v(" "),s("p",[t._v("测试组件没有问题后，我们接下来就要将podspec文件上传至私有索引库，不过在此之前，需要对spec进行修改。")]),t._v(" "),s("h3",{attrs:{id:"_4、-修改spec"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、-修改spec"}},[t._v("#")]),t._v(" 4、 修改Spec")]),t._v(" "),s("p",[t._v("具体的配置说明可以参考"),s("a",{attrs:{href:"https://juejin.im/post/5ac446b8f265da238d50ecfa",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cocoapods-创建第三方框架"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210110203943.png",alt:"podspec"}})]),t._v(" "),s("p",[t._v("主要的修改内容")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("  s.name             = 'LXFBase'\n  s.version          = '0.1.0'\n  s.summary          = 'LXFBase.'\n  s.description      = <<-DESC\nLXFBase是基础组件库，包括分类和常用工具\n                       DESC\n  s.homepage         = 'https://gitee.com/LinXunFeng/LXFBase'\n  s.source           = { :git => 'https://gitee.com/LinXunFeng/LXFBase.git', :tag => s.version.to_s }\n  s.source_files = 'LXFBase/Classes/**/*'\n")])])]),s("h2",{attrs:{id:"四、上传组件代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、上传组件代码"}},[t._v("#")]),t._v(" 四、上传组件代码")]),t._v(" "),s("h3",{attrs:{id:"_1、将代码提交到组件仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、将代码提交到组件仓库"}},[t._v("#")]),t._v(" 1、将代码提交到组件仓库")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("git add .\ngit commit -m 'firstCommit'\ngit remote add origin https://gitee.com/LinXunFeng/LXFBase.git\n// 第一次push如果报错的话可以加上-f\n// git push -f origin master\ngit push origin master\n")])])]),s("h3",{attrs:{id:"_2、打标签"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、打标签"}},[t._v("#")]),t._v(" 2、打标签")]),t._v(" "),s("p",[t._v("标签"),s("code",[t._v("0.1.0")]),t._v("与spec中的"),s("code",[t._v("s.version")]),t._v("保持一致")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("git tag '0.1.0'\ngit push --tags\n")])])]),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210110204003.png",alt:"tag"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210110204019.png",alt:"标签上传成功"}})]),t._v(" "),s("h2",{attrs:{id:"五、提交podspec到私有索引库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#五、提交podspec到私有索引库"}},[t._v("#")]),t._v(" 五、提交podspec到私有索引库")]),t._v(" "),s("p",[t._v("在上传spec文件前我们可以做一个验证来节省时间，不然每次都推送很久结果还是验证失败，会气死人的～")]),t._v(" "),s("h3",{attrs:{id:"_1、本地验证spec的必填字段"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、本地验证spec的必填字段"}},[t._v("#")]),t._v(" 1、本地验证Spec的必填字段")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// 本地验证不会验证 s.source 中的tag\npod lib lint\n")])])]),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210110204045.png",alt:"pod lib lint"}})]),t._v(" "),s("h3",{attrs:{id:"_2、远程验证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、远程验证"}},[t._v("#")]),t._v(" 2、远程验证")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// 远程验证会验证 s.source 中的tag，如果此时没有打上相应的标签则会报错\npod spec lint\n")])])]),s("p",[t._v("如果你刚才没有打标签并上传至远程私有库就来进行远程验证，肯定是会报错的")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210110204057.png",alt:"tag Error"}})]),t._v(" "),s("p",[t._v("在打完并上传tag后再进行远程验证，就会验证成功了，验证成功后我们就可以进行下一步操作：提交podspec文件到索引库")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210110204147.png",alt:"pod spec lint"}})]),t._v(" "),s("ul",[s("li",[t._v("验证私有库提示\n如果验证的是私有库，则在后面加上"),s("code",[t._v("--private")]),t._v(",否则会有警告，你可以选择"),s("code",[t._v("--allow-warnings")]),t._v("来忽略该警告")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("pod lib lint --private\npod spec lint --private\n")])])]),s("h3",{attrs:{id:"_3、提交podspec"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、提交podspec"}},[t._v("#")]),t._v(" 3、提交podspec")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// pod repo push 私有索引库名称 spec名称.podspec \npod repo push LXFSpecs LXFBase.podspec \n")])])]),s("p",[t._v("这里的操作过程：先将我们的代码直接push到本地索引库LXFSpecs，推送后会自动帮我们同步到远程索引库")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210110204205.png",alt:"提交成功"}})]),t._v(" "),s("p",[t._v("再来看看码云上的私有索引库LXFSpecs")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210110204224.png",alt:"LXFBase.podspec"}})]),t._v(" "),s("p",[t._v("来测试下搜索我们的组件")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("pod search 'LXFBase'\n")])])]),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210110204239.png",alt:"搜索成功"}})]),t._v(" "),s("h2",{attrs:{id:"六、使用私有库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#六、使用私有库"}},[t._v("#")]),t._v(" 六、使用私有库")]),t._v(" "),s("p",[t._v("这时我们可以来试试通过pod形式来添加组件LXFBase，创建一个新的项目")]),t._v(" "),s("h3",{attrs:{id:"_1、添加podfile文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、添加podfile文件"}},[t._v("#")]),t._v(" 1、添加Podfile文件")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("pod init\n")])])]),s("h3",{attrs:{id:"_2、在podfile的最顶部添加如下描述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、在podfile的最顶部添加如下描述"}},[t._v("#")]),t._v(" 2、在Podfile的最顶部添加如下描述")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// 第二行是为了保证公有库的正常使用\nsource 'https://gitee.com/LinXunFeng/LXFSpecs.git'\nsource 'https://github.com/CocoaPods/Specs.git'\n")])])]),s("h3",{attrs:{id:"_3、添加使用组件lxfbase"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、添加使用组件lxfbase"}},[t._v("#")]),t._v(" 3、添加使用组件LXFBase")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("pod 'LXFBase'\n")])])]),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210110204313.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"_4、安装组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、安装组件"}},[t._v("#")]),t._v(" 4、安装组件")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("pod install\n")])])]),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210110204337.png",alt:"安装成功"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210110204405.png",alt:"成功添加组件内容"}})])])}),[],!1,null,null,null);s.default=r.exports}}]);