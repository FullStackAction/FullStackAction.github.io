(window.webpackJsonp=window.webpackJsonp||[]).push([[188],{597:function(s,a,t){"use strict";t.r(a);var e=t(21),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("blockquote",[a("p",[s._v("是不是你也遇到过，在 "),a("code",[s._v("Shadowsocks")]),s._v(" 使用 "),a("code",[s._v("全局")]),s._v(" 模式下，终端依旧无法 "),a("code",[s._v("ping")]),s._v(" 通谷歌？这是因为 "),a("code",[s._v("Shadowsocks")]),s._v(" 仅针对代理应用软件，但是一些终端下执行的命令是无法代理的。所以本篇就来介绍一下如何使你的终端也走代理进行访问。")])]),s._v(" "),a("h2",{attrs:{id:"方案一-终端下的all-proxy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方案一-终端下的all-proxy"}},[s._v("#")]),s._v(" 方案一：终端下的all_proxy")]),s._v(" "),a("blockquote",[a("p",[s._v("这里以 "),a("code",[s._v("zshrc")]),s._v(" + "),a("code",[s._v("Shadowsocks")]),s._v(" 为例")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("打开 "),a("code",[s._v("Shadowsocks")]),s._v("，模式选为 "),a("code",[s._v("PAC自动模式")]),s._v(" 或 "),a("code",[s._v("全局模式")])])]),s._v(" "),a("li",[a("p",[s._v("如果不是使用 "),a("code",[s._v(".zshrc")]),s._v(" 就 编辑 "),a("code",[s._v("~/.bashrc")]),s._v("，下面的同理")])])])]),s._v(" "),a("h3",{attrs:{id:"_1、打开-zshrc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、打开-zshrc"}},[s._v("#")]),s._v(" 1、打开 "),a("code",[s._v(".zshrc")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" ~/.zshrc\n")])])]),a("h3",{attrs:{id:"_2、添加命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、添加命令"}},[s._v("#")]),s._v(" 2、添加命令")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("proxy")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'export all_proxy=socks5://127.0.0.1:1086'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("unproxy")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'unset all_proxy'")]),s._v("\n")])])]),a("h3",{attrs:{id:"_3、使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、使用"}},[s._v("#")]),s._v(" 3、使用")]),s._v(" "),a("p",[s._v("先应用一下配置")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ~/.zshrc\n")])])]),a("p",[s._v("终端下敲入")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("proxy\n")])])]),a("p",[s._v("这样就应用上代理了，使用 "),a("code",[s._v("curl")]),s._v(" 获取一下 "),a("code",[s._v("cip.cc")]),s._v(" 来查看当前所使用的 "),a("code",[s._v("ip")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("curl cip.cc\n")])])]),a("p",[s._v("如果不想使用代理了，就使用如下命令")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("unproxy\n")])])]),a("h3",{attrs:{id:"_4、总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、总结"}},[s._v("#")]),s._v(" 4、总结")]),s._v(" "),a("p",[s._v("这种方式我个人是亲测无效的，不知道是不是我人品问题，还是我的 MAC 有问题，有兴趣的小伙伴可以试试。")]),s._v(" "),a("h2",{attrs:{id:"方案二-proxychains-ng"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方案二-proxychains-ng"}},[s._v("#")]),s._v(" 方案二：ProxyChains-NG")]),s._v(" "),a("p",[s._v("proxychains-ng是proxychains的加强版，主要有以下功能和不足：")]),s._v(" "),a("ul",[a("li",[s._v("支持http/https/socks4/socks5")]),s._v(" "),a("li",[s._v("支持认证")]),s._v(" "),a("li",[s._v("远端dns查询")]),s._v(" "),a("li",[s._v("多种代理模式")]),s._v(" "),a("li",[s._v("不支持udp/icmp转发")]),s._v(" "),a("li",[s._v("少部分程序和在后台运行的可能无法代理")])]),s._v(" "),a("p",[s._v("详情可见 "),a("a",{attrs:{href:"https://github.com/rofl0r/proxychains-ng",target:"_blank",rel:"noopener noreferrer"}},[s._v("GitHub地址"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境"}},[s._v("#")]),s._v(" 环境")]),s._v(" "),a("p",[s._v("这里以 "),a("code",[s._v("MAC")]),s._v(" + "),a("code",[s._v("homebrew")]),s._v(" 为例，如果你还没有安装的话可以参考下方命令，详细可见官网 "),a("a",{attrs:{href:"https://brew.sh/index_zh-cn.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Homebrew"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将命令粘贴至终端并回车进行安装")]),s._v("\n/usr/bin/ruby "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-fsSL")]),s._v(" https://raw.githubusercontent.com/Homebrew/install/master/install"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v("\n")])])]),a("h3",{attrs:{id:"关闭sip"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关闭sip"}},[s._v("#")]),s._v(" 关闭SIP")]),s._v(" "),a("p",[s._v("macOS 10.11 后下由于开启了 SIP（System Integrity Protection） 会导致命令行下 proxychains-ng 代理的模式失效，如果你要使用 proxychains-ng 这种简单的方法，就需要先关闭 SIP。")]),s._v(" "),a("p",[s._v("具体的关闭方法如下：")]),s._v(" "),a("ul",[a("li",[s._v("部分关闭 SIP")])]),s._v(" "),a("blockquote",[a("p",[s._v("重启Mac，按住Option键进入启动盘选择模式，再按⌘ + R进入Recovery模式。\n实用工具（Utilities）-> 终端（Terminal）。\n输入命令"),a("code",[s._v("csrutil enable --without debug")]),s._v("运行。\n重启进入系统后，终端里输入 csrutil status，结果中如果有 Debugging Restrictions: disabled 则说明关闭成功。")])]),s._v(" "),a("ul",[a("li",[s._v("完全关闭 SIP")])]),s._v(" "),a("blockquote",[a("p",[s._v("重启Mac，按住Option键进入启动盘选择模式，再按⌘ + R进入Recovery模式。\n实用工具（Utilities）-> 终端（Terminal）。\n输入命令"),a("code",[s._v("csrutil disable")]),s._v("运行。\n重启进入系统后，终端里输入 csrutil status，结果中如果有 System Integrity Protection status:disabled. 则说明关闭成功。")])]),s._v(" "),a("h3",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("brew "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" proxychains-ng\n")])])]),a("h3",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[s._v("#")]),s._v(" 配置")]),s._v(" "),a("p",[s._v("使用 Homebrew 安装完成后的配置文件路径为 "),a("code",[s._v("/usr/local/etc/proxychains.conf")])]),s._v(" "),a("p",[s._v("打开它，找到 "),a("code",[s._v("[ProxyList]")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ProxyList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nsocks5  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1086")]),s._v("\n")])])]),a("p",[s._v("proxychains-ng支持多种代理模式,默认是选择 strict_chain。")]),s._v(" "),a("ul",[a("li",[s._v("dynamic_chain ：动态模式,按照代理列表顺序自动选取可用代理")]),s._v(" "),a("li",[s._v("strict_chain ：严格模式,严格按照代理列表顺序使用代理，所有代理必须可用")]),s._v(" "),a("li",[s._v("round_robin_chain ：轮询模式，自动跳过不可用代理")]),s._v(" "),a("li",[s._v("random_chain ：随机模式,随机使用代理")])]),s._v(" "),a("p",[s._v("给proxychains4增加一个别名，在 ~/.zshrc或~/.bashrc末尾加入如下行：")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pc")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'proxychains4'")]),s._v("\n")])])]),a("p",[s._v("这样就可以使用 "),a("code",[s._v("pc")]),s._v(" 来 指代 "),a("code",[s._v("proxychains4")]),s._v("，简化输入。")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("pc "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" cip.cc\n")])])]),a("p",[s._v("如果你使用 "),a("code",[s._v("iTerm")]),s._v(" 的话可以配置快捷键来实现前缀补全功能")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("在 iTerm -> Preferences -> Profiles -> Keys 中，新建一个快捷键，例如 ⌥ + p ，Action 选择 Send Hex Code，键值为 0x1 0x70 0x63 0x20 0xd，保存生效。\n")])])]),a("p",[s._v("更多的Hex Code可以到 "),a("a",{attrs:{href:"https://manytricks.com/keycodes/",target:"_blank",rel:"noopener noreferrer"}},[s._v("manytricks"),a("OutboundLink")],1),s._v(" 上查找。")]),s._v(" "),a("p",[s._v("使用场景：敲了一长串的命令后想使用代理功能时，就可以直接使用快捷键 "),a("code",[s._v("⌥ + p")]),s._v(" ，这样就会自动在命令的最前面加上 "),a("code",[s._v("pc")])]),s._v(" "),a("h3",{attrs:{id:"测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[s._v("#")]),s._v(" 测试")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("proxychains4 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" cip.cc\n\n// 如果你设置了别名的话可以使用 pc 指代 proxychains4\npc "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" cip.cc\n")])])]),a("p",[s._v("可以看到这就代理上了")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("IP\t: xxx.xxx.xxx.xxx\n地址\t: 美国  加利福尼亚州  洛杉矶\n运营商\t: it7.net\n\n数据二\t: 美国\n\n数据三\t: 美国加利福尼亚洛杉矶\n\nURL\t: http://www.cip.cc/xxx.xxx.xxx.xxx\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);