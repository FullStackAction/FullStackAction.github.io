<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Python - çˆ¬è™«ä¹‹Scrapy | FSAå…¨æ ˆè¡ŒåŠ¨</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/favicon.ico">
    <script data-ad-client="ca-pub-3568502583266202" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script src="/js/global.js"></script>
    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?885476c2eae58d4aee1ab7fcfb548adb";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
      </script>
    <meta name="description" content="åˆ†äº«Androidã€iOSã€Pythonã€Vueç­‰æŠ€æœ¯èµ„è®¯ã€å­¦ä¹ ç¬”è®°ï¼ŒæˆåŠŸæœ‰æ¢¦æƒ³çš„å…¨æ ˆå·¥ç¨‹å¸ˆï¼Œæ¬¢è¿å…³æ³¨ã€‚">
    <meta name="keywords" content="FSAå…¨æ ˆè¡ŒåŠ¨,LinXunFeng,GitLqr,å…¨æ ˆæŠ€æœ¯åšå®¢,ç§»åŠ¨ç«¯,webå‰ç«¯,åç«¯å¼€å‘,å‰ç«¯æ¡†æ¶,webå‰ç«¯,Androidæ¡†æ¶,iOSæ¡†æ¶,Flutteræ¡†æ¶,Pythonæ¡†æ¶,Vueæ¡†æ¶,æŠ€æœ¯æ–‡æ¡£,å­¦ä¹ ,é¢è¯•,Java,Kotlin,object-c,Swift,Kotlin,Dart,JavaScript,js,ES6,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="code-Cyx4xlZmzI">
    <meta name="google-site-verification" content="_0KO4KbxdSwB-TPRQ8bRqmML8dnrx5G82GhQNZlR4HU">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.f24a96ee.css" as="style"><link rel="preload" href="/assets/js/app.6b6c4902.js" as="script"><link rel="preload" href="/assets/js/2.d8b68cf2.js" as="script"><link rel="preload" href="/assets/js/186.665f680d.js" as="script"><link rel="prefetch" href="/assets/js/10.d73c7d01.js"><link rel="prefetch" href="/assets/js/100.dce28da0.js"><link rel="prefetch" href="/assets/js/101.692c940a.js"><link rel="prefetch" href="/assets/js/102.c38cd400.js"><link rel="prefetch" href="/assets/js/103.6c81b613.js"><link rel="prefetch" href="/assets/js/104.8b53e631.js"><link rel="prefetch" href="/assets/js/105.fc57ba8f.js"><link rel="prefetch" href="/assets/js/106.897cdd42.js"><link rel="prefetch" href="/assets/js/107.77448fb9.js"><link rel="prefetch" href="/assets/js/108.5d4b4c76.js"><link rel="prefetch" href="/assets/js/109.283e7cff.js"><link rel="prefetch" href="/assets/js/11.1bcda3a0.js"><link rel="prefetch" href="/assets/js/110.b4de5b94.js"><link rel="prefetch" href="/assets/js/111.8bd3a603.js"><link rel="prefetch" href="/assets/js/112.516958d7.js"><link rel="prefetch" href="/assets/js/113.6c17071d.js"><link rel="prefetch" href="/assets/js/114.29cfe780.js"><link rel="prefetch" href="/assets/js/115.5c490b1f.js"><link rel="prefetch" href="/assets/js/116.3c2206ae.js"><link rel="prefetch" href="/assets/js/117.33c3b92f.js"><link rel="prefetch" href="/assets/js/118.56d4b1ae.js"><link rel="prefetch" href="/assets/js/119.33296c42.js"><link rel="prefetch" href="/assets/js/12.9d9f5ba0.js"><link rel="prefetch" href="/assets/js/120.93d74e02.js"><link rel="prefetch" href="/assets/js/121.35b36938.js"><link rel="prefetch" href="/assets/js/122.efe277e1.js"><link rel="prefetch" href="/assets/js/123.3b157fe3.js"><link rel="prefetch" href="/assets/js/124.4091929f.js"><link rel="prefetch" href="/assets/js/125.30306635.js"><link rel="prefetch" href="/assets/js/126.4b064767.js"><link rel="prefetch" href="/assets/js/127.0002e811.js"><link rel="prefetch" href="/assets/js/128.c0935dbb.js"><link rel="prefetch" href="/assets/js/129.05a78487.js"><link rel="prefetch" href="/assets/js/13.2af8a90e.js"><link rel="prefetch" href="/assets/js/130.65ea4fde.js"><link rel="prefetch" href="/assets/js/131.dbfdcf15.js"><link rel="prefetch" href="/assets/js/132.57bd8a77.js"><link rel="prefetch" href="/assets/js/133.d8849bbf.js"><link rel="prefetch" href="/assets/js/134.97755c83.js"><link rel="prefetch" href="/assets/js/135.3b497c8b.js"><link rel="prefetch" href="/assets/js/136.33afa734.js"><link rel="prefetch" href="/assets/js/137.3004ec9e.js"><link rel="prefetch" href="/assets/js/138.d7fc8252.js"><link rel="prefetch" href="/assets/js/139.d863ede2.js"><link rel="prefetch" href="/assets/js/14.dfac8018.js"><link rel="prefetch" href="/assets/js/140.87424ea7.js"><link rel="prefetch" href="/assets/js/141.4576b3cf.js"><link rel="prefetch" href="/assets/js/142.0000c560.js"><link rel="prefetch" href="/assets/js/143.1bee7458.js"><link rel="prefetch" href="/assets/js/144.d700de53.js"><link rel="prefetch" href="/assets/js/145.ad942d20.js"><link rel="prefetch" href="/assets/js/146.56cc2423.js"><link rel="prefetch" href="/assets/js/147.7bb47f16.js"><link rel="prefetch" href="/assets/js/148.5fda7f07.js"><link rel="prefetch" href="/assets/js/149.29471e7e.js"><link rel="prefetch" href="/assets/js/15.525d5dfe.js"><link rel="prefetch" href="/assets/js/150.4f7368c0.js"><link rel="prefetch" href="/assets/js/151.d7feca4c.js"><link rel="prefetch" href="/assets/js/152.81a4a354.js"><link rel="prefetch" href="/assets/js/153.ba1b275c.js"><link rel="prefetch" href="/assets/js/154.d4c1d7a7.js"><link rel="prefetch" href="/assets/js/155.d80b6fb3.js"><link rel="prefetch" href="/assets/js/156.fe880381.js"><link rel="prefetch" href="/assets/js/157.bb574347.js"><link rel="prefetch" href="/assets/js/158.a6d1e8ba.js"><link rel="prefetch" href="/assets/js/159.4edf9e78.js"><link rel="prefetch" href="/assets/js/16.d8737ba6.js"><link rel="prefetch" href="/assets/js/160.0894d1d0.js"><link rel="prefetch" href="/assets/js/161.b100de83.js"><link rel="prefetch" href="/assets/js/162.81be7d90.js"><link rel="prefetch" href="/assets/js/163.f58980ed.js"><link rel="prefetch" href="/assets/js/164.0daa0d84.js"><link rel="prefetch" href="/assets/js/165.52ee61a3.js"><link rel="prefetch" href="/assets/js/166.463f2cce.js"><link rel="prefetch" href="/assets/js/167.7ad68452.js"><link rel="prefetch" href="/assets/js/168.9e33a395.js"><link rel="prefetch" href="/assets/js/169.c38c3719.js"><link rel="prefetch" href="/assets/js/17.a33331a9.js"><link rel="prefetch" href="/assets/js/170.9c4e7115.js"><link rel="prefetch" href="/assets/js/171.1ce9a88c.js"><link rel="prefetch" href="/assets/js/172.e082dafc.js"><link rel="prefetch" href="/assets/js/173.aa5ebc80.js"><link rel="prefetch" href="/assets/js/174.e5cd101b.js"><link rel="prefetch" href="/assets/js/175.88f8c4b5.js"><link rel="prefetch" href="/assets/js/176.2b6fa5b7.js"><link rel="prefetch" href="/assets/js/177.6131ff00.js"><link rel="prefetch" href="/assets/js/178.876c17f6.js"><link rel="prefetch" href="/assets/js/179.79823b94.js"><link rel="prefetch" href="/assets/js/18.6868e6e4.js"><link rel="prefetch" href="/assets/js/180.4ce1a16c.js"><link rel="prefetch" href="/assets/js/181.8f05dd1e.js"><link rel="prefetch" href="/assets/js/182.1f2e9903.js"><link rel="prefetch" href="/assets/js/183.e0001468.js"><link rel="prefetch" href="/assets/js/184.2322c342.js"><link rel="prefetch" href="/assets/js/185.4ed23108.js"><link rel="prefetch" href="/assets/js/187.477c9bcf.js"><link rel="prefetch" href="/assets/js/188.682a9d33.js"><link rel="prefetch" href="/assets/js/189.6175f727.js"><link rel="prefetch" href="/assets/js/19.45741985.js"><link rel="prefetch" href="/assets/js/190.4f8d6b32.js"><link rel="prefetch" href="/assets/js/191.2769ad1f.js"><link rel="prefetch" href="/assets/js/192.2716e2c5.js"><link rel="prefetch" href="/assets/js/193.4608649e.js"><link rel="prefetch" href="/assets/js/194.aa50c283.js"><link rel="prefetch" href="/assets/js/195.0807f2c8.js"><link rel="prefetch" href="/assets/js/196.551ba125.js"><link rel="prefetch" href="/assets/js/197.76addb37.js"><link rel="prefetch" href="/assets/js/198.f36ca449.js"><link rel="prefetch" href="/assets/js/199.f1ce6135.js"><link rel="prefetch" href="/assets/js/20.7ebce31c.js"><link rel="prefetch" href="/assets/js/200.ba2543d3.js"><link rel="prefetch" href="/assets/js/201.40527c52.js"><link rel="prefetch" href="/assets/js/202.834e65fd.js"><link rel="prefetch" href="/assets/js/203.10c19570.js"><link rel="prefetch" href="/assets/js/204.3a46eb78.js"><link rel="prefetch" href="/assets/js/205.0294cbf2.js"><link rel="prefetch" href="/assets/js/206.1246e511.js"><link rel="prefetch" href="/assets/js/207.648bbf4c.js"><link rel="prefetch" href="/assets/js/208.f4e89dfb.js"><link rel="prefetch" href="/assets/js/209.8519b844.js"><link rel="prefetch" href="/assets/js/21.1f7af77b.js"><link rel="prefetch" href="/assets/js/210.3c16b311.js"><link rel="prefetch" href="/assets/js/211.bfd21f51.js"><link rel="prefetch" href="/assets/js/212.8ee2796a.js"><link rel="prefetch" href="/assets/js/213.70608f06.js"><link rel="prefetch" href="/assets/js/214.dba99e25.js"><link rel="prefetch" href="/assets/js/215.114f308d.js"><link rel="prefetch" href="/assets/js/216.c5816551.js"><link rel="prefetch" href="/assets/js/217.9b3b40ff.js"><link rel="prefetch" href="/assets/js/218.94f4fb85.js"><link rel="prefetch" href="/assets/js/219.21427cda.js"><link rel="prefetch" href="/assets/js/22.7b06dabf.js"><link rel="prefetch" href="/assets/js/220.626f545c.js"><link rel="prefetch" href="/assets/js/221.6f5d1e67.js"><link rel="prefetch" href="/assets/js/222.ecb2b901.js"><link rel="prefetch" href="/assets/js/223.4bd68f35.js"><link rel="prefetch" href="/assets/js/224.f63b90ae.js"><link rel="prefetch" href="/assets/js/225.f5085139.js"><link rel="prefetch" href="/assets/js/226.fcd3f4da.js"><link rel="prefetch" href="/assets/js/227.b9c775d1.js"><link rel="prefetch" href="/assets/js/228.aaeb79e7.js"><link rel="prefetch" href="/assets/js/229.a91f67cd.js"><link rel="prefetch" href="/assets/js/23.edd150d3.js"><link rel="prefetch" href="/assets/js/230.211b33b3.js"><link rel="prefetch" href="/assets/js/231.339f447d.js"><link rel="prefetch" href="/assets/js/232.9ced0ed5.js"><link rel="prefetch" href="/assets/js/233.d3f8e84f.js"><link rel="prefetch" href="/assets/js/234.b8b0151e.js"><link rel="prefetch" href="/assets/js/235.e7ec2a27.js"><link rel="prefetch" href="/assets/js/236.120244ea.js"><link rel="prefetch" href="/assets/js/237.1d0cb2b2.js"><link rel="prefetch" href="/assets/js/238.23bef63c.js"><link rel="prefetch" href="/assets/js/239.a4aaba14.js"><link rel="prefetch" href="/assets/js/24.03fd3278.js"><link rel="prefetch" href="/assets/js/240.9205bd59.js"><link rel="prefetch" href="/assets/js/241.ff59ab56.js"><link rel="prefetch" href="/assets/js/242.9ed0ee12.js"><link rel="prefetch" href="/assets/js/243.96025c58.js"><link rel="prefetch" href="/assets/js/244.d7038e62.js"><link rel="prefetch" href="/assets/js/245.41209f13.js"><link rel="prefetch" href="/assets/js/246.535303b5.js"><link rel="prefetch" href="/assets/js/247.d98302f6.js"><link rel="prefetch" href="/assets/js/248.4d68d650.js"><link rel="prefetch" href="/assets/js/249.25f51b3a.js"><link rel="prefetch" href="/assets/js/25.44951042.js"><link rel="prefetch" href="/assets/js/250.4011702f.js"><link rel="prefetch" href="/assets/js/251.e6d1d3d6.js"><link rel="prefetch" href="/assets/js/252.7660bc50.js"><link rel="prefetch" href="/assets/js/253.29433cfd.js"><link rel="prefetch" href="/assets/js/254.58591dc5.js"><link rel="prefetch" href="/assets/js/255.5c2ceae5.js"><link rel="prefetch" href="/assets/js/256.9615fc8d.js"><link rel="prefetch" href="/assets/js/257.aaff1bc8.js"><link rel="prefetch" href="/assets/js/258.9b60118a.js"><link rel="prefetch" href="/assets/js/259.d97a0c49.js"><link rel="prefetch" href="/assets/js/26.e9c2a2f6.js"><link rel="prefetch" href="/assets/js/260.822b00a0.js"><link rel="prefetch" href="/assets/js/261.c95c1315.js"><link rel="prefetch" href="/assets/js/262.9d15283a.js"><link rel="prefetch" href="/assets/js/263.9ecb9543.js"><link rel="prefetch" href="/assets/js/27.aacf639c.js"><link rel="prefetch" href="/assets/js/28.718641c3.js"><link rel="prefetch" href="/assets/js/29.e243e2a7.js"><link rel="prefetch" href="/assets/js/3.32f34adc.js"><link rel="prefetch" href="/assets/js/30.da8f4d49.js"><link rel="prefetch" href="/assets/js/31.59259562.js"><link rel="prefetch" href="/assets/js/32.028d62ae.js"><link rel="prefetch" href="/assets/js/33.3b70ec9e.js"><link rel="prefetch" href="/assets/js/34.bf2570c3.js"><link rel="prefetch" href="/assets/js/35.ac4ccec9.js"><link rel="prefetch" href="/assets/js/36.bffc7c49.js"><link rel="prefetch" href="/assets/js/37.f30f1cbb.js"><link rel="prefetch" href="/assets/js/38.9ff8e9d7.js"><link rel="prefetch" href="/assets/js/39.bae582ef.js"><link rel="prefetch" href="/assets/js/4.f21084fd.js"><link rel="prefetch" href="/assets/js/40.5a3d5763.js"><link rel="prefetch" href="/assets/js/41.efe92704.js"><link rel="prefetch" href="/assets/js/42.c8e276f2.js"><link rel="prefetch" href="/assets/js/43.7b5518fd.js"><link rel="prefetch" href="/assets/js/44.cb0239ea.js"><link rel="prefetch" href="/assets/js/45.411caf2b.js"><link rel="prefetch" href="/assets/js/46.8374a3d1.js"><link rel="prefetch" href="/assets/js/47.79a96a98.js"><link rel="prefetch" href="/assets/js/48.3318facd.js"><link rel="prefetch" href="/assets/js/49.e2fefb42.js"><link rel="prefetch" href="/assets/js/5.fb735bd1.js"><link rel="prefetch" href="/assets/js/50.30b4bfec.js"><link rel="prefetch" href="/assets/js/51.e955e801.js"><link rel="prefetch" href="/assets/js/52.3e4c5bd5.js"><link rel="prefetch" href="/assets/js/53.10b4da3e.js"><link rel="prefetch" href="/assets/js/54.bcf53f23.js"><link rel="prefetch" href="/assets/js/55.7dc849e2.js"><link rel="prefetch" href="/assets/js/56.106c02f7.js"><link rel="prefetch" href="/assets/js/57.024e57ae.js"><link rel="prefetch" href="/assets/js/58.14f76c64.js"><link rel="prefetch" href="/assets/js/59.0b24f777.js"><link rel="prefetch" href="/assets/js/6.95ba2307.js"><link rel="prefetch" href="/assets/js/60.151b84bc.js"><link rel="prefetch" href="/assets/js/61.fea72a18.js"><link rel="prefetch" href="/assets/js/62.28f09486.js"><link rel="prefetch" href="/assets/js/63.3a04ec43.js"><link rel="prefetch" href="/assets/js/64.c61b95a1.js"><link rel="prefetch" href="/assets/js/65.d00ddf25.js"><link rel="prefetch" href="/assets/js/66.41247740.js"><link rel="prefetch" href="/assets/js/67.1a858f2e.js"><link rel="prefetch" href="/assets/js/68.7fe78215.js"><link rel="prefetch" href="/assets/js/69.960af925.js"><link rel="prefetch" href="/assets/js/7.4124b472.js"><link rel="prefetch" href="/assets/js/70.94bc99f2.js"><link rel="prefetch" href="/assets/js/71.bd38c404.js"><link rel="prefetch" href="/assets/js/72.544b7f42.js"><link rel="prefetch" href="/assets/js/73.233ea30b.js"><link rel="prefetch" href="/assets/js/74.34b946df.js"><link rel="prefetch" href="/assets/js/75.58090f19.js"><link rel="prefetch" href="/assets/js/76.70d46d82.js"><link rel="prefetch" href="/assets/js/77.c2b4863a.js"><link rel="prefetch" href="/assets/js/78.d40627c8.js"><link rel="prefetch" href="/assets/js/79.d6de2dfb.js"><link rel="prefetch" href="/assets/js/8.5a1bca1f.js"><link rel="prefetch" href="/assets/js/80.396cf990.js"><link rel="prefetch" href="/assets/js/81.86cbef81.js"><link rel="prefetch" href="/assets/js/82.95e91827.js"><link rel="prefetch" href="/assets/js/83.88dd9ea9.js"><link rel="prefetch" href="/assets/js/84.771341d2.js"><link rel="prefetch" href="/assets/js/85.1f72cd88.js"><link rel="prefetch" href="/assets/js/86.4368a883.js"><link rel="prefetch" href="/assets/js/87.16f433d5.js"><link rel="prefetch" href="/assets/js/88.dc610ae7.js"><link rel="prefetch" href="/assets/js/89.a12c56a1.js"><link rel="prefetch" href="/assets/js/9.e286e9f3.js"><link rel="prefetch" href="/assets/js/90.4fd71e0f.js"><link rel="prefetch" href="/assets/js/91.aeb4c119.js"><link rel="prefetch" href="/assets/js/92.8256d7bf.js"><link rel="prefetch" href="/assets/js/93.ae5faa48.js"><link rel="prefetch" href="/assets/js/94.63d19918.js"><link rel="prefetch" href="/assets/js/95.a95de705.js"><link rel="prefetch" href="/assets/js/96.6f336fcd.js"><link rel="prefetch" href="/assets/js/97.823f0c36.js"><link rel="prefetch" href="/assets/js/98.0db5e164.js"><link rel="prefetch" href="/assets/js/99.00c90d24.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f24a96ee.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210131112211.jpg" alt="FSAå…¨æ ˆè¡ŒåŠ¨" class="logo"> <span class="site-name can-hide">FSAå…¨æ ˆè¡ŒåŠ¨</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç§»åŠ¨ç«¯" class="dropdown-title"><a href="/mobile/" class="link-title">ç§»åŠ¨ç«¯</a> <span class="title" style="display:none;">ç§»åŠ¨ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>ç§»åŠ¨ç«¯æ–‡ç« </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/61d6a8/" class="nav-link">Android</a></li><li class="dropdown-subitem"><a href="/pages/cb27eb/" class="nav-link">iOS</a></li><li class="dropdown-subitem"><a href="/pages/61cc74/" class="nav-link">Flutter</a></li></ul></li><li class="dropdown-item"><h4>å­¦ä¹ ç¬”è®°</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/kotlin/" class="nav-link">ã€ŠKotlinå¿«é€Ÿå…¥é—¨è¿›é˜¶ã€‹ç¬”è®°</a></li><li class="dropdown-subitem"><a href="/note/flutter/" class="nav-link">ã€ŠFlutterä»å…¥é—¨åˆ°å®æˆ˜ã€‹ç¬”è®°</a></li><li class="dropdown-subitem"><a href="/note/flutter/lxf/review/" class="nav-link">ã€ŠFlutterå¤ä¹ ã€‹ç¬”è®°</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/web/" class="nav-link">å‰ç«¯</a></div><div class="nav-item"><a href="/backend/" class="nav-link">åç«¯</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å†…åŠŸå¿ƒæ³•" class="dropdown-title"><a href="/power/" class="link-title">å†…åŠŸå¿ƒæ³•</a> <span class="title" style="display:none;">å†…åŠŸå¿ƒæ³•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>å­¦ä¹ ç¬”è®°</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/designpattern/" class="nav-link">ã€Šæ·±å…¥æµ…å‡ºè®¾è®¡æ¨¡å¼Javaç‰ˆã€‹ç¬”è®°</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ›´å¤š" class="dropdown-title"><a href="/more/" class="link-title">æ›´å¤š</a> <span class="title" style="display:none;">æ›´å¤š</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/ea5b48/" class="nav-link">é€†å‘</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç´¢å¼•" class="dropdown-title"><a href="/archives/" class="link-title">ç´¢å¼•</a> <span class="title" style="display:none;">ç´¢å¼•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="About" class="dropdown-title"><!----> <span class="title" style="display:;">About</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about/LinXunFeng/" class="nav-link">LinXunFeng</a></li><li class="dropdown-item"><!----> <a href="/about/GitLqr/" class="nav-link">GitLqr</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210131111432.png"> <div class="blogger-info"><h3>å…¬ä¼—å·ï¼šFSAå…¨æ ˆè¡ŒåŠ¨</h3> <span>è®°å½•å­¦ä¹ è¿‡ç¨‹ä¸­çš„çŸ¥è¯†</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç§»åŠ¨ç«¯" class="dropdown-title"><a href="/mobile/" class="link-title">ç§»åŠ¨ç«¯</a> <span class="title" style="display:none;">ç§»åŠ¨ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>ç§»åŠ¨ç«¯æ–‡ç« </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/61d6a8/" class="nav-link">Android</a></li><li class="dropdown-subitem"><a href="/pages/cb27eb/" class="nav-link">iOS</a></li><li class="dropdown-subitem"><a href="/pages/61cc74/" class="nav-link">Flutter</a></li></ul></li><li class="dropdown-item"><h4>å­¦ä¹ ç¬”è®°</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/kotlin/" class="nav-link">ã€ŠKotlinå¿«é€Ÿå…¥é—¨è¿›é˜¶ã€‹ç¬”è®°</a></li><li class="dropdown-subitem"><a href="/note/flutter/" class="nav-link">ã€ŠFlutterä»å…¥é—¨åˆ°å®æˆ˜ã€‹ç¬”è®°</a></li><li class="dropdown-subitem"><a href="/note/flutter/lxf/review/" class="nav-link">ã€ŠFlutterå¤ä¹ ã€‹ç¬”è®°</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/web/" class="nav-link">å‰ç«¯</a></div><div class="nav-item"><a href="/backend/" class="nav-link">åç«¯</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å†…åŠŸå¿ƒæ³•" class="dropdown-title"><a href="/power/" class="link-title">å†…åŠŸå¿ƒæ³•</a> <span class="title" style="display:none;">å†…åŠŸå¿ƒæ³•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>å­¦ä¹ ç¬”è®°</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/designpattern/" class="nav-link">ã€Šæ·±å…¥æµ…å‡ºè®¾è®¡æ¨¡å¼Javaç‰ˆã€‹ç¬”è®°</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ›´å¤š" class="dropdown-title"><a href="/more/" class="link-title">æ›´å¤š</a> <span class="title" style="display:none;">æ›´å¤š</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/ea5b48/" class="nav-link">é€†å‘</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç´¢å¼•" class="dropdown-title"><a href="/archives/" class="link-title">ç´¢å¼•</a> <span class="title" style="display:none;">ç´¢å¼•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="About" class="dropdown-title"><!----> <span class="title" style="display:;">About</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about/LinXunFeng/" class="nav-link">LinXunFeng</a></li><li class="dropdown-item"><!----> <a href="/about/GitLqr/" class="nav-link">GitLqr</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>LinuxéŸ³è§†é¢‘</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Pythonç¯å¢ƒ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Pythonçˆ¬è™«</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/b960c3/" class="sidebar-link">Python - çˆ¬è™«åŸºç¡€ä¸requestsæ¨¡å—</a></li><li><a href="/pages/9c63e1/" class="sidebar-link">Python - çˆ¬è™«ä¹‹æ•°æ®æå–</a></li><li><a href="/pages/10277d/" class="sidebar-link">Python - çˆ¬è™«ä¹‹Selenium</a></li><li><a href="/pages/b576c8/" aria-current="page" class="active sidebar-link">Python - çˆ¬è™«ä¹‹Scrapy</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/b576c8/#ä¸€ã€scrapy-æ¦‚å¿µå’Œæµç¨‹" class="sidebar-link">ä¸€ã€scrapy æ¦‚å¿µå’Œæµç¨‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_1ã€æ¦‚å¿µ" class="sidebar-link">1ã€æ¦‚å¿µ</a></li><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_2ã€å·¥ä½œæµç¨‹" class="sidebar-link">2ã€å·¥ä½œæµç¨‹</a></li><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_3ã€å„æ¨¡å—çš„å…·ä½“ä½œç”¨" class="sidebar-link">3ã€å„æ¨¡å—çš„å…·ä½“ä½œç”¨</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/b576c8/#äºŒã€scrapy-å…¥é—¨ä½¿ç”¨" class="sidebar-link">äºŒã€scrapy å…¥é—¨ä½¿ç”¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_1ã€å®‰è£…-scrapy" class="sidebar-link">1ã€å®‰è£… scrapy</a></li><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_2ã€é¡¹ç›®å¼€å‘æµç¨‹" class="sidebar-link">2ã€é¡¹ç›®å¼€å‘æµç¨‹</a></li><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_3ã€ä¸‰ä¸ªå†…ç½®å¯¹è±¡" class="sidebar-link">3ã€ä¸‰ä¸ªå†…ç½®å¯¹è±¡</a></li><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_1-å®šä½å…ƒç´ ä»¥åŠæå–æ•°æ®" class="sidebar-link">1ï¼‰å®šä½å…ƒç´ ä»¥åŠæå–æ•°æ®</a></li><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_2-response-å“åº”å¯¹è±¡çš„å¸¸ç”¨å±æ€§" class="sidebar-link">2ï¼‰response å“åº”å¯¹è±¡çš„å¸¸ç”¨å±æ€§</a></li><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_4ã€å…¥é—¨å®æˆ˜" class="sidebar-link">4ã€å…¥é—¨å®æˆ˜</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/b576c8/#ä¸‰ã€scrapy-æ•°æ®å»ºæ¨¡-items" class="sidebar-link">ä¸‰ã€scrapy æ•°æ®å»ºæ¨¡(items)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_1ã€æ•°æ®å»ºæ¨¡" class="sidebar-link">1ã€æ•°æ®å»ºæ¨¡</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/b576c8/#å››ã€scrapy-å¤„ç†ç¿»é¡µ-request" class="sidebar-link">å››ã€scrapy å¤„ç†ç¿»é¡µ(Request)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_1ã€æ€è·¯" class="sidebar-link">1ã€æ€è·¯</a></li><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_2ã€å®ç°æ­¥éª¤" class="sidebar-link">2ã€å®ç°æ­¥éª¤</a></li><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_3ã€å®æˆ˜-ç½‘æ˜“æ‹›è˜çˆ¬è™«" class="sidebar-link">3ã€å®æˆ˜ï¼ˆç½‘æ˜“æ‹›è˜çˆ¬è™«ï¼‰</a></li><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_4ã€scrapy-request-çš„æ›´å¤šå‚æ•°" class="sidebar-link">4ã€scrapy.Request çš„æ›´å¤šå‚æ•°</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/b576c8/#äº”ã€scrapy-æ¨¡æ‹Ÿç™»å½•-cookie" class="sidebar-link">äº”ã€scrapy æ¨¡æ‹Ÿç™»å½•(cookie)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_1ã€æ¨¡æ‹Ÿç™»å½•çš„ä¸åŒå®ç°æ–¹å¼" class="sidebar-link">1ã€æ¨¡æ‹Ÿç™»å½•çš„ä¸åŒå®ç°æ–¹å¼</a></li><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_2ã€scrapy-ç›´æ¥æºå¸¦-cookies-è·å–éœ€è¦ç™»å½•ä¿¡æ¯çš„é¡µé¢" class="sidebar-link">2ã€scrapy ç›´æ¥æºå¸¦ cookies è·å–éœ€è¦ç™»å½•ä¿¡æ¯çš„é¡µé¢</a></li><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_2ã€scrapy-request-å‘é€-post-è¯·æ±‚" class="sidebar-link">2ã€scrapy.Request å‘é€ post è¯·æ±‚</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/b576c8/#å…­ã€scrapy-ç®¡é“çš„ä½¿ç”¨" class="sidebar-link">å…­ã€scrapy ç®¡é“çš„ä½¿ç”¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_1ã€pipeline-ä¸­å¸¸ç”¨çš„æ–¹æ³•" class="sidebar-link">1ã€pipeline ä¸­å¸¸ç”¨çš„æ–¹æ³•</a></li><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_2ã€pipeline-åˆ¤æ–­æ•°æ®æ¥æº" class="sidebar-link">2ã€pipeline åˆ¤æ–­æ•°æ®æ¥æº</a></li><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_3ã€pipeline-ä½¿ç”¨æ³¨æ„ç‚¹" class="sidebar-link">3ã€pipeline ä½¿ç”¨æ³¨æ„ç‚¹</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/b576c8/#ä¸ƒã€scrapy-ä¸­é—´ä»¶" class="sidebar-link">ä¸ƒã€scrapy ä¸­é—´ä»¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_1ã€ä»‹ç»" class="sidebar-link">1ã€ä»‹ç»</a></li><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_2ã€ä½¿ç”¨æ–¹æ³•" class="sidebar-link">2ã€ä½¿ç”¨æ–¹æ³•</a></li><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_3ã€å®ç°éšæœº-user-agent-ä¸‹è½½ä¸­é—´ä»¶" class="sidebar-link">3ã€å®ç°éšæœº User-Agent ä¸‹è½½ä¸­é—´ä»¶</a></li><li class="sidebar-sub-header level3"><a href="/pages/b576c8/#_4ã€å®ç°-selenium-æ¸²æŸ“çš„ä¸‹è½½ä¸­é—´ä»¶" class="sidebar-link">4ã€å®ç° Selenium æ¸²æŸ“çš„ä¸‹è½½ä¸­é—´ä»¶</a></li></ul></li></ul></li></ul></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- æ­£æ–¹å½¢ -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/backend/#åç«¯" data-v-06225672>åç«¯</a></li><li data-v-06225672><a href="/backend/#Pythonçˆ¬è™«" data-v-06225672>Pythonçˆ¬è™«</a></li></ul> <div class="info" data-v-06225672><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/FullStackAction/" target="_blank" title="ä½œè€…" class="beLink" data-v-06225672>FullStackAction</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2021-07-13</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">ç›®å½•</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">Python - çˆ¬è™«ä¹‹Scrapy<!----></h1> <div class="page-slot page-slot-top"><!-- å›ºå®š100% * 90pxå¯æ˜¾ç¤ºï¼Œmax-height:90pxæœªè§æ˜¾ç¤º-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <center>æ¬¢è¿å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼š<a href="https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/FSA_QR_bottom.png">[FSAå…¨æ ˆè¡ŒåŠ¨ ğŸ‘‹]</a><center>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><h2 id="ä¸€ã€scrapy-æ¦‚å¿µå’Œæµç¨‹"><a href="#ä¸€ã€scrapy-æ¦‚å¿µå’Œæµç¨‹" class="header-anchor">#</a> ä¸€ã€scrapy æ¦‚å¿µå’Œæµç¨‹</h2> <h3 id="_1ã€æ¦‚å¿µ"><a href="#_1ã€æ¦‚å¿µ" class="header-anchor">#</a> 1ã€æ¦‚å¿µ</h3> <p>Scrapy æ˜¯ä¸€ä¸ª python ç¼–å†™çš„ï¼Œè¢«è®¾è®¡ç”¨äºçˆ¬å–ç½‘ç»œæ•°æ®ã€æå–ç»“æ„æ€§æ•°æ®çš„å¼€æºç½‘ç»œçˆ¬è™«æ¡†æ¶ã€‚</p> <ul><li>ä½œç”¨ï¼šå°‘é‡çš„ä»£ç ï¼Œå°±èƒ½å¤Ÿå¿«é€Ÿçš„æŠ“å–</li> <li>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://scrapy-chs.readthedocs.io/zh_CN/0.24/" target="_blank" rel="noopener noreferrer">https://scrapy-chs.readthedocs.io/zh_CN/0.24/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <blockquote><p>è¡¥å……ï¼šScrapy ä½¿ç”¨äº† Twisted å¼‚æ­¥ç½‘ç»œæ¡†æ¶ï¼Œå¯ä»¥åŠ å¿«ä¸‹è½½é€Ÿåº¦</p></blockquote> <h3 id="_2ã€å·¥ä½œæµç¨‹"><a href="#_2ã€å·¥ä½œæµç¨‹" class="header-anchor">#</a> 2ã€å·¥ä½œæµç¨‹</h3> <p><img src="https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20210320170901/image/20210704154838.jpg" alt="scrapyæµç¨‹å›¾"></p> <p>å…¶æµç¨‹æè¿°å¦‚ä¸‹ï¼š</p> <ol><li>çˆ¬è™«ä¸­èµ·å§‹çš„ url æ„é€ æˆ request å¯¹è±¡ --&gt; çˆ¬è™«ä¸­é—´ä»¶ --&gt; å¼•æ“ --&gt; è°ƒåº¦å™¨</li> <li>è°ƒåº¦å™¨æŠŠ request --&gt; å¼•æ“ --&gt; ä¸‹è½½ä¸­é—´ä»¶ --&gt; ä¸‹è½½å™¨</li> <li>ä¸‹è½½å™¨å‘é€è¯·æ±‚ï¼Œè·å– response å“åº” --&gt; ä¸‹è½½ä¸­é—´ä»¶ --&gt; å¼•æ“ --&gt; çˆ¬è™«ä¸­é—´ä»¶ --&gt; çˆ¬è™«</li> <li>çˆ¬è™«æå– url åœ°å€ï¼Œç»„è£…æˆ request å¯¹è±¡ --&gt; çˆ¬è™«ä¸­é—´ä»¶ --&gt; å¼•æ“ --&gt; è°ƒåº¦å™¨ï¼Œé‡å¤æ­¥éª¤ 2</li> <li>çˆ¬è™«æå–æ•°æ® --&gt; å¼•æ“ --&gt; ç®¡é“å¤„ç†å’Œä¿å­˜æ•°æ®</li></ol> <p>æ³¨æ„ï¼š</p> <ul><li>å›¾ä¸­ç»¿è‰²çº¿æ¡è¡¨ç¤ºæ•°æ®çš„ä¼ é€’</li> <li>å›¾ä¸­ä¸­é—´ä»¶çš„ä½ç½®å†³å®šäº†å…¶ä½œç”¨</li> <li>å¼•æ“å¤„äº 4 ä¸ªæ¨¡å—ä¸­é—´ï¼Œå„ä¸ªæ¨¡å—ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œåªå’Œå¼•æ“è¿›è¡Œäº¤äº’</li></ul> <h3 id="_3ã€å„æ¨¡å—çš„å…·ä½“ä½œç”¨"><a href="#_3ã€å„æ¨¡å—çš„å…·ä½“ä½œç”¨" class="header-anchor">#</a> 3ã€å„æ¨¡å—çš„å…·ä½“ä½œç”¨</h3> <table><thead><tr><th>æ¨¡å—</th> <th>ä½œç”¨</th> <th>æ˜¯å¦å®ç°</th></tr></thead> <tbody><tr><td>Scrapy Engine(å¼•æ“)</td> <td>æ€»æŒ‡æŒ¥ï¼šè´Ÿè´£æ•°æ®å’Œä¿¡å·åœ¨ä¸åŒæ¨¡å—ä¹‹é—´ä¼ é€’</td> <td>scrapy å·²ç»å®ç°</td></tr> <tr><td>Scheduler(è°ƒåº¦å™¨)</td> <td>ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå­˜æ”¾å¼•æ“å‘è¿‡æ¥çš„ request è¯·æ±‚</td> <td>scrapy å·²ç»å®ç°</td></tr> <tr><td>Downloader(ä¸‹è½½å™¨)</td> <td>ä¸‹è½½æŠŠå¼•æ“å‘è¿‡æ¥çš„ request è¯·æ±‚ï¼Œå¹¶è¿”å›ç»™å¼•æ“</td> <td>scrapy å·²ç»å®ç°</td></tr> <tr><td>Spider(çˆ¬è™«)</td> <td>å¤„ç†å¼•æ“å‘æ¥çš„ responseï¼Œæå–æ•°æ®ã€urlï¼Œå¹¶äº¤ç»™å¼•æ“</td> <td><strong><em>éœ€è¦æ‰‹å†™</em></strong></td></tr> <tr><td>Item Pipeline(ç®¡é“)</td> <td>å¤„ç†å¼•æ“ä¼ è¿‡æ¥çš„æ•°æ®ï¼Œæ¯”å¦‚å­˜å‚¨</td> <td><strong><em>éœ€è¦æ‰‹å†™</em></strong></td></tr> <tr><td>Downloader Middlewares(ä¸‹è½½ä¸­é—´ä»¶)</td> <td>å¯ä»¥è‡ªå®šä¹‰çš„ä¸‹è½½æ‰©å±•ï¼Œæ¯”å¦‚è®¾ç½®ä»£ç†</td> <td>ä¸€èˆ¬ä¸ç”¨æ‰‹å†™</td></tr> <tr><td>Spider Middlewares(çˆ¬è™«ä¸­é—´ä»¶)</td> <td>å¯ä»¥è‡ªå®šä¹‰ requests è¯·æ±‚å’Œè¿›è¡Œ response è¿‡æ»¤</td> <td>ä¸€èˆ¬ä¸ç”¨æ‰‹å†™</td></tr></tbody></table> <blockquote><p>æ³¨æ„ï¼šçˆ¬è™«ä¸­é—´ä»¶ å’Œ ä¸‹è½½ä¸­é—´ä»¶ åªæ˜¯è¿è¡Œé€»è¾‘çš„ä½ç½®ä¸åŒï¼Œä½œç”¨æ˜¯é‡å¤çš„ï¼šå¦‚æ›¿æ¢ UA ç­‰ã€‚</p></blockquote> <h2 id="äºŒã€scrapy-å…¥é—¨ä½¿ç”¨"><a href="#äºŒã€scrapy-å…¥é—¨ä½¿ç”¨" class="header-anchor">#</a> äºŒã€scrapy å…¥é—¨ä½¿ç”¨</h2> <h3 id="_1ã€å®‰è£…-scrapy"><a href="#_1ã€å®‰è£…-scrapy" class="header-anchor">#</a> 1ã€å®‰è£… scrapy</h3> <p>scrapy æœ‰ 2 ç§å®‰è£…æ–¹å¼ï¼š</p> <ul><li><p>å‘½ä»¤ï¼š</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> scrapy
</code></pre></div></li> <li><p>pipï¼š</p> <div class="language-shell extra-class"><pre class="language-shell"><code>pip/pip3 <span class="token function">install</span> scrapy
</code></pre></div></li></ul> <h3 id="_2ã€é¡¹ç›®å¼€å‘æµç¨‹"><a href="#_2ã€é¡¹ç›®å¼€å‘æµç¨‹" class="header-anchor">#</a> 2ã€é¡¹ç›®å¼€å‘æµç¨‹</h3> <ol><li><p>åˆ›å»ºé¡¹ç›®ï¼š</p> <div class="language-shell extra-class"><pre class="language-shell"><code>scrapy startproject <span class="token operator">&lt;</span>é¡¹ç›®åç§°<span class="token operator">&gt;</span>

eg:
	scrapy startproject myspider
</code></pre></div></li> <li><p>ç”Ÿæˆä¸€ä¸ªçˆ¬è™«ï¼š</p> <div class="language-shell extra-class"><pre class="language-shell"><code>scrapy genspider <span class="token operator">&lt;</span>çˆ¬è™«åå­—<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>å…è®¸çˆ¬å–çš„åŸŸå<span class="token operator">&gt;</span>

eg:
	<span class="token builtin class-name">cd</span> myspider
	scrapy genspider example example.com
</code></pre></div><ul><li><p>çˆ¬è™«åå­—ï¼šä½œç”¨çˆ¬è™«è¿è¡Œæ—¶çš„å‚æ•°</p></li> <li><p>å…è®¸çˆ¬å–çš„åŸŸåï¼šä¸ºå¯¹äºçˆ¬è™«è®¾ç½®çš„çˆ¬å–èŒƒå›´ï¼Œè®¾ç½®ä¹‹åç”¨äºè¿‡æ»¤è¦çˆ¬å–çš„ urlï¼Œå¦‚æœçˆ¬å–çš„ url ä¸å…è®¸çš„åŸŸä¸åŒåˆ™è¢«è¿‡æ»¤æ‰</p> <blockquote><p>æ³¨æ„ï¼šæ‰§è¡Œå®Œå‘½ä»¤åï¼Œmyspider/spiders ç›®å½•ä¸‹ï¼Œä¼šå¤šå‡ºä¸€ä¸ª example.py çˆ¬è™«æ–‡ä»¶</p></blockquote></li></ul></li> <li><p>æå–æ•°æ®ï¼š</p> <p>æ ¹æ®ç½‘ç«™ç»“æ„åœ¨ spider ä¸­å®ç°æ•°æ®é‡‡é›†ç›¸å…³å†…å®¹</p></li> <li><p>ä¿å­˜æ•°æ®ï¼š</p> <p>ä½¿ç”¨ pipeline è¿›è¡Œæ•°æ®åç»­å¤„ç†å’Œä¿å­˜</p></li> <li><p>è¿è¡Œ scrapy</p> <div class="language-shell extra-class"><pre class="language-shell"><code>scrapy crawl <span class="token operator">&lt;</span>çˆ¬è™«åå­—<span class="token operator">&gt;</span>
scrapy crawl <span class="token operator">&lt;</span>çˆ¬è™«åå­—<span class="token operator">&gt;</span> <span class="token parameter variable">--nolog</span>

eg:
	scrapy crawl example
</code></pre></div><blockquote><p>æ³¨æ„ ï¼šéœ€è¦åœ¨é¡¹ç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤ï¼›<code>--nolog</code> å¯ä»¥å…³é—­æ¡†æ¶æ—¥å¿—ä¿¡æ¯è¾“å‡º</p></blockquote></li></ol> <h3 id="_3ã€ä¸‰ä¸ªå†…ç½®å¯¹è±¡"><a href="#_3ã€ä¸‰ä¸ªå†…ç½®å¯¹è±¡" class="header-anchor">#</a> 3ã€ä¸‰ä¸ªå†…ç½®å¯¹è±¡</h3> <ul><li>request è¯·æ±‚å¯¹è±¡ï¼šç”± url method post_data headers ç­‰æ„æˆ</li> <li>response å“åº”å¯¹è±¡ï¼šç”± url body status headers ç­‰æ„æˆ</li> <li>item æ•°æ®å¯¹è±¡ï¼šæœ¬è´¨æ˜¯å­—å…¸</li></ul> <h3 id="_1-å®šä½å…ƒç´ ä»¥åŠæå–æ•°æ®"><a href="#_1-å®šä½å…ƒç´ ä»¥åŠæå–æ•°æ®" class="header-anchor">#</a> 1ï¼‰å®šä½å…ƒç´ ä»¥åŠæå–æ•°æ®</h3> <p>è§£æå¹¶è·å– scrapy çˆ¬è™«ä¸­çš„æ•°æ®ï¼šåˆ©ç”¨ xpath è§„åˆ™å­—ç¬¦ä¸²è¿›è¡Œå®šä½å’Œæå–</p> <ul><li><code>response.xpath()</code>ï¼šè¿”å›ä¸€ä¸ªç±»ä¼¼ List çš„ç±»å‹ï¼Œå…¶ä¸­åŒ…å«çš„æ˜¯ selector å¯¹è±¡ï¼Œæ“ä½œå’Œåˆ—è¡¨ä¸€æ ·ï¼Œä½†æ˜¯æœ‰ä¸€äº›é¢å¤–æ–¹æ³•ï¼š
<ul><li><code>extract()</code>ï¼šè¿”å›ä¸€ä¸ªåŒ…å«æœ‰å­—ç¬¦ä¸²çš„åˆ—è¡¨</li> <li><code>extract_first()</code>ï¼šè¿”å›åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ—è¡¨ä¸ºç©ºåˆ™è¿”å› None</li></ul></li></ul> <h3 id="_2-response-å“åº”å¯¹è±¡çš„å¸¸ç”¨å±æ€§"><a href="#_2-response-å“åº”å¯¹è±¡çš„å¸¸ç”¨å±æ€§" class="header-anchor">#</a> 2ï¼‰response å“åº”å¯¹è±¡çš„å¸¸ç”¨å±æ€§</h3> <ul><li><code>response.url</code>ï¼šå½“å‰å“åº”çš„ url åœ°å€</li> <li><code>response.request.url</code>ï¼šå½“å‰å“åº”å¯¹åº”çš„è¯·æ±‚çš„ url åœ°å€</li> <li><code>response.headers</code>ï¼šå“åº”å¤´</li> <li><code>response.request.headers</code>ï¼šå½“å‰å“åº”çš„è¯·æ±‚å¤´</li> <li><code>response.body</code>ï¼šå“åº”ä½“ï¼Œä¹Ÿå°±æ˜¯ html ä»£ç ï¼Œbyte ç±»å‹</li> <li><code>response.status</code>ï¼šå“åº”çŠ¶æ€ç </li></ul> <h3 id="_4ã€å…¥é—¨å®æˆ˜"><a href="#_4ã€å…¥é—¨å®æˆ˜" class="header-anchor">#</a> 4ã€å…¥é—¨å®æˆ˜</h3> <h4 id="_1-åˆ›å»ºé¡¹ç›®-çˆ¬è™«"><a href="#_1-åˆ›å»ºé¡¹ç›®-çˆ¬è™«" class="header-anchor">#</a> 1ï¼‰åˆ›å»ºé¡¹ç›®&amp;çˆ¬è™«</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>scrapy startproject myspider
<span class="token builtin class-name">cd</span> myspider
scrapy genspider itcast itcast.cn
</code></pre></div><h4 id="_2-å®Œå–„çˆ¬è™«-æŠ“å–æ•°æ®"><a href="#_2-å®Œå–„çˆ¬è™«-æŠ“å–æ•°æ®" class="header-anchor">#</a> 2ï¼‰å®Œå–„çˆ¬è™«ï¼ˆæŠ“å–æ•°æ®ï¼‰</h4> <p>åœ¨/myspider/myspider/spiders/itcast.py ä¸­ä¿®æ”¹å†…å®¹å¦‚ä¸‹ï¼š</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> scrapy

<span class="token keyword">class</span> <span class="token class-name">ItcastSpider</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">'itcast'</span>
    <span class="token comment"># 2.æ£€æŸ¥åŸŸå</span>
    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'itcast.cn'</span><span class="token punctuation">]</span>
    <span class="token comment"># 1.ä¿®æ”¹èµ·å§‹url</span>
    start_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'http://itcast.cn/channel/teacher.shtml'</span><span class="token punctuation">]</span>  <span class="token comment"># è®¾ç½®èµ·å§‹çš„urlï¼Œæˆ‘ä»¬åªéœ€è¦è®¾ç½®å°±å¥½ï¼Œé€šå¸¸ä¼šè¢«è‡ªåŠ¨çš„åˆ›å»ºæˆè¯·æ±‚å‘é€</span>

    <span class="token comment"># 3.åœ¨parseæ–¹æ³•ä¸­å®ç°çˆ¬å–é€»è¾‘</span>
    <span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># è§£ææ–¹æ³•ï¼Œé€šå¸¸ç”¨äºèµ·å§‹urlå¯¹åº”å“åº”çš„è§£æ</span>
        <span class="token comment"># å®šä¹‰å¯¹äºç½‘ç«™çš„ç›¸å…³æ“ä½œ</span>
        <span class="token comment"># with open('itcast.html', 'wb') as f:</span>
        <span class="token comment">#     f.write(response.body)</span>

        <span class="token comment"># è·å–æ‰€æœ‰è€å¸ˆèŠ‚ç‚¹</span>
        node_list <span class="token operator">=</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//div[@class=&quot;li_txt&quot;]'</span><span class="token punctuation">)</span>

        <span class="token comment"># éå†è€å¸ˆèŠ‚ç‚¹åˆ—è¡¨</span>
        <span class="token keyword">for</span> node <span class="token keyword">in</span> node_list<span class="token punctuation">:</span>
            temp <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

            <span class="token comment"># xpathæ–¹æ³•è¿”å›çš„æ˜¯é€‰æ‹©å™¨å¯¹è±¡åˆ—è¡¨ï¼Œextract()ç”¨äºä»é€‰æ‹©å™¨å¯¹è±¡ä¸­æå–æ•°æ®</span>
            <span class="token comment"># temp['name'] = node.xpath('./h3/text()')[0].extract()</span>
            <span class="token comment"># temp['title'] = node.xpath('./h4/text()')[0].extract()</span>
            <span class="token comment"># temp['desc'] = node.xpath('./p/text()')[0].extract()</span>

            <span class="token comment"># xpathç»“æœä¸ºåªå«æœ‰ä¸€ä¸ªå€¼çš„åˆ—è¡¨ï¼Œå¯ä»¥ä½¿ç”¨extract_first()ï¼Œå¦‚æœä¸ºå¤šä¸ªå€¼åˆ™ä½¿ç”¨extract()</span>
            temp<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./h3/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>
            temp<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./h4/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>
            temp<span class="token punctuation">[</span><span class="token string">'desc'</span><span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./p/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>

            <span class="token comment"># {'name': [&lt;Selector xpath='./h3/text()' data='é»„è€å¸ˆ'&gt;], 'title': [&lt;Selector xpath='./h4/text()' data='é«˜çº§è®²å¸ˆ'&gt;], 'desc': [&lt;Selector xpath='./p/text()' data='15å¹´+çš„è½¯ä»¶å¼€å‘ä¸æ•™å­¦ç»éªŒï¼Œå‚ä¸ä¸­å›½è”é€šVOPç³»ç»Ÿï¼Œä¸­å›½è”é€šåœ¨çº¿è®¡è´¹ç³»ç»Ÿ...'&gt;]}</span>
            <span class="token comment"># extract()ä¹‹åï¼š</span>
            <span class="token comment"># {'name': 'é»„è€å¸ˆ', 'title': 'é«˜çº§è®²å¸ˆ', 'desc': '15å¹´+çš„è½¯ä»¶å¼€å‘ä¸æ•™å­¦ç»éªŒï¼Œå‚ä¸ä¸­å›½è”é€šVOPç³»ç»Ÿï¼Œä¸­å›½è”é€šåœ¨çº¿è®¡è´¹ç³»ç»Ÿï¼Œé“è·¯äº¤é€šäº‹æ•…æ•‘åŠ©åŸºé‡‘ç®¡ç†ç³»ç»Ÿç­‰çš„å¼€å‘å·¥ä½œï¼›\r\næ‹¥æœ‰ä¸°å¯Œçš„æ•™å­¦ç»éªŒã€‚'}</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span>

            <span class="token keyword">yield</span> temp
</code></pre></div><p>æ³¨æ„ï¼š</p> <ul><li><code>scrapy.Spider</code>çˆ¬è™«ç±»ä¸­å¿…é¡»æœ‰åä¸º parse çš„è§£æ</li> <li>å¦‚æœç½‘ç«™ç»“æ„å±‚æ¬¡æ¯”è¾ƒå¤æ‚ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰å…¶ä»–è§£æå‡½æ•°</li> <li>åœ¨è§£æå‡½æ•°ä¸­æå–çš„ url åœ°å€å¦‚æœè¦å‘é€è¯·æ±‚ï¼Œåˆ™å¿…é¡»å±äº <code>allowed_domains</code> èŒƒå›´å†…ï¼Œä½†æ˜¯ <code>start_urls</code> ä¸­çš„ url åœ°å€ä¸å—è¿™ä¸ªé™åˆ¶</li> <li><code>parse()</code> å‡½æ•°ä¸­ä½¿ç”¨ <code>yield</code> è¿”å›æ•°å€¼ã€‚</li> <li><strong>yield èƒ½å¤Ÿä¼ é€’çš„å¯¹è±¡åªèƒ½æ˜¯ï¼šBaseItemï¼ŒRequestï¼Œdictï¼ŒNone</strong></li></ul> <h4 id="_3-å®Œå–„ç®¡é“-ä¿å­˜æ•°æ®"><a href="#_3-å®Œå–„ç®¡é“-ä¿å­˜æ•°æ®" class="header-anchor">#</a> 3ï¼‰å®Œå–„ç®¡é“ï¼ˆä¿å­˜æ•°æ®ï¼‰</h4> <ol><li>å®šä¹‰ä¸€ä¸ªç®¡é“ç±»</li> <li>é‡å†™ç®¡é“ç±»çš„ <code>process_item()</code> æ–¹æ³•</li> <li><code>process_item()</code> æ–¹æ³•å¤„ç†å®Œ item ä¹‹åå¿…é¡»è¿”å›ç»™å¼•æ“</li></ol> <p>è¿™é‡Œç›´æ¥ä½¿ç”¨åˆ›å»ºé¡¹ç›®æ—¶é»˜è®¤åˆ›å»ºå¥½çš„ç®¡é“ç±»ï¼š/myspider/myspider/pipelines/MyspiderPipelineï¼Œä¿®æ”¹å†…å®¹å¦‚ä¸‹ï¼š</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> json


<span class="token keyword">class</span> <span class="token class-name">MyspiderPipeline</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span><span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'itcast.json'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">process_item</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> item<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># print('item:', item)</span>
        <span class="token comment"># å°†å­—å…¸æ•°æ®åºåˆ—åŒ–</span>
        json_data <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>item<span class="token punctuation">,</span> ensure_ascii<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">',\n'</span>

        <span class="token comment"># å°†æ•°æ®å†™å…¥æ–‡ä»¶</span>
        self<span class="token punctuation">.</span><span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>json_data<span class="token punctuation">)</span>

        <span class="token comment"># é»˜è®¤ä½¿ç”¨å®Œç®¡é“ä¹‹åéœ€è¦å°†æ•°æ®è¿”å›ç»™å¼•æ“</span>
        <span class="token keyword">return</span> item

    <span class="token keyword">def</span> <span class="token function">__del__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span><span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_4-å¯ç”¨ç®¡é“"><a href="#_4-å¯ç”¨ç®¡é“" class="header-anchor">#</a> 4ï¼‰å¯ç”¨ç®¡é“</h4> <div class="language-python extra-class"><pre class="language-python"><code>ITEM_PIPELINES <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token string">'myspider.pipelines.MyspiderPipeline'</span><span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
   <span class="token comment"># 'myspider.pipelines.MyspiderPipelineOther': 301,</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>é…ç½®é¡¹ä¸­ï¼Œé”®ä¸ºä½¿ç”¨çš„ç®¡é“ç±»ï¼Œç®¡é“ç±»å¼•ç”¨å£°æ˜ä½¿ç”¨<code>.</code>è¿›è¡Œåˆ†å‰²ï¼Œåˆ†åˆ«ä¸ºï¼š<code>é¡¹ç›®ç›®å½•.æ–‡ä»¶.ç®¡ç†ç±»</code>ã€‚</li> <li>é…ç½®é¡¹ä¸­ï¼Œå€¼ä¸ºç®¡é“çš„ä½¿ç”¨é¡ºåºï¼Œè®¾ç½®çš„æ•°å€¼è¶Šå°è¶Šå…ˆæ‰§è¡Œï¼Œè¯¥å€¼ä¸€èˆ¬è®¾ç½®åœ¨ 1000 ä»¥å†…ã€‚</li></ul> <h4 id="_5-è¿è¡Œçˆ¬è™«"><a href="#_5-è¿è¡Œçˆ¬è™«" class="header-anchor">#</a> 5ï¼‰è¿è¡Œçˆ¬è™«</h4> <p>åœ¨æ§åˆ¶å°è¿è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯è¿è¡Œçˆ¬è™«ï¼š</p> <div class="language-shell extra-class"><pre class="language-shell"><code>scrapy crawl itcast
scrapy crawl itcast <span class="token parameter variable">--nolog</span>
</code></pre></div><h2 id="ä¸‰ã€scrapy-æ•°æ®å»ºæ¨¡-items"><a href="#ä¸‰ã€scrapy-æ•°æ®å»ºæ¨¡-items" class="header-anchor">#</a> ä¸‰ã€scrapy æ•°æ®å»ºæ¨¡(items)</h2> <h3 id="_1ã€æ•°æ®å»ºæ¨¡"><a href="#_1ã€æ•°æ®å»ºæ¨¡" class="header-anchor">#</a> 1ã€æ•°æ®å»ºæ¨¡</h3> <p>é€šå¸¸åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œéœ€è¦åœ¨ <code>items.py</code> ä¸­è¿›è¡Œæ•°æ®å»ºæ¨¡</p> <h4 id="_1-ä¸ºä»€ä¹ˆè¦å»ºæ¨¡"><a href="#_1-ä¸ºä»€ä¹ˆè¦å»ºæ¨¡" class="header-anchor">#</a> 1ï¼‰ä¸ºä»€ä¹ˆè¦å»ºæ¨¡</h4> <ul><li>å®šä¹‰ item å³æå‰è§„åˆ’å¥½å“ªäº›å­—æ®µéœ€è¦æŠ“å–ï¼Œé˜²æ­¢æ‰‹è¯¯ï¼Œå› ä¸ºå®šä¹‰å¥½ä¹‹åï¼Œåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æŸ¥</li> <li>é…ç½®æ³¨é‡Šä¸€èµ·å¯ä»¥æ¸…æ™°çš„çŸ¥é“è¦æŠ“å–å“ªäº›å­—æ®µï¼Œæ²¡æœ‰å®šä¹‰çš„å­—æ®µä¸èƒ½æŠ“å–ï¼Œåœ¨ç›®æ ‡å­—æ®µå°‘çš„æ—¶å€™å¯ä»¥ä½¿ç”¨å­—å…¸ä»£æ›¿</li> <li>ä½¿ç”¨ scrapy çš„ä¸€äº›ç‰¹å®šç»„ä»¶ä¸­éœ€è¦ Item åšæ”¯æŒï¼Œå¦‚ scrapy çš„ ImagesPipeline ç®¡é“ç±»ã€‚</li></ul> <h4 id="_2-å¦‚ä½•å»ºæ¨¡"><a href="#_2-å¦‚ä½•å»ºæ¨¡" class="header-anchor">#</a> 2ï¼‰å¦‚ä½•å»ºæ¨¡</h4> <p>åœ¨ <code>items.py</code> æ–‡ä»¶ä¸­å®šä¹‰å‘æå–çš„å­—æ®µï¼š</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> scrapy

<span class="token keyword">class</span> <span class="token class-name">MyspiderItem</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Item<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># define the fields for your item here like:</span>
    name <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># è®²å¸ˆçš„åå­—</span>
    title <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># è®²å¸ˆçš„èŒç§°</span>
    desc <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># è®²å¸ˆçš„ä»‹ç»</span>

<span class="token comment"># if __name__ == '__main__':</span>
<span class="token comment">#     item = MyspiderItem()</span>
<span class="token comment">#     item['name'] = 'lqr'  # ok</span>
<span class="token comment">#     item['nama'] = 'lqr'  # KeyError: 'MyspiderItem does not support field: nama'</span>
</code></pre></div><blockquote><p>æ³¨æ„ï¼š<code>scrapy.Item</code> å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ›´é«˜çº§çš„ <strong>â€œå­—å…¸â€</strong>ï¼Œå¯ä»¥å¯¹é”®åè¿›è¡Œé™åˆ¶ã€æ ¡éªŒã€‚ä½†åˆ‡è®°å®ƒä¸æ˜¯å­—å…¸ï¼Œå¦‚æœä½ éœ€è¦å¯¹å­—å…¸è¿›è¡Œæ“ä½œï¼Œå¯ä»¥ä½¿ç”¨ <code>dict()</code> å°†<code>scrapy.Item</code> è¿›è¡Œå¼ºåˆ¶è½¬æ¢ã€‚</p></blockquote> <h4 id="_3-ä½¿ç”¨æ¨¡æ¿ç±»"><a href="#_3-ä½¿ç”¨æ¨¡æ¿ç±»" class="header-anchor">#</a> 3ï¼‰ä½¿ç”¨æ¨¡æ¿ç±»</h4> <p>æ¨¡æ¿ç±»å®šä¹‰ä»¥åï¼Œéœ€è¦åœ¨çˆ¬è™«ä¸­å¯¼å…¥å¹¶ä¸”å®ä¾‹åŒ–ï¼Œä¹‹åçš„ä½¿ç”¨æ–¹æ³•å’Œå­—å…¸ç›¸åŒï¼š</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># å¦‚æœæŠ¥åŒ…æŠ¥é”™æœ‰2ç§è§£å†³åŠæ³•ï¼š</span>
<span class="token comment"># 1ã€PyCharmä»¥myspiderä¸ºæ ¹ç›®å½•é‡æ–°æ‰“å¼€é¡¹ç›®</span>
<span class="token comment"># 2ã€ä¸ä»¥myspiderä¸ºæ ¹ç›®å½•çš„è¯ï¼Œå¯ä»¥å³é”®myspider--&gt;Make Directory as--&gt;Sources Root</span>
<span class="token keyword">from</span> myspider<span class="token punctuation">.</span>items <span class="token keyword">import</span> MyspiderItem

    <span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        item <span class="token operator">=</span> MyspiderItem<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        item<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./h3/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>
        item<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./h4/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>
        item<span class="token punctuation">[</span><span class="token string">'desc'</span><span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./p/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token keyword">yield</span> item
</code></pre></div><h4 id="_4-å¼€å‘æµç¨‹æ€»ç»“"><a href="#_4-å¼€å‘æµç¨‹æ€»ç»“" class="header-anchor">#</a> 4ï¼‰å¼€å‘æµç¨‹æ€»ç»“</h4> <ol><li><p>åˆ›å»ºé¡¹ç›®</p> <div class="language-shell extra-class"><pre class="language-shell"><code>scrapy startproject é¡¹ç›®å
</code></pre></div></li> <li><p>æ˜ç¡®ç›®æ ‡</p> <ul><li>åœ¨ items.py æ–‡ä»¶ä¸­è¿›è¡Œå»ºæ¨¡</li></ul></li> <li><p>åˆ›å»ºçˆ¬è™«</p> <ul><li><p>åˆ›å»ºçˆ¬è™«</p> <div class="language-shell extra-class"><pre class="language-shell"><code>scrapy genspider çˆ¬è™«å å…è®¸çš„åŸŸ
</code></pre></div></li> <li><p>ç¼–å†™çˆ¬è™«</p> <div class="language-shell extra-class"><pre class="language-shell"><code>ä¿®æ”¹start_urls
æ£€æŸ¥ä¿®æ”¹allowed_domains
ç¼–å†™è§£ææ–¹æ³•
</code></pre></div></li></ul></li> <li><p>ä¿å­˜æ•°æ®</p> <ul><li>åœ¨ <code>pipelines.py</code> æ–‡ä»¶ä¸­å®šä¹‰å¯¹æ•°æ®å¤„ç†çš„ç®¡é“</li> <li>åœ¨ <code>settings.py</code> æ–‡ä»¶ä¸­æ³¨å†Œå¯ç”¨ç®¡é“</li></ul></li></ol> <h2 id="å››ã€scrapy-å¤„ç†ç¿»é¡µ-request"><a href="#å››ã€scrapy-å¤„ç†ç¿»é¡µ-request" class="header-anchor">#</a> å››ã€scrapy å¤„ç†ç¿»é¡µ(Request)</h2> <h3 id="_1ã€æ€è·¯"><a href="#_1ã€æ€è·¯" class="header-anchor">#</a> 1ã€æ€è·¯</h3> <ol><li>æ‰¾åˆ°ä¸‹ä¸€é¡µçš„ url åœ°å€</li> <li>æ„é€  url åœ°å€çš„è¯·æ±‚å¯¹è±¡ï¼Œä¼ é€’ç»™å¼•æ“</li></ol> <h3 id="_2ã€å®ç°æ­¥éª¤"><a href="#_2ã€å®ç°æ­¥éª¤" class="header-anchor">#</a> 2ã€å®ç°æ­¥éª¤</h3> <ol><li><p>ç¡®å®š url åœ°å€</p></li> <li><p>æ„é€ è¯·æ±‚</p> <div class="language-python extra-class"><pre class="language-python"><code>scrapy<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
</code></pre></div><ul><li><code>callback</code>ï¼šæŒ‡å®šè§£æå‡½æ•°åç§°ï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚è¿”å›çš„å“åº”ä½¿ç”¨å“ªä¸€ä¸ªå‡½æ•°è¿›è¡Œè§£æ</li></ul></li> <li><p>æŠŠè¯·æ±‚äº¤ç»™å¼•æ“</p></li></ol> <h3 id="_3ã€å®æˆ˜-ç½‘æ˜“æ‹›è˜çˆ¬è™«"><a href="#_3ã€å®æˆ˜-ç½‘æ˜“æ‹›è˜çˆ¬è™«" class="header-anchor">#</a> 3ã€å®æˆ˜ï¼ˆç½‘æ˜“æ‹›è˜çˆ¬è™«ï¼‰</h3> <h4 id="_1-æ€è·¯åˆ†æ"><a href="#_1-æ€è·¯åˆ†æ" class="header-anchor">#</a> 1ï¼‰æ€è·¯åˆ†æ</h4> <ol><li>è·å–é¦–é¡µæ•°æ®</li> <li>å¯»æ‰¾ä¸‹ä¸€é¡µåœ°å€ï¼Œè¿›è¡Œç¿»é¡µï¼Œè·å–æ•°æ®</li></ol> <h4 id="_2-ä»£ç å®ç°"><a href="#_2-ä»£ç å®ç°" class="header-anchor">#</a> 2ï¼‰ä»£ç å®ç°</h4> <ul><li>åˆ›å»ºé¡¹ç›®</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>scrapy startproject wangyi

<span class="token builtin class-name">cd</span> wangyi
scrapy gespider job <span class="token number">163</span>.com
</code></pre></div><ul><li>å®šä¹‰æ¨¡æ¿ç±»</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> scrapy


<span class="token keyword">class</span> <span class="token class-name">WangyiItem</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Item<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># define the fields for your item here like:</span>
    name <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span>
    link <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span>
    depart <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span>
    category <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token builtin">type</span> <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span>
    address <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span>
    num <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span>
    date <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>ç¼–å†™çˆ¬è™«ï¼ˆæŠ“å–æ•°æ®ï¼‰</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> scrapy
<span class="token keyword">from</span> wangyi<span class="token punctuation">.</span>items <span class="token keyword">import</span> WangyiItem


<span class="token keyword">class</span> <span class="token class-name">JobSpider</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">'job'</span>
    <span class="token comment"># 2.æ£€æŸ¥ä¿®æ”¹allowed_domains</span>
    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'163.com'</span><span class="token punctuation">]</span>
    <span class="token comment"># 1.ä¿®æ”¹start_urls</span>
    start_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'https://hr.163.com/position/list.do'</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># æå–æ•°æ®</span>
        <span class="token comment"># è·å–æ‰€æœ‰èŒä½èŠ‚ç‚¹åˆ—è¡¨</span>
        node_list <span class="token operator">=</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//*[@class=&quot;position-tb&quot;]/tbody/tr'</span><span class="token punctuation">)</span>

        <span class="token comment"># éå†èŠ‚ç‚¹åˆ—è¡¨</span>
        <span class="token keyword">for</span> num<span class="token punctuation">,</span> node <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>node_list<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment"># è®¾ç½®è¿‡æ»¤æ¡ä»¶ï¼Œå°†ç›®æ ‡èŠ‚ç‚¹è·å–å‡ºæ¥</span>
            <span class="token keyword">if</span> num <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                item <span class="token operator">=</span> WangyiItem<span class="token punctuation">(</span><span class="token punctuation">)</span>
                item<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./td[1]/a/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment"># item['link'] = 'https://hr.163.com' + node.xpath('./td[1]/a/@href').extract_first()</span>
                <span class="token comment"># response.urljoin()ç”¨äºæ‹¼æ¥ç›¸å¯¹è·¯å¾„çš„urlï¼Œå¯ä»¥ç†è§£ä¸ºè‡ªåŠ¨è¡¥å…¨</span>
                item<span class="token punctuation">[</span><span class="token string">'link'</span><span class="token punctuation">]</span> <span class="token operator">=</span> response<span class="token punctuation">.</span>urljoin<span class="token punctuation">(</span>node<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./td[1]/a/@href'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                item<span class="token punctuation">[</span><span class="token string">'depart'</span><span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./td[2]/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>
                item<span class="token punctuation">[</span><span class="token string">'category'</span><span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./td[3]/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>
                item<span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./td[4]/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>
                item<span class="token punctuation">[</span><span class="token string">'address'</span><span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./td[5]/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>
                item<span class="token punctuation">[</span><span class="token string">'num'</span><span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./td[6]/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
                item<span class="token punctuation">[</span><span class="token string">'date'</span><span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'./td[7]/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment"># print(item)</span>
                <span class="token keyword">yield</span> item

        <span class="token comment"># æ¨¡æ‹Ÿç¿»é¡µ</span>
        part_url <span class="token operator">=</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'/html/body/div[2]/div[2]/div[2]/div/a[last()]/@href'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># åˆ¤æ–­ç»ˆæ­¢æ¡ä»¶</span>
        <span class="token keyword">if</span> part_url <span class="token operator">!=</span> <span class="token string">'javascript:void(0)'</span><span class="token punctuation">:</span>
            next_url <span class="token operator">=</span> response<span class="token punctuation">.</span>urljoin<span class="token punctuation">(</span>part_url<span class="token punctuation">)</span>
            <span class="token comment"># æ„å»ºè¯·æ±‚å¯¹è±¡ï¼Œå¹¶ä¸”è¿”å›ç»™å¼•æ“</span>
            <span class="token keyword">yield</span> scrapy<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>
                url<span class="token operator">=</span>next_url<span class="token punctuation">,</span>
                callback<span class="token operator">=</span>self<span class="token punctuation">.</span>parse
            <span class="token punctuation">)</span>
</code></pre></div><blockquote><p>æ³¨æ„ï¼šå¼•æ“æ ¹æ®çˆ¬è™« <code>yield</code> çš„å¯¹è±¡ç±»å‹ï¼Œå°†å¯¹è±¡åˆ†é…ç»™å¯¹åº”çš„æ¨¡å—å¤„ç†ï¼Œæ¯”å¦‚ï¼šå¦‚æœæ˜¯æ¨¡æ¿ç±»å¯¹è±¡æˆ–å­—å…¸ï¼Œåˆ™ä¼šäº¤ç»™ç®¡é“(Item Pipeline)ï¼›å¦‚æœæ˜¯ Request å¯¹è±¡ï¼Œåˆ™ä¼šäº¤ç»™é˜Ÿåˆ—(Scheduler)ã€‚</p></blockquote> <ul><li>ç¼–å†™ç®¡é“ï¼ˆå­˜å‚¨æ•°æ®ï¼‰</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> json


<span class="token keyword">class</span> <span class="token class-name">WangyiPipeline</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span><span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'wangyi.json'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">process_item</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> item<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
        item <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>

        str_data <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>item<span class="token punctuation">,</span> ensure_ascii<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">',\n'</span>

        self<span class="token punctuation">.</span><span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>str_data<span class="token punctuation">)</span>

        <span class="token keyword">return</span> item

    <span class="token keyword">def</span> <span class="token function">__del__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span><span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>å¯ç”¨ç®¡é“</li></ul> <div class="language-python extra-class"><pre class="language-python"><code>ITEM_PIPELINES <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'wangyi.pipelines.WangyiPipeline'</span><span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>è¿è¡Œçˆ¬è™«</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>scrapy crawl job <span class="token parameter variable">--nolog</span>
</code></pre></div><h4 id="_3-æ‰©å±•"><a href="#_3-æ‰©å±•" class="header-anchor">#</a> 3ï¼‰æ‰©å±•ï¼š</h4> <ul><li><p>å¯ä»¥åœ¨ settings ä¸­è®¾ç½® ROBOTS åè®®</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># Falseè¡¨ç¤ºå¿½ç•¥ç½‘ç«™çš„robots.txtåè®®ï¼Œé»˜è®¤ä¸ºTrue</span>
ROBOTSTXT_OBEY <span class="token operator">=</span> <span class="token boolean">False</span>
</code></pre></div></li> <li><p>å¯ä»¥åœ¨ settings ä¸­è®¾ç½® User-Agentï¼š</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># scrapyå‘é€çš„æ¯ä¸€ä¸ªè¯·æ±‚çš„é»˜è®¤UAéƒ½æ˜¯è®¾ç½®çš„è¿™ä¸ªUser-Agent</span>
USER_AGENT <span class="token operator">=</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.82 Safari/537.36'</span>
</code></pre></div></li></ul> <h3 id="_4ã€scrapy-request-çš„æ›´å¤šå‚æ•°"><a href="#_4ã€scrapy-request-çš„æ›´å¤šå‚æ•°" class="header-anchor">#</a> 4ã€scrapy.Request çš„æ›´å¤šå‚æ•°</h3> <div class="language-python extra-class"><pre class="language-python"><code>scrapy<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token punctuation">[</span><span class="token punctuation">,</span> callback<span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> headers<span class="token punctuation">,</span> body<span class="token punctuation">,</span> cookies<span class="token punctuation">,</span> meta<span class="token punctuation">,</span> dont_filter<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>æ³¨æ„ï¼šä¸­æ‹¬å·[]é‡Œçš„å‚æ•°ä¸ºå¯é€‰å‚æ•°</p></blockquote> <p>å‚æ•°è§£é‡Šï¼š</p> <ul><li><strong>callback</strong>ï¼šè¡¨ç¤ºå½“å‰ url çš„å“åº”äº¤ç»™å“ªä¸ªå‡½æ•°å»å¤„ç†</li> <li><strong>meta</strong>ï¼šå®ç°æ•°æ®åœ¨ä¸åŒçš„è§£æå‡½æ•°ä¸­ä¼ é€’ï¼Œmeta é»˜è®¤å¸¦æœ‰éƒ¨åˆ†æ•°æ®ï¼Œæ¯”å¦‚ä¸‹è½½å»¶è¿Ÿï¼Œè¯·æ±‚æ·±åº¦ç­‰</li> <li>dont_filterï¼šé»˜è®¤ä¸º Falseï¼Œä¼šè¿‡æ»¤è¯·æ±‚çš„ url åœ°å€ï¼Œå³è¯·æ±‚è¿‡çš„ url åœ°å€ä¸ä¼šç»§ç»­è¢«è¯·æ±‚ï¼Œå¯¹éœ€è¦é‡å¤è¯·æ±‚çš„ url åœ°å€å¯ä»¥æŠŠå®ƒè®¾ç½®ä¸º Trueï¼Œæ¯”å¦‚è´´å§çš„ç¿»é¡µè¯·æ±‚ï¼Œé¡µé¢çš„æ•°æ®æ€»æ˜¯åœ¨å˜åŒ–ï¼Œstart_urls ä¸­çš„åœ°å€ä¼šè¢«åå¤è¯·æ±‚ï¼Œå¦åˆ™ç¨‹åºä¸ä¼šå¯åŠ¨</li> <li>methodï¼šæŒ‡å®š POST æˆ– GET è¯·æ±‚</li> <li>headersï¼šæ¥æ”¶ä¸€ä¸ªå­—å…¸ï¼Œå…¶ä¸­ä¸åŒ…æ‹¬ cookies</li> <li>cookiesï¼šæ¥æ”¶ä¸€ä¸ªå­—å…¸ï¼Œä¸“é—¨æ”¾ç½® cookies</li> <li>bodyï¼šæ¥æ”¶ json å­—ç¬¦ä¸²ï¼Œä¸º POST çš„æ•°æ®ï¼Œå‘é€ payload_post è¯·æ±‚æ—¶ä½¿ç”¨</li></ul> <h4 id="_1-meta-å‚æ•°çš„ä½¿ç”¨"><a href="#_1-meta-å‚æ•°çš„ä½¿ç”¨" class="header-anchor">#</a> 1ï¼‰meta å‚æ•°çš„ä½¿ç”¨</h4> <ul><li><p>meta çš„ä½¿ç”¨ï¼š</p> <ul><li>meta å¯ä»¥å®ç°æ•°æ®åœ¨ä¸åŒçš„è§£æå‡½æ•°ä¸­ä¼ é€’</li></ul></li> <li><p>meta çš„æ³¨æ„äº‹é¡¹ï¼š</p> <ul><li>meta å‚æ•°æ˜¯ä¸€ä¸ªå­—å…¸</li> <li>meta å­—å…¸ä¸­æœ‰ä¸€ä¸ªå›ºå®šçš„é”® proxyï¼Œè¡¨ç¤ºä»£ç† ip</li></ul></li> <li><p>ä½¿ç”¨ä¸¾ä¾‹ï¼š</p></li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">yield</span> scrapy<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>detail_url<span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>parse_detail<span class="token punctuation">,</span> meta<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'item'</span><span class="token punctuation">:</span> item<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>


<span class="token keyword">def</span> <span class="token function">parse_detail</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># è·å–ä¹‹å‰ä¼ å…¥çš„item</span>
    item <span class="token operator">=</span> response<span class="token punctuation">.</span>meta<span class="token punctuation">[</span><span class="token string">'item'</span><span class="token punctuation">]</span>
</code></pre></div><h2 id="äº”ã€scrapy-æ¨¡æ‹Ÿç™»å½•-cookie"><a href="#äº”ã€scrapy-æ¨¡æ‹Ÿç™»å½•-cookie" class="header-anchor">#</a> äº”ã€scrapy æ¨¡æ‹Ÿç™»å½•(cookie)</h2> <h3 id="_1ã€æ¨¡æ‹Ÿç™»å½•çš„ä¸åŒå®ç°æ–¹å¼"><a href="#_1ã€æ¨¡æ‹Ÿç™»å½•çš„ä¸åŒå®ç°æ–¹å¼" class="header-anchor">#</a> 1ã€æ¨¡æ‹Ÿç™»å½•çš„ä¸åŒå®ç°æ–¹å¼</h3> <ul><li>requests æ¨¡å—
<ul><li>ç›´æ¥æºå¸¦ cookies è¯·æ±‚é¡µé¢</li> <li>æ‰¾åˆ° url åœ°å€ï¼Œå‘é€ post è¯·æ±‚å­˜å‚¨ cookie</li></ul></li> <li>seleniumï¼ˆæµè§ˆå™¨è‡ªåŠ¨å¤„ç† cookieï¼‰
<ul><li>æ‰¾åˆ°å¯¹åº”çš„ input æ ‡ç­¾ï¼Œè¾“å…¥æ–‡æœ¬ç‚¹å‡»ç™»å½•</li></ul></li> <li>scrapy
<ul><li>ç›´æ¥æºå¸¦ cookies</li> <li>æ‰¾ url åœ°å€ï¼Œå‘é€ post è¯·æ±‚å­˜å‚¨ cookie</li></ul></li></ul> <h3 id="_2ã€scrapy-ç›´æ¥æºå¸¦-cookies-è·å–éœ€è¦ç™»å½•ä¿¡æ¯çš„é¡µé¢"><a href="#_2ã€scrapy-ç›´æ¥æºå¸¦-cookies-è·å–éœ€è¦ç™»å½•ä¿¡æ¯çš„é¡µé¢" class="header-anchor">#</a> 2ã€scrapy ç›´æ¥æºå¸¦ cookies è·å–éœ€è¦ç™»å½•ä¿¡æ¯çš„é¡µé¢</h3> <p>åº”ç”¨åœºæ™¯ï¼š</p> <ul><li>cookie è¿‡æœŸæ—¶é—´å¾ˆé•¿ï¼Œå¸¸è§äºä¸€äº›ä¸è§„èŒƒçš„ç½‘ç«™</li> <li>èƒ½åœ¨ cookie è¿‡æœŸä¹‹å‰æŠŠæ‰€æœ‰çš„æ•°æ®æ‹¿åˆ°</li> <li>é…åˆå…¶ä»–ç¨‹åºä½¿ç”¨ï¼Œæ¯”å¦‚å…¶ä½¿ç”¨ selenium æŠŠç™»å½•ä¹‹åçš„ cookie è·å–åˆ°å¹¶ä¿å­˜åˆ°æœ¬åœ°ï¼Œscrapy å‘é€è¯·æ±‚ä¹‹å‰å…ˆè¯»å–æœ¬åœ° cookie</li></ul> <h4 id="_1ã€start-url-æºå¸¦-cookie-é‡å†™-start-requests-æ–¹æ³•"><a href="#_1ã€start-url-æºå¸¦-cookie-é‡å†™-start-requests-æ–¹æ³•" class="header-anchor">#</a> 1ã€start_url æºå¸¦ cookieï¼ˆé‡å†™ start_requests æ–¹æ³•ï¼‰</h4> <p>scrapy ä¸­ start_url æ˜¯é€šè¿‡ start_requests æ¥è¿›è¡Œå¤„ç†çš„ï¼Œå¯èƒ½é€šè¿‡é‡å†™è¯¥æ–¹æ³•è®© start_url æºå¸¦ä¸Šè¯·æ±‚å¤´ä¿¡æ¯ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> scrapy


<span class="token keyword">class</span> <span class="token class-name">Git1Spider</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">'git1'</span>
    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'github.com'</span><span class="token punctuation">]</span>
    start_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'https://github.com/GitLqr'</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">start_requests</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        é‡å†™start_requestsï¼Œå‘é€æºå¸¦cookiesçš„Requestã€‚
        é»˜è®¤start_requestsåªæ˜¯æ™®é€šçš„getè¯·æ±‚ï¼Œä¸ä¼šæºå¸¦è‡ªå®šä¹‰çš„å¤´ä¿¡æ¯
        &quot;&quot;&quot;</span>
        url <span class="token operator">=</span> self<span class="token punctuation">.</span>start_urls<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

        temp <span class="token operator">=</span> <span class="token string">'_octo=GH1.1.1045146750.1615451260; _device_id=cd8d64981fcb3fd4ba7f587873e97804'</span>
        <span class="token comment"># æŠŠcookieså­—ç¬¦ä¸²è½¬æˆå­—å…¸</span>
        cookies <span class="token operator">=</span> <span class="token punctuation">{</span>data<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'='</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span> data<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'='</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">for</span> data <span class="token keyword">in</span> temp<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'; '</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

        <span class="token keyword">yield</span> scrapy<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>
            url<span class="token operator">=</span>url<span class="token punctuation">,</span>
            callback<span class="token operator">=</span>self<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
            cookies<span class="token operator">=</span>cookies
        <span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'/html/head/title/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>æ³¨æ„ï¼š</p> <ul><li>scrapy ä¸­ cookie ä¸èƒ½å¤Ÿæ”¾åœ¨ headers ä¸­ï¼Œåœ¨æ„é€ è¯·æ±‚çš„æ—¶å€™æœ‰ä¸“é—¨çš„ cookies å‚æ•°ï¼Œèƒ½å¤Ÿæ¥æ”¶å­—å…¸å½¢å¼çš„ cookie</li> <li>å¯èƒ½éœ€è¦åœ¨ settings ä¸­è®¾ç½® ROBOTS åè®®ã€USER_AGENT</li></ul> <h3 id="_2ã€scrapy-request-å‘é€-post-è¯·æ±‚"><a href="#_2ã€scrapy-request-å‘é€-post-è¯·æ±‚" class="header-anchor">#</a> 2ã€scrapy.Request å‘é€ post è¯·æ±‚</h3> <p>scrapy.Request å‘é€ post è¯·æ±‚æœ‰ä¸¤ç§æ–¹å¼ï¼š</p> <ul><li><p>é€šè¿‡ <code>scrapy.Request()</code> æŒ‡å®š methodã€body å‚æ•°æ¥å‘é€ post è¯·æ±‚ï¼ˆä¸æ¨èï¼‰</p></li> <li><p>ä½¿ç”¨ <code>scrapy.FormRequest()</code> æ¥å‘é€ post è¯·æ±‚ï¼ˆæ¨èï¼‰</p></li></ul> <blockquote><p>æ³¨æ„ï¼š<code>scrapy.FormRequest()</code> èƒ½å¤Ÿå‘é€è¡¨å•å’Œ ajax è¯·æ±‚ï¼Œå‚è€ƒé˜…è¯» <a href="https://www.jb51.net/article/146769.htm" target="_blank" rel="noopener noreferrer">https://www.jb51.net/article/146769.htm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>ä¸¾ä¾‹ï¼š</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> scrapy


<span class="token keyword">class</span> <span class="token class-name">Git2Spider</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">'git2'</span>
    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'github.com'</span><span class="token punctuation">]</span>
    start_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'http://github.com/login'</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        username <span class="token operator">=</span> <span class="token string">'GitLqr'</span>
        password <span class="token operator">=</span> <span class="token string">'balabala'</span>

        <span class="token comment"># ä»ç™»å½•é¡µé¢å“åº”ä¸­è§£æå‡ºpostæ•°æ®</span>
        token <span class="token operator">=</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//input[@name=&quot;authenticity_token&quot;]/@value'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span>

        post_data <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">'commit'</span><span class="token punctuation">:</span> <span class="token string">'Sign in'</span><span class="token punctuation">,</span>
            <span class="token string">'authenticity_token'</span><span class="token punctuation">:</span> token<span class="token punctuation">,</span>
            <span class="token string">'login'</span><span class="token punctuation">:</span> username<span class="token punctuation">,</span>
            <span class="token string">'password'</span><span class="token punctuation">:</span> password<span class="token punctuation">,</span>
            <span class="token string">'webauthn-support'</span><span class="token punctuation">:</span> <span class="token string">'supported'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>post_data<span class="token punctuation">)</span>

        <span class="token comment"># é’ˆå¯¹ç™»å½•urlå‘é€postè¯·æ±‚</span>
        <span class="token keyword">yield</span> scrapy<span class="token punctuation">.</span>FormRequest<span class="token punctuation">(</span>
            url<span class="token operator">=</span><span class="token string">'https://github.com/session'</span><span class="token punctuation">,</span>
            callback<span class="token operator">=</span>self<span class="token punctuation">.</span>after_login<span class="token punctuation">,</span>
            formdata<span class="token operator">=</span>post_data
        <span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">after_login</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">yield</span> scrapy<span class="token punctuation">.</span>Request<span class="token punctuation">(</span><span class="token string">'https://github.com/GitLqr'</span><span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>check_login<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">check_login</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'/html/head/title/text()'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract_first<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>æ³¨æ„ï¼šåœ¨ settings.py ä¸­é€šè¿‡è®¾ç½® <code>COOKIES_DEBUG = True</code> èƒ½å¤Ÿåœ¨ç»ˆç«¯æŸ¥çœ‹åˆ° cookie çš„ä¼ é€’è¿‡ç¨‹</p></blockquote> <h2 id="å…­ã€scrapy-ç®¡é“çš„ä½¿ç”¨"><a href="#å…­ã€scrapy-ç®¡é“çš„ä½¿ç”¨" class="header-anchor">#</a> å…­ã€scrapy ç®¡é“çš„ä½¿ç”¨</h2> <h3 id="_1ã€pipeline-ä¸­å¸¸ç”¨çš„æ–¹æ³•"><a href="#_1ã€pipeline-ä¸­å¸¸ç”¨çš„æ–¹æ³•" class="header-anchor">#</a> 1ã€pipeline ä¸­å¸¸ç”¨çš„æ–¹æ³•</h3> <ul><li><code>process_item(self, item, spider)</code>ï¼š
<ul><li>ç®¡é“ç±»ä¸­å¿…é¡»æœ‰çš„å‡½æ•°</li> <li>å®ç°å¯¹ item æ•°æ®çš„å¤„ç†</li> <li>å¿…é¡» <code>return item</code></li></ul></li> <li><code>open_spider(self, spider)</code>ï¼šåœ¨çˆ¬è™«å¼€å¯çš„æ—¶å€™ä»…æ‰§è¡Œä¸€æ¬¡</li> <li><code>close_spider(self, spider)</code>ï¼šåœ¨çˆ¬è™«å…³é—­çš„æ—¶å€™ä»…æ‰§è¡Œä¸€æ¬¡</li></ul> <blockquote><p>æ³¨æ„ï¼šä»¥ä¸Š 3 ä¸ªæ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡ <code>spider.name</code> è·å–çˆ¬è™«çš„åå­—</p></blockquote> <h3 id="_2ã€pipeline-åˆ¤æ–­æ•°æ®æ¥æº"><a href="#_2ã€pipeline-åˆ¤æ–­æ•°æ®æ¥æº" class="header-anchor">#</a> 2ã€pipeline åˆ¤æ–­æ•°æ®æ¥æº</h3> <p>scrapy çš„ <code>Item Pipeline</code> æ¨¡å—å¯ä»¥æœ‰å¤šä¸ªç®¡é“ï¼Œå½“æœ‰ä¸€ä¸ª spider æŠŠæ•°æ®å¯¹è±¡é€šè¿‡å¼•æ“äº¤ç»™ <code>Item Pipeline</code> æ¨¡å—æ—¶ï¼Œ <code>Item Pipeline</code> æ¨¡å—ä¸­çš„æ‰€æœ‰ç®¡é“ä¼šæŒ‰ <code>settings.py</code> ä¸­æŒ‡å®šçš„ç®¡é“é¡ºåºä¸€ä¸€è¢«æ‰§è¡Œã€‚ä½†å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ç®¡é“é’ˆå¯¹ç‰¹å®šçˆ¬è™«åšæ•°æ®å­˜å‚¨çš„ï¼Œè¿™æ—¶å°±éœ€è¦åœ¨ç®¡é“ä¸­å¯¹æ•°æ®å¯¹è±¡çš„æ¥æºåšåˆ¤æ–­ã€‚</p> <blockquote><p>æ³¨æ„ï¼šä¸åŒçš„ pipeline èƒ½å¤Ÿå¯¹ä¸€ä¸ªæˆ–å¤šä¸ªçˆ¬è™«è¿›è¡Œä¸åŒçš„æ•°æ®å¤„ç†çš„æ“ä½œï¼Œæ¯”å¦‚ä¸€ä¸ªè¿›è¡Œæ•°æ®æ¸…æ´—ï¼Œä¸€ä¸ªè¿›è¡Œæ•°æ®çš„ä¿å­˜</p></blockquote> <p>ä¸¾ä¾‹ï¼š</p> <ul><li>çˆ¬è™« 1ï¼šjob.py</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> scrapy
<span class="token keyword">from</span> wangyi<span class="token punctuation">.</span>items <span class="token keyword">import</span> WangyiItem


<span class="token keyword">class</span> <span class="token class-name">JobSpider</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">'job'</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token keyword">yield</span> item
</code></pre></div><ul><li>çˆ¬è™« 2ï¼šjob_simple.py</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> scrapy
<span class="token keyword">from</span> wangyi<span class="token punctuation">.</span>items <span class="token keyword">import</span> WangyiSimpleItem


<span class="token keyword">class</span> <span class="token class-name">JobSimpleSpider</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">'job_simple'</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token keyword">yield</span> item
</code></pre></div><ul><li>2 ä¸ªç®¡é“ï¼špipelines.py</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">WangyiPipeline</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">open_spider</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> spider<span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">'job'</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span><span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'wangyi.json'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">process_item</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> item<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> spider<span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">'job'</span><span class="token punctuation">:</span>
            item <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
            str_data <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>item<span class="token punctuation">,</span> ensure_ascii<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">',\n'</span>
            self<span class="token punctuation">.</span><span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>str_data<span class="token punctuation">)</span>
        <span class="token keyword">return</span> item

    <span class="token keyword">def</span> <span class="token function">close_spider</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> spider<span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">'job'</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span><span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">WangyiSimplePipeline</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">open_spider</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> spider<span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">'job_simple'</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span><span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'wangyi_simple.json'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">process_item</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> item<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> spider<span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">'job_simple'</span><span class="token punctuation">:</span>
            item <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
            str_data <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>item<span class="token punctuation">,</span> ensure_ascii<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">',\n'</span>
            self<span class="token punctuation">.</span><span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>str_data<span class="token punctuation">)</span>
        <span class="token keyword">return</span> item

    <span class="token keyword">def</span> <span class="token function">close_spider</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> spider<span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">'job_simple'</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span><span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_3ã€pipeline-ä½¿ç”¨æ³¨æ„ç‚¹"><a href="#_3ã€pipeline-ä½¿ç”¨æ³¨æ„ç‚¹" class="header-anchor">#</a> 3ã€pipeline ä½¿ç”¨æ³¨æ„ç‚¹</h3> <ul><li>ä½¿ç”¨ä¹‹å‰éœ€è¦åœ¨ settings ä¸­å¼€å¯</li> <li>pipeline åœ¨ settings ä¸­é”®è¡¨ç¤ºä½ç½®ï¼ˆå³ pipeline åœ¨é¡¹ç›®ä¸­çš„ä½ç½®å¯ä»¥è‡ªå®šä¹‰ï¼‰ï¼Œå€¼è¡¨ç¤ºè·ç¦»å¼•æ“çš„è¿œè¿‘ï¼Œè¶Šè¿‘æ•°æ®ä¼šè¶Šå…ˆç»è¿‡ï¼š<strong>æƒé‡å€¼å°çš„ä¼˜å…ˆæ‰§è¡Œ</strong></li> <li>æœ‰å¤šä¸ª pipeline çš„æ—¶å€™ï¼Œ<code>process_item</code> çš„æ–¹æ³•å¿…é¡» <code>return item</code>ï¼Œå¦åˆ™åä¸€ä¸ª pipeline å–åˆ°çš„æ•°æ®ä¸º None å€¼</li> <li>pipeline ä¸­ <code>process_item</code> æ–¹æ³•å¿…é¡»è¦æœ‰ï¼Œå¦åˆ™ item æ²¡æœ‰åŠæ³•æ¥æ”¶å’Œå¤„ç†</li> <li><code>process_item</code> æ–¹æ³•æ¥æ”¶ item å’Œ spiderï¼Œå…¶ä¸­ spider è¡¨ç¤ºå½“å‰ä¼ é€’ item è¿‡æ¥çš„ spider</li> <li><code>open_spider(spider)</code>ï¼šèƒ½å¤Ÿåœ¨çˆ¬è™«å¼€å¯çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡</li> <li><code>close_spider(spider)</code>ï¼šèƒ½å¤Ÿåœ¨çˆ¬è™«å…³é—­çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡</li> <li>ä¸Šè¿°ä¿©ä¸ªæ–¹æ³•ç»å¸¸ç”¨äºçˆ¬è™«å’Œæ•°æ®åº“çš„äº¤äº’ï¼Œåœ¨çˆ¬è™«å¼€å¯çš„æ—¶å€™å»ºç«‹å’Œæ•°æ®åº“çš„è¿æ¥ï¼Œåœ¨çˆ¬è™«å…³é—­çš„æ—¶å€™æ–­å¼€å’Œæ•°æ®åº“çš„è¿æ¥</li></ul> <h2 id="ä¸ƒã€scrapy-ä¸­é—´ä»¶"><a href="#ä¸ƒã€scrapy-ä¸­é—´ä»¶" class="header-anchor">#</a> ä¸ƒã€scrapy ä¸­é—´ä»¶</h2> <h3 id="_1ã€ä»‹ç»"><a href="#_1ã€ä»‹ç»" class="header-anchor">#</a> 1ã€ä»‹ç»</h3> <h4 id="_1-åˆ†ç±»"><a href="#_1-åˆ†ç±»" class="header-anchor">#</a> 1ï¼‰åˆ†ç±»</h4> <p>æ ¹æ® scrapy è¿è¡Œæµç¨‹ä¸­æ‰€åœ¨ä½ç½®ä¸åŒï¼Œå¯¹ scrapy ä¸­é—´ä»¶è¿›è¡Œåˆ†ç±»ï¼š</p> <ul><li>ä¸‹è½½ä¸­é—´ä»¶</li> <li>çˆ¬è™«ä¸­é—´ä»¶</li></ul> <h4 id="_2-ä½œç”¨"><a href="#_2-ä½œç”¨" class="header-anchor">#</a> 2ï¼‰ä½œç”¨</h4> <p>scrapy ä¸­é—´ä»¶çš„ä½œç”¨æ˜¯ï¼šé¢„å¤„ç† request å’Œ response å¯¹è±¡</p> <ul><li>å¯¹ header ä»¥åŠ cookie è¿›è¡Œæ›´æ¢å’Œå¤„ç†</li> <li>ä½¿ç”¨ä»£ç† ip ç­‰</li> <li>å¯¹è¯·æ±‚è¿›è¡Œå®šåˆ¶åŒ–æ“ä½œ</li></ul> <h4 id="_3-æ¯”è¾ƒ"><a href="#_3-æ¯”è¾ƒ" class="header-anchor">#</a> 3ï¼‰æ¯”è¾ƒ</h4> <ul><li><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸¤ç§ä¸­é—´ä»¶éƒ½åœ¨ <code>middlewares.py</code> ä¸€ä¸ªæ–‡ä»¶ä¸­</p></li> <li><p>çˆ¬è™«ä¸­é—´ä»¶ä½¿ç”¨æ–¹æ³•å’Œä¸‹è½½ä¸­é—´ä»¶ç›¸åŒï¼Œä¸”åŠŸèƒ½é‡å¤ï¼Œ<strong>é€šå¸¸ä½¿ç”¨ä¸‹è½½ä¸­é—´ä»¶</strong></p></li></ul> <h3 id="_2ã€ä½¿ç”¨æ–¹æ³•"><a href="#_2ã€ä½¿ç”¨æ–¹æ³•" class="header-anchor">#</a> 2ã€ä½¿ç”¨æ–¹æ³•</h3> <p>æ³¨æ„ï¼šç»“åˆ scrapy æµç¨‹å›¾å¯æ–¹ä¾¿ç†è§£</p> <p><img src="https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20210320170901/image/20210704154838.jpg" alt="scrapyæµç¨‹å›¾"></p> <p>ä¸­é—´ä»¶ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š</p> <ol><li><p>åœ¨ <code>middlerware.py</code> ä¸­å®šä¹‰ä¸­é—´ä»¶ç±»</p></li> <li><p>åœ¨ä¸­é—´ä»¶ç±»ä¸­ï¼Œé‡å†™å¤„ç†è¯·æ±‚æˆ–è€…å“åº”çš„æ–¹æ³•ï¼ˆä»¥<code>Downloader Middlewares</code>ä¸ºä¾‹ï¼‰</p> <ul><li><p>process_request(self, request, spider)</p> <blockquote><p>å½“æ¯ä¸ª request é€šè¿‡ä¸‹è½½ä¸­é—´ä»¶æ—¶ï¼Œè¯¥æ–¹æ³•è¢«è°ƒç”¨ã€Scrapy Engine --&gt; Downloaderã€‘</p></blockquote> <ul><li>è¿”å› Noneã€ç»§ç»­ã€‘ï¼šè¯¥ request å¯¹è±¡é€šè¿‡å¼•æ“ä¼ é€’ç»™å…¶ä»–æƒé‡ä½çš„ <code>process_request</code> æ–¹æ³•ï¼Œå¦‚æœæ‰€æœ‰ä¸­é—´ä»¶éƒ½è¿”å› Noneï¼Œåˆ™è¯·æ±‚æœ€ç»ˆè¢«äº¤ç»™ä¸‹è½½å™¨å¤„ç†ã€‚æ³¨æ„ï¼šæ²¡æœ‰ return ä¹Ÿæ˜¯è¿”å› Noneã€‚</li> <li>è¿”å› Request å¯¹è±¡ã€ä¸­æ–­ã€‘ï¼šæŠŠ request å¯¹è±¡é€šè¿‡å¼•æ“äº¤ç»™è°ƒåº¦å™¨ï¼Œæ­¤æ—¶å°†ä¸é€šè¿‡å…¶ä»–æƒé‡ä½çš„ <code>process_request</code> æ–¹æ³•</li> <li>è¿”å› Response å¯¹è±¡ã€ä¸­æ–­ã€‘ï¼š<strong>è¯·æ±‚ä¸ä¼šè¾¾åˆ°ä¸‹è½½å™¨</strong>ï¼Œä¼šç›´æ¥æŠŠ response é€šè¿‡å¼•æ“äº¤ç»™ Spider è¿›è¡Œè§£æ</li></ul></li> <li><p>process_response(self, request, response, spider)</p> <blockquote><p>å½“ä¸‹è½½å™¨å®Œæˆ http è¯·æ±‚ï¼Œä¼ é€’å“åº”ç»™å¼•æ“çš„æ—¶å€™è°ƒç”¨ã€Scrapy Engine &lt;-- Downloaderã€‘</p></blockquote> <ul><li>è¿”å› Request å¯¹è±¡ã€ä¸­æ–­ã€‘ï¼šé€šè¿‡å¼•æ“äº¤ç»™è°ƒåº¦å™¨ç»§ç»­è¯·æ±‚ï¼Œæ­¤æ—¶å°†ä¸é€šè¿‡å…¶ä»–æƒé‡ä½çš„ <code>process_response</code> æ–¹æ³•</li> <li>è¿”å› Response å¯¹è±¡ã€ç»§ç»­ã€‘ï¼šé€šè¿‡å¼•æ“äº¤ç»™çˆ¬è™«å¤„ç†æˆ–äº¤ç»™æƒé‡æ›´ä½çš„å…¶ä»–ä¸‹è½½ä¸­é—´ä»¶çš„ <code>process_response</code> æ–¹æ³•</li></ul></li></ul></li> <li><p>åœ¨ <code>settings</code> æ–‡ä»¶ä¸­å¼€å¯ä¸­é—´ä»¶ï¼Œæƒé‡å€¼è¶Šå°è¶Šä¼˜å…ˆæ‰§è¡Œï¼ˆåŒç®¡é“æ³¨å†Œä¸€æ ·ï¼‰</p></li></ol> <h3 id="_3ã€å®ç°éšæœº-user-agent-ä¸‹è½½ä¸­é—´ä»¶"><a href="#_3ã€å®ç°éšæœº-user-agent-ä¸‹è½½ä¸­é—´ä»¶" class="header-anchor">#</a> 3ã€å®ç°éšæœº User-Agent ä¸‹è½½ä¸­é—´ä»¶</h3> <h4 id="_1-å‡†å¤‡-ua-åˆ—è¡¨"><a href="#_1-å‡†å¤‡-ua-åˆ—è¡¨" class="header-anchor">#</a> 1ï¼‰å‡†å¤‡ UA åˆ—è¡¨</h4> <p>åœ¨ <code>settings.py</code> æ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ªå­˜æ”¾äº†å¤§é‡ UA çš„åˆ—è¡¨ <code>USER_AGENT_LIST</code>ï¼š</p> <div class="language-python extra-class"><pre class="language-python"><code>USER_AGENT <span class="token operator">=</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.72 Safari/537.36'</span>

USER_AGENT_LIST <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">'Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_8; en-us) AppleWebKit/534.50 (KHTML, like Gecko) Version/5.1 Safari/534.50'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-us) AppleWebKit/534.50 (KHTML, like Gecko) Version/5.1 Safari/534.50'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0;'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0)'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:2.0.1) Gecko/20100101 Firefox/4.0.1'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/5.0 (Windows NT 6.1; rv:2.0.1) Gecko/20100101 Firefox/4.0.1'</span><span class="token punctuation">,</span>
    <span class="token string">'Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; en) Presto/2.8.131 Version/11.11'</span><span class="token punctuation">,</span>
    <span class="token string">'Opera/9.80 (Windows NT 6.1; U; en) Presto/2.8.131 Version/11.11'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_0) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Maxthon 2.0)'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; TencentTraveler 4.0)'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; The World)'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Trident/4.0; SE 2.X MetaSr 1.0; SE 2.X MetaSr 1.0; .NET CLR 2.0.50727; SE 2.X MetaSr 1.0)'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; 360SE)'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Avant Browser)'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_3_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/5.0 (iPod; U; CPU iPhone OS 4_3_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/5.0 (iPad; U; CPU OS 4_3_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/5.0 (Linux; U; Android 2.3.7; en-us; Nexus One Build/FRF91) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1'</span><span class="token punctuation">,</span>
    <span class="token string">'MQQBrowser/26 Mozilla/5.0 (Linux; U; Android 2.3.7; zh-cn; MB200 Build/GRJ22; CyanogenMod-7) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1'</span><span class="token punctuation">,</span>
    <span class="token string">'Opera/9.80 (Android 2.3.4; Linux; Opera Mobi/build-1107180945; U; en-GB) Presto/2.8.149 Version/11.10'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/5.0 (Linux; U; Android 3.0; en-us; Xoom Build/HRI39) AppleWebKit/534.13 (KHTML, like Gecko) Version/4.0 Safari/534.13'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/5.0 (BlackBerry; U; BlackBerry 9800; en) AppleWebKit/534.1+ (KHTML, like Gecko) Version/6.0.0.337 Mobile Safari/534.1+'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/5.0 (hp-tablet; Linux; hpwOS/3.0.0; U; en-US) AppleWebKit/534.6 (KHTML, like Gecko) wOSBrowser/233.70 Safari/534.6 TouchPad/1.0'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/5.0 (SymbianOS/9.4; Series60/5.0 NokiaN97-1/20.0.019; Profile/MIDP-2.1 Configuration/CLDC-1.1) AppleWebKit/525 (KHTML, like Gecko) BrowserNG/7.1.18124'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/5.0 (compatible; MSIE 9.0; Windows Phone OS 7.5; Trident/5.0; IEMobile/9.0; HTC; Titan)'</span><span class="token punctuation">,</span>
    <span class="token string">'UCWEB7.0.2.37/28/999'</span><span class="token punctuation">,</span>
    <span class="token string">'NOKIA5700/ UCWEB7.0.2.37/28/999'</span><span class="token punctuation">,</span>
    <span class="token string">'Openwave/ UCWEB7.0.2.37/28/999'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/4.0 (compatible; MSIE 6.0; ) Opera/UCWEB7.0.2.37/28/999'</span><span class="token punctuation">,</span>
    <span class="token string">'UCWEB7.0.2.37/28/999'</span><span class="token punctuation">,</span>
    <span class="token string">'NOKIA5700/ UCWEB7.0.2.37/28/999'</span><span class="token punctuation">,</span>
    <span class="token string">'Openwave/ UCWEB7.0.2.37/28/999'</span><span class="token punctuation">,</span>
    <span class="token string">'Mozilla/4.0 (compatible; MSIE 6.0; ) Opera/UCWEB7.0.2.37/28/999'</span>
<span class="token punctuation">]</span>
</code></pre></div><blockquote><p>æ³¨æ„ï¼šè¯¥ <code>USER_AGENT_LIST</code> å˜é‡åå¯ä»¥è‡ªå®šä¹‰ï¼Œä¹Ÿå¯ä»¥å†™åœ¨å…¶ä»– py æ–‡ä»¶ä¸­ï¼Œå†™åœ¨ settings.py æ–‡ä»¶ä¸­ï¼Œåªæ˜¯ä¸ºäº†è§„èŒƒè€Œå·²ã€‚</p></blockquote> <h4 id="_2-å®šä¹‰ä¸‹è½½ä¸­é—´ä»¶"><a href="#_2-å®šä¹‰ä¸‹è½½ä¸­é—´ä»¶" class="header-anchor">#</a> 2ï¼‰å®šä¹‰ä¸‹è½½ä¸­é—´ä»¶</h4> <p>åœ¨ <code>middlewares.py</code> æ–‡ä»¶ä¸­å®šä¹‰éšæœº UA çš„ä¸‹è½½ä¸­é—´ä»¶ï¼š</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> random

<span class="token keyword">from</span> Douban<span class="token punctuation">.</span>settings <span class="token keyword">import</span> USER_AGENT_LIST


<span class="token keyword">class</span> <span class="token class-name">RandomUserAgentMiddleware</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">process_request</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># print(request.headers['User-Agent'])</span>
        ua <span class="token operator">=</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>USER_AGENT_LIST<span class="token punctuation">)</span>
        request<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'User-Agent'</span><span class="token punctuation">]</span> <span class="token operator">=</span> ua
</code></pre></div><h4 id="_3-å¯ç”¨ä¸‹è½½ä¸­é—´ä»¶"><a href="#_3-å¯ç”¨ä¸‹è½½ä¸­é—´ä»¶" class="header-anchor">#</a> 3ï¼‰å¯ç”¨ä¸‹è½½ä¸­é—´ä»¶</h4> <p>åœ¨ <code>settings.py</code> æ–‡ä»¶ä¸­é…ç½®å¼€å¯è‡ªå®šä¹‰çš„ä¸‹è½½ä¸­é—´ä»¶ï¼š</p> <div class="language-python extra-class"><pre class="language-python"><code>DOWNLOADER_MIDDLEWARES <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'Douban.middlewares.RandomUserAgentMiddleware'</span><span class="token punctuation">:</span> <span class="token number">543</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4ã€å®ç°-selenium-æ¸²æŸ“çš„ä¸‹è½½ä¸­é—´ä»¶"><a href="#_4ã€å®ç°-selenium-æ¸²æŸ“çš„ä¸‹è½½ä¸­é—´ä»¶" class="header-anchor">#</a> 4ã€å®ç° Selenium æ¸²æŸ“çš„ä¸‹è½½ä¸­é—´ä»¶</h3> <p>scrapy çš„ Downloader æ¨¡å—åªä¼šæ ¹æ®è¯·æ±‚è·å–å“åº”ï¼Œä½†å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰äº›é¡µé¢ä¸Šçš„æ•°æ®æ˜¯é€šè¿‡ ajax å»¶è¿ŸåŠ è½½å‡ºæ¥çš„ï¼ŒDownloader æ¨¡å—æ— æ³•åº”å¯¹è¿™ç§æƒ…å†µï¼Œè¿™æ—¶å°±éœ€è¦ç”¨åˆ° Selenium æ¥å¤„ç†è¿™ç±»è¯·æ±‚ï¼Œç­‰é¡µé¢æ¸²æŸ“å®Œæˆåï¼Œå†æŠŠæ¸²æŸ“å¥½çš„é¡µé¢è¿”å›ç»™çˆ¬è™«å³å¯ï¼š</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">from</span> scrapy<span class="token punctuation">.</span>http <span class="token keyword">import</span> HtmlResponse


<span class="token keyword">class</span> <span class="token class-name">SeleniumMiddleware</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">process_request</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
        url <span class="token operator">=</span> request<span class="token punctuation">.</span>url

        <span class="token comment"># è¿‡æ»¤éœ€è¦ä½¿ç”¨seleniumæ¸²æŸ“çš„request</span>
        <span class="token keyword">if</span> <span class="token string">'daydata'</span> <span class="token keyword">in</span> url<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
            time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
            data <span class="token operator">=</span> self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>page_source
            self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

            <span class="token comment"># è¿”å›HtmlResponseï¼Œè¯·æ±‚ä¸ä¼šè¾¾åˆ°Downloaderï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡å¼•æ“äº¤ç»™çˆ¬è™«</span>
            response <span class="token operator">=</span> HtmlResponse<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span> body<span class="token operator">=</span>data<span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">,</span> request<span class="token operator">=</span>request<span class="token punctuation">)</span>
            <span class="token keyword">return</span> response

    <span class="token keyword">def</span> <span class="token function">__del__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></div></div> <div class="page-slot page-slot-bottom"><!-- æ¨ªå‘è‡ªé€‚åº” -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <center><img style="width:100%;" src="https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/FSA_QR_bottom.png"/></center>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=Python%E7%88%AC%E8%99%AB" title="æ ‡ç­¾">#Pythonçˆ¬è™«</a><a href="/tags/?tag=Scrapy" title="æ ‡ç­¾">#Scrapy</a></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2025/10/26, 06:32:15</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/10277d/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Python - çˆ¬è™«ä¹‹Selenium</div></a> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/pages/10277d/" class="prev">Python - çˆ¬è™«ä¹‹Selenium</a></span> <!----></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">æœ€è¿‘æ›´æ–°</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/f2b584/"><div>
            Flutter å¤šä»“åº“æœ¬åœ° Monorepo æ–¹æ¡ˆä¸ä½“éªŒä¼˜åŒ–
            <!----></div></a> <span class="date">10-25</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/8a1fb6/"><div>
            Flutter webview å´©æºƒç‡ä¸Šå‡æ€ä¹ˆåŠï¼Ÿæˆ‘çš„åˆ†æä¸è§£å†³æ–¹æ¡ˆ
            <!----></div></a> <span class="date">10-19</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/c10ea8/"><div>
            Flutter - Melos Pub workspaces å®è·µ
            <!----></div></a> <span class="date">10-12</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">æ›´å¤šæ–‡ç« &gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/LinXunFeng" title="GitHub for LinXunFeng" target="_blank" class="iconfont icon-githubsquare"></a><a href="mailto:linxunfeng@yeah.net" title="email for LinXunFeng" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/GitLqr" title="GitHub for GitLqr" target="_blank" class="iconfont icon-github-circle"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2020-2025
    <span><a href="/about" target="_blank">FSAå…¨æ ˆè¡ŒåŠ¨</a></span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><span class="close-but">Ã—</span> <div><!-- å›ºå®š160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6b6c4902.js" defer></script><script src="/assets/js/2.d8b68cf2.js" defer></script><script src="/assets/js/186.665f680d.js" defer></script>
  </body>
</html>
