(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{505:function(s,a,t){"use strict";t.r(a);var e=t(21),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"一、问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、问题"}},[s._v("#")]),s._v(" 一、问题")]),s._v(" "),a("p",[s._v("近日在公司用 "),a("code",[s._v("Jenkins")]),s._v(" 给组件库打包遇到如下错误")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("ERROR "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("iOS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" unknown: Encountered an unknown error "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Could not "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" a "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("ios"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" simulator "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("valid values: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(". Ensure that Xcode -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Window -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Devices has at least one "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("ios"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" simulator listed or otherwise "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" one."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" during validation.\n")])])]),a("p",[s._v("首先要确保当前是否真的没有模拟器")]),s._v(" "),a("p",[a("code",[s._v("Xcode")]),s._v(" -> "),a("code",[s._v("Window")]),s._v(" -> "),a("code",[s._v("Devices and Simulators")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20210320170901/image/20210715212940.jpg",alt:""}})]),s._v(" "),a("p",[s._v("左侧的 "),a("code",[s._v("Simulators")]),s._v(" 列表下会展示当前所有的模拟器，如果没有则点左下角的 "),a("code",[s._v("+")]),s._v(" 进行添加")]),s._v(" "),a("p",[s._v("如果无法进行界面操作的话，可以使用如下命令列出模拟器")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出所有的模拟器")]),s._v("\nxcrun simctl list \n")])])]),a("p",[s._v("这里可以看到是有模拟器的，经过一顿搜索，网上基本上就两个步骤")]),s._v(" "),a("p",[s._v("1、重装 "),a("code",[s._v("Cocoapods")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("gem uninstall cocoapods\ngem "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" cocoapods\n")])])]),a("p",[s._v("2、更新 "),a("code",[s._v("fourflusher")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("gem uninstall fourflusher\ngem "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" fourflusher\n")])])]),a("p",[s._v("或许对一般的情况应该已经生效了，但是对我这种情况没用。")]),s._v(" "),a("p",[s._v("更奇葩的是，自己在终端里执行组件库的校验和打包是没有问题的，但是一旦用 "),a("code",[s._v("jenkins")]),s._v(" 去做这个事情就是不行。。。")]),s._v(" "),a("p",[s._v("我尝试在 "),a("code",[s._v("Jenkins")]),s._v(" 上新建一个 "),a("code",[s._v("Job")]),s._v("，让其执行如下命令")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("bundle "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v("\ngem "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v("\nruby "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v("\nfastlane "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v("\nxcrun simctl list "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出所有的模拟器")]),s._v("\n")])])]),a("p",[s._v("对打印的所有相关版本信息进行一一核对后，发现没有任何问题，与自行在终端下打印的结果是一致的")]),s._v(" "),a("h2",{attrs:{id:"二、解决方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、解决方案"}},[s._v("#")]),s._v(" 二、解决方案")]),s._v(" "),a("p",[s._v("经过一番思索，想着试试看关闭所有模拟器和清空所有模拟器的数据")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" xcrun simctl "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v(" all "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" xcrun simctl erase all\n")])])]),a("p",[s._v("执行完毕后再使用 "),a("code",[s._v("Jenkins")]),s._v(" 去对私有组件进行发布，结果成功了~😅")]),s._v(" "),a("h2",{attrs:{id:"三、其它问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、其它问题"}},[s._v("#")]),s._v(" 三、其它问题")]),s._v(" "),a("blockquote",[a("p",[s._v("这是在整个解决过程中遇到的其它问题，顺带记录下来~")])]),s._v(" "),a("h3",{attrs:{id:"_1、问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、问题"}},[s._v("#")]),s._v(" 1、问题")]),s._v(" "),a("p",[s._v("执行 "),a("code",[s._v("pod")]),s._v(" 时提示找不到 "),a("code",[s._v("cocoapods")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("Traceback "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("most recent call last"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": from /usr/local/bin/pod:23:in "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("main"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("'\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": from /Library/Ruby/Site/2.6.0/rubygems.rb:294:in "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("activate_bin_path"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\n/Library/Ruby/Site/2.6.0/rubygems.rb:275:in `find_spec_for_exe'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" can't "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" gem cocoapods "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(".a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" with executable pod "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Gem::GemNotFoundException"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("h3",{attrs:{id:"_2、原因"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、原因"}},[s._v("#")]),s._v(" 2、原因")]),s._v(" "),a("p",[s._v("原因是 "),a("code",[s._v("ruby")]),s._v(" 环境错乱，导致找不到 "),a("code",[s._v("gem")]),s._v(" 可执行文件")]),s._v(" "),a("h3",{attrs:{id:"_3、解决"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、解决"}},[s._v("#")]),s._v(" 3、解决")]),s._v(" "),a("p",[s._v("1、重新安装 "),a("code",[s._v("ruby")]),s._v(" 环境")]),s._v(" "),a("p",[s._v("执行下方命令即可重新安装 "),a("code",[s._v("ruby")]),s._v(" 环境（默认安装最新版本）")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("rvm reinstall ruby --disable-binary\n")])])]),a("p",[s._v("这里安装了最新版本，但是不见得默认就是使用的当前安装的版本。")]),s._v(" "),a("p",[s._v("使用下方命令查看版本")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("rvm list\n")])])]),a("p",[s._v("如下，默认还是 "),a("code",[s._v("2.6.3")]),s._v(" 版本，当前终端使用的是 "),a("code",[s._v("3.0.0")]),s._v(" 版本，当重新打开终端时还是会使用 "),a("code",[s._v("2.6.3")]),s._v("  版本")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("LXFMBP:~ lxf$ rvm list\n   ruby-2.3.1 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" x86_64 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n   ruby-2.4.6 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" x86_64 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n   ruby-2.5.1 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" missing bin/ruby "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n * ruby-2.6.3 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" x86_64 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n   ruby-2.7.2 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" x86_64 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ruby-3.0.0 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" x86_64 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# => - current")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# =* - current && default")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  * - default")]),s._v("\n")])])]),a("p",[s._v("执行如下命令可以设置默认使用的版本")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rvm --default use 版本号")]),s._v("\nrvm "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--default")]),s._v(" use "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.0")]),s._v(".0\n")])])]),a("p",[s._v("结果如下：")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("LXFMBP:~ lxf$ rvm list\n   ruby-2.3.1 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" x86_64 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n   ruby-2.4.6 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" x86_64 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n   ruby-2.5.1 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" missing bin/ruby "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n   ruby-2.6.3 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" x86_64 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n   ruby-2.7.2 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" x86_64 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("* ruby-3.0.0 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" x86_64 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# => - current")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# =* - current && default")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  * - default")]),s._v("\n")])])]),a("p",[s._v("2、重新安装 "),a("code",[s._v("cocoapods")]),s._v(" 和 "),a("code",[s._v("fastlane")])]),s._v(" "),a("p",[s._v("重新安装了 "),a("code",[s._v("ruby")]),s._v(" 版本后，需要重新安装 "),a("code",[s._v("cocoapods")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("gem "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" cocoapods\n")])])]),a("p",[a("code",[s._v("fastlane")]),s._v(" 亦是如此")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("gem "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" fastlane\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);