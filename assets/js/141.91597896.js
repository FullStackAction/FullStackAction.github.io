(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{486:function(e,t,s){"use strict";s.r(t);var a=s(15),n=Object(a.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("iframe",{attrs:{src:"//player.bilibili.com/player.html?aid=1603068977&bvid=BV1Qm421L7ib&cid=1505310266&p=1",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true",width:"100%",height:"560px"}}),e._v(" "),t("h2",{attrs:{id:"ä¸€ã€èƒŒæ™¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€èƒŒæ™¯"}},[e._v("#")]),e._v(" ä¸€ã€èƒŒæ™¯")]),e._v(" "),t("p",[e._v("ä¸Šå‘¨ä¸€å°è¯•ä» "),t("code",[e._v("3.16.9")]),e._v(" å‡çº§ "),t("code",[e._v("3.19.3")]),e._v("ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ï¼š")]),e._v(" "),t("p",[e._v("ä¸€æ˜¯å®‰å“ç«¯æœ‰ä¸€ä¸ªç–‘ä¼¼é€ æˆå´©æºƒç‡ä¸Šæ¶¨çš„ "),t("code",[e._v("bug")]),e._v(" åœ¨ "),t("code",[e._v("Flutter 3.16")]),e._v(" ä¸Šå‡ºç°ï¼Œç›¸å…³issue: "),t("a",{attrs:{href:"https://github.com/flutter/flutter/issues/138947",target:"_blank",rel:"noopener noreferrer"}},[e._v("#138947"),t("OutboundLink")],1),e._v(", è¯¥ "),t("code",[e._v("bug")]),e._v(" åœ¨ "),t("code",[e._v("3.13")]),e._v(" ä¸ä¼šå‡ºç°ï¼Œåœ¨ "),t("code",[e._v("3.17.pre")]),e._v(" ä¸Šå¾—åˆ°ä¿®å¤ï¼Œè€Œ "),t("code",[e._v("3.16")]),e._v(" ä¹‹åçš„ä¸‹ä¸ªæ­£å¼ç‰ˆæœ¬æ˜¯ "),t("code",[e._v("3.19")]),e._v("ã€‚")]),e._v(" "),t("p",[e._v("äºŒæ˜¯è‹¹æœçš„éšç§æ¸…å•å®¡æ ¸æ”¿ç­–ã€‚")]),e._v(" "),t("p",[e._v("åœ¨è‹¹æœå‘å¸ƒçš„ã€"),t("a",{attrs:{href:"https://developer.apple.com/cn/news/?id=3d8a9yyh",target:"_blank",rel:"noopener noreferrer"}},[e._v("å…³äº App Store æäº¤çš„éšç§æ›´æ–°"),t("OutboundLink")],1),e._v("ã€‘æ–°é—»ä¸­æŒ‡å‡º")]),e._v(" "),t("blockquote",[t("p",[t("strong",[e._v("è‡ª 3 æœˆ 13 æ—¥èµ·ï¼š")]),e._v(" å¦‚æœä½ ä¸Šä¼ æ–° App æˆ–æ›´æ–° App åˆ° AppÂ StoreÂ Connectï¼Œä¸”è¯¥ App ä½¿ç”¨äº†éœ€è¦å£°æ˜æ‰¹å‡†åŸå› çš„ APIï¼Œä½†ä½ æœªåœ¨ App çš„éšç§æ¸…å•ä¸­æä¾›æ‰¹å‡†åŸå› ï¼Œæˆ‘ä»¬ä¼šé€šè¿‡ç”µå­é‚®ä»¶å‘ŠçŸ¥ä½ ã€‚è¿™æ˜¯å¯¹ AppÂ StoreÂ Connect ä¸­ç°æœ‰é€šçŸ¥çš„è¡¥å……ã€‚")]),e._v(" "),t("p",[t("strong",[e._v("è‡ª 5 æœˆ 1 æ—¥èµ·ï¼š")]),e._v(" ä½ éœ€è¦å°±ä½ çš„ App ä»£ç ä½¿ç”¨çš„æ‰€åˆ— API æä¾›æ‰¹å‡†åŸå› ï¼Œæ‰èƒ½å°†æ–° App æˆ–æ›´æ–° App ä¸Šä¼ åˆ° AppÂ StoreÂ Connectã€‚å¦‚æœä½ æ²¡æœ‰åˆç†çš„åŸå› ä½¿ç”¨æŸä¸ª APIï¼Œè¯·å¯»æ‰¾æ›¿ä»£çš„æ–¹æ¡ˆã€‚å¦‚æœä½ æ·»åŠ äº†å¸¸ç”¨ç¬¬ä¸‰æ–¹ SDK åˆ—è¡¨ä¸­æ‰€åˆ—çš„æ–°ç‰ˆç¬¬ä¸‰æ–¹ SDKï¼Œé‚£ä¹ˆè¿™äº› APIã€éšç§æ¸…å•å’Œç­¾åè¦æ±‚å°†åº”ç”¨äºè¯¥ SDKã€‚è¯·åŠ¡å¿…ä½¿ç”¨åŒ…å«å…¶éšç§æ¸…å•çš„ SDK ç‰ˆæœ¬ï¼Œå¹¶æ³¨æ„åœ¨å°†è¯¥ SDK æ·»åŠ ä¸ºäºŒè¿›åˆ¶ä¾èµ–é¡¹æ—¶ä¹Ÿéœ€è¦æä¾›ç­¾åã€‚")])]),e._v(" "),t("p",[e._v("åœ¨è‹¹æœçš„ã€"),t("a",{attrs:{href:"https://developer.apple.com/cn/support/third-party-SDK-requirements/",target:"_blank",rel:"noopener noreferrer"}},[e._v("å³å°†å‘å¸ƒçš„ç¬¬ä¸‰æ–¹SDKè¦æ±‚"),t("OutboundLink")],1),e._v("ã€‘ä¸€æ–‡ä¸­ï¼Œåˆ—ä¸¾å‡ºéœ€è¦éšç§æ¸…å•å’Œç­¾åçš„ "),t("code",[e._v("SDK")]),e._v("ï¼Œå…¶ä¸­å°±åŒ…å«äº† "),t("code",[e._v("Flutter")]),e._v("ã€‚ä¸ºäº†ç¬¦åˆè¯¥å®¡æ ¸è¦æ±‚ï¼Œ"),t("code",[e._v("Flutter")]),e._v(" ä» "),t("code",[e._v("3.19")]),e._v(" å¼€å§‹åŒ…å«äº† "),t("code",[e._v("PrivacyInfo.xcprivacy")]),e._v(" è¿™ä¸ªéšç§æ¸…å•æ–‡ä»¶ã€‚")]),e._v(" "),t("p",[e._v("æ–‡ä»¶ä½äº: "),t("a",{attrs:{href:"https://github.com/flutter/engine/blob/3.19.0/shell/platform/darwin/ios/framework/PrivacyInfo.xcprivacy",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/flutter/engine/blob/3.19.0/shell/platform/darwin/ios/framework/PrivacyInfo.xcprivacy"),t("OutboundLink")],1)]),e._v(" "),t("h2",{attrs:{id:"äºŒã€è¸©å‘"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€è¸©å‘"}},[e._v("#")]),e._v(" äºŒã€è¸©å‘")]),e._v(" "),t("p",[e._v("å‡åˆ°åˆ° "),t("code",[e._v("3.19.3")]),e._v(" åå‘ç°ï¼Œä» "),t("code",[e._v("é¡µé¢A")]),e._v(" è·³è½¬åˆ° "),t("code",[e._v("é¡µé¢B")]),e._v(" å’Œè¿”å› "),t("code",[e._v("é¡µé¢A")]),e._v(" æ—¶ï¼Œ"),t("code",[e._v("é¡µé¢A")]),e._v(" çš„ "),t("code",[e._v("build")]),e._v(" æ–¹æ³•éƒ½ä¼šè¢«æ‰§è¡Œï¼Œé™å› "),t("code",[e._v("3.16.9")]),e._v(" åˆ™ä¸ä¼šï¼Œè¿™å°±å¾ˆå¥‡æ€ªã€‚åæ¥å‘ç°æ˜¯å› ä¸º "),t("code",[e._v("é¡µé¢A")]),e._v(" é—´æ¥ä½¿ç”¨äº† "),t("code",[e._v("ModalRoute.of")]),e._v("ã€‚")]),e._v(" "),t("p",[e._v("ä»¥ä¸‹æ˜¯å¯å¤ç°é—®é¢˜çš„ä»£ç ")]),e._v(" "),t("div",{staticClass:"language-diff extra-class"},[t("pre",{pre:!0,attrs:{class:"language-diff"}},[t("code",[e._v("class PageA extends StatefulWidget {\n"),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" @override\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" State<PageA> createState() => _PageAState();\n")])]),e._v("}\n\nclass _PageAState extends State<PageA> {\n"),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" @override\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" Widget build(BuildContext context) {\n")])]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("   // ==== è¿™é‡Œ ====\n")])]),t("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    final arguments = ModalRoute.of(context)?.settings.arguments;\n")]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v('    print("PageA arguments:$arguments");\n')])]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("   return Scaffold(\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("     appBar: AppBar(\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("       backgroundColor: Theme.of(context).colorScheme.inversePrimary,\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("       title: const Text('PageA'),\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("     ),\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("     body: const SizedBox.shrink(),\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("   );\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" }\n")])]),e._v("}\n")])])]),t("h2",{attrs:{id:"ä¸‰ã€æ¢ç´¢"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰ã€æ¢ç´¢"}},[e._v("#")]),e._v(" ä¸‰ã€æ¢ç´¢")]),e._v(" "),t("p",[e._v("åœ¨ç»è¿‡ä¸€ç•ªæ‘¸ç´¢åï¼Œå‘ç° "),t("code",[e._v("ModalRoute")]),e._v(" åœ¨ "),t("code",[e._v("3.19")]),e._v(" ä¸Šé¢æœ‰ä¸€ä¸ªå°ä¿®æ”¹~")]),e._v(" "),t("p",[e._v("ç›¸å…³ "),t("code",[e._v("issue")]),e._v(" æ˜¯: "),t("a",{attrs:{href:"https://github.com/flutter/flutter/issues/112567",target:"_blank",rel:"noopener noreferrer"}},[e._v("#112567"),t("OutboundLink")],1),e._v(" ã€‚")]),e._v(" "),t("p",[e._v("è¯¥ "),t("code",[e._v("issue")]),e._v(" ä¸»è¦æ˜¯æ¶‰åŠåœ¨ "),t("code",[e._v("Web")]),e._v(" ç«¯ä¸ŠæŒ‰ "),t("code",[e._v("Tab")]),e._v(" é”®åˆ‡æ¢ç„¦ç‚¹çš„é—®é¢˜ï¼Œåç»­æœ‰ä¸ª "),t("code",[e._v("PR")]),e._v(": "),t("a",{attrs:{href:"https://github.com/flutter/flutter/pull/130841",target:"_blank",rel:"noopener noreferrer"}},[e._v("#130841"),t("OutboundLink")],1),e._v(" è§£å†³äº†è¯¥é—®é¢˜ã€‚")]),e._v(" "),t("blockquote",[t("p",[e._v("è¯¥ "),t("code",[e._v("PR")]),e._v(" å› å†…éƒ¨æµ‹è¯•åŸå› è¿›è¡Œäº†å›æ»šï¼Œåå†é‡æ–°ç™»é™†ï¼Œç°PR: "),t("a",{attrs:{href:"https://github.com/flutter/flutter/pull/134554",target:"_blank",rel:"noopener noreferrer"}},[e._v("#134554"),t("OutboundLink")],1)])]),e._v(" "),t("p",[e._v("è€Œåœ¨è¯¥ "),t("code",[e._v("PR")]),e._v(" ä¸­å°±å¯¹ "),t("code",[e._v("ModalRoute")]),e._v(" åŠ äº†å¦‚ä¸‹ä»£ç ï¼š")]),e._v(" "),t("div",{staticClass:"language-diff extra-class"},[t("pre",{pre:!0,attrs:{class:"language-diff"}},[t("code",[e._v("// packages/flutter/lib/src/widgets/routes.dart\n\nabstract class ModalRoute<T> extends TransitionRoute<T> with LocalHistoryRoute<T> {\n"),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" ...\n")])]),t("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("  @override\n")]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("  void didChangeNext(Route<dynamic>? nextRoute) {\n")]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    super.didChangeNext(nextRoute);\n")]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    changedInternalState();\n")]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("  }\n")]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("\n")]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("  @override\n")]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("  void didPopNext(Route<dynamic> nextRoute) {\n")]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    super.didPopNext(nextRoute);\n")]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    changedInternalState();\n")]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("  }\n")]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("\n")])]),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" @override\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" void changedInternalState() {\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("   super.changedInternalState();\n")])]),t("span",{pre:!0,attrs:{class:"token deleted-sign deleted"}},[t("span",{pre:!0,attrs:{class:"token prefix deleted"}},[e._v("-")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    setState(() { /* internal state already changed */ });\n")]),t("span",{pre:!0,attrs:{class:"token prefix deleted"}},[e._v("-")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    _modalBarrier.markNeedsBuild();\n")])]),t("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    // No need to mark dirty if this method is called during build phase.\n")]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    if (SchedulerBinding.instance.schedulerPhase != SchedulerPhase.persistentCallbacks) {\n")]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("      setState(() { /* internal state already changed */ });\n")]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("      _modalBarrier.markNeedsBuild();\n")]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    }\n")])]),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("   _modalScope.maintainState = maintainState;\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" }\n")])]),e._v("...\n}\n")])])]),t("p",[t("code",[e._v("didChangeNext")]),e._v(" å’Œ "),t("code",[e._v("didPopNext")]),e._v(" è¿™ä¸¤ä¸ªæ–¹æ³•å¯¹åº”çš„å°±æ˜¯é¡µé¢çš„ "),t("code",[e._v("push")]),e._v(" å’Œ "),t("code",[e._v("pop")]),e._v("ï¼Œç°åœ¨åœ¨è¯¥ "),t("code",[e._v("PR")]),e._v(" ä¸­é‡å†™å¹¶è°ƒç”¨äº† "),t("code",[e._v("changedInternalState")]),e._v(" æ–¹æ³•ï¼Œåœ¨ "),t("code",[e._v("changedInternalState")]),e._v(" æ–¹æ³•ä¸­è°ƒç”¨äº† "),t("code",[e._v("setState")]),e._v("ã€‚")]),e._v(" "),t("p",[e._v("ä¸‹é¢å°†ä»¥é«˜äº®çš„æ–¹å¼æ ‡å‡ºé‡ç‚¹ä»£ç ï¼ˆä¸æ˜¯æ–°å¢ä»£ç ï¼‰ã€‚")]),e._v(" "),t("div",{staticClass:"language-diff extra-class"},[t("pre",{pre:!0,attrs:{class:"language-diff"}},[t("code",[e._v("abstract class ModalRoute<T> extends TransitionRoute<T> with LocalHistoryRoute<T> {\n"),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" ...\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" @protected\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" void setState(VoidCallback fn) {\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("   if (_scopeKey.currentState != null) {\n")])]),t("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("      _scopeKey.currentState!._routeSetState(fn);\n")])]),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("   } else {\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("     // The route isn't currently visible, so we don't have to call its setState\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("     // method, but we do still need to call the fn callback, otherwise the state\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("     // in the route won't be updated!\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("     fn();\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("   }\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" }\n")])]),e._v("...\n}\n")])])]),t("p",[e._v("è¿™ä¸ª "),t("code",[e._v("ModalRoute")]),e._v(" å†…çš„ "),t("code",[e._v("setState")]),e._v(" ä¼šä½¿ "),t("code",[e._v("_ModalScopeStatus")]),e._v(" çš„ "),t("code",[e._v("_routeSetState")]),e._v(" è¢«è°ƒç”¨ï¼Œç„¶åè§¦å‘ "),t("code",[e._v("_ModalScopeState")]),e._v(" çš„ "),t("code",[e._v("setState")]),e._v("ï¼Œæ¥ç€å…¶ "),t("code",[e._v("child: _ModalScopeStatus")]),e._v(" å°±å¼€å§‹ "),t("code",[e._v("rebuild")]),e._v(" äº†ã€‚")]),e._v(" "),t("div",{staticClass:"language-diff extra-class"},[t("pre",{pre:!0,attrs:{class:"language-diff"}},[t("code",[e._v("class _ModalScopeState<T> extends State<_ModalScope<T>> {\n"),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" ...\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" void _routeSetState(VoidCallback fn) {\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("   if (widget.route.isCurrent && !_shouldIgnoreFocusRequest && _shouldRequestFocus) {\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("     widget.route.navigator!.focusNode.enclosingScope?.setFirstFocus(focusScopeNode);\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("   }\n")])]),t("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    setState(fn);\n")])]),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" }\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" \n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" \n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" @override\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" Widget build(BuildContext context) {\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("   return AnimatedBuilder(\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("     ...\n")])]),t("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("      child: _ModalScopeStatus(\n")])]),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("       ...\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("     ),\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("   );\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" }\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" ...\n")])]),e._v("}\n")])])]),t("p",[e._v("å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œ"),t("code",[e._v("_ModalScopeStatus")]),e._v(" æ˜¯ä¸€ä¸ª "),t("code",[e._v("InheritedWidget")]),e._v("ï¼Œåœ¨ç»è¿‡ä¸€ç³»åˆ—çš„å¤„ç†åæœ€ç»ˆä¼šèµ°åˆ°å…¶ "),t("code",[e._v("InheritedElement")]),e._v(" çš„ "),t("code",[e._v("update")]),e._v(" æ–¹æ³•ï¼Œåœ¨ "),t("code",[e._v("update")]),e._v(" æ–¹æ³•ä¸­é€šè¿‡è°ƒç”¨ "),t("code",[e._v("updateShouldNotify")]),e._v(" æ¥åˆ¤æ–­æ•°æ®æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œè¿›è€Œå†³å®šæ˜¯å¦é€šçŸ¥ç›¸å…³ä¾èµ–ã€‚")]),e._v(" "),t("div",{staticClass:"language-diff extra-class"},[t("pre",{pre:!0,attrs:{class:"language-diff"}},[t("code",[t("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" class _ModalScopeStatus extends InheritedWidget {\n")])]),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" ...\n")])]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" @override\n")])]),t("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("  bool updateShouldNotify(_ModalScopeStatus old) {\n")]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    return isCurrent != old.isCurrent ||\n")])]),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("          canPop != old.canPop ||\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("          impliesAppBarDismissal != old.impliesAppBarDismissal ||\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("          route != old.route;\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" }\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" ...\n")])]),e._v("}\n")])])]),t("div",{staticClass:"language-diff extra-class"},[t("pre",{pre:!0,attrs:{class:"language-diff"}},[t("code",[e._v("class InheritedElement extends ProxyElement {\n"),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" ...\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" @override\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" void updated(InheritedWidget oldWidget) {\n")])]),t("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    if ((widget as InheritedWidget).updateShouldNotify(oldWidget)) {\n")])]),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("     super.updated(oldWidget);\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("   }\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" }\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" ...\n")])]),e._v("}\n")])])]),t("p",[t("code",[e._v("_ModalScopeStatus")]),e._v(" çš„ "),t("code",[e._v("isCurrent")]),e._v(" è¡¨ç¤ºå½“å‰é¡µé¢æ˜¯å¦å¤„äºæœ€ä¸Šå±‚ï¼Œæ‰€ä»¥åœ¨æ‰“å¼€å’Œå…³é—­ä¸‹ä¸€ä¸ªé¡µé¢æ—¶ï¼Œå…¶å€¼å¿…å®šåˆ‡æ¢ï¼Œä¹Ÿå°±æ˜¯ "),t("code",[e._v("updateShouldNotify")]),e._v(" å¿…å®šè¿”å› "),t("code",[e._v("true")]),e._v("ï¼Œæ—¢è€Œé€šçŸ¥ä¾èµ–ï¼ˆå®é™…ä¸Šå°±æ˜¯æ‰¾å‡ºä¸€ä¸ªä¸ªä¾èµ–è¿›è¡Œæ ‡è„ï¼Œç„¶åç­‰å¾… "),t("code",[e._v("build")]),e._v(" æ–¹æ³•çš„é‡æ–°è°ƒç”¨ï¼‰ã€‚")]),e._v(" "),t("p",[e._v("è€Œæˆ‘ä»¬åœ¨ä½¿ç”¨ "),t("code",[e._v("ModalRoute.of")]),e._v(" çš„æ—¶å€™ï¼Œå†…éƒ¨å°±æ˜¯å°†å½“å‰é¡µçš„ "),t("code",[e._v("BuildContext")]),e._v(" æ·»åŠ åˆ°ä¾èµ–ä¸­ï¼Œæ‰€ä»¥ä»–è¿™ä¸ªæ”¹åŠ¨å°±ä¼šå½±å“åˆ°ä½¿ç”¨ "),t("code",[e._v("ModalRoute.of")]),e._v(" çš„ "),t("code",[e._v("Widget")]),e._v("ï¼Œä½¿å…¶å¤šæ¬¡ "),t("code",[e._v("rebuild")]),e._v("ã€‚")]),e._v(" "),t("div",{staticClass:"language-dart extra-class"},[t("pre",{pre:!0,attrs:{class:"language-dart"}},[t("code",[t("span",{pre:!0,attrs:{class:"token metadata function"}},[e._v("@optionalTypeArgs")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("static")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ModalRoute")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("T")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("?")]),e._v(" of"),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("T")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Object")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("?")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("BuildContext")]),e._v(" context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("final")]),e._v(" _ModalScopeStatus"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("?")]),e._v(" widget "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("dependOnInheritedWidgetOfExactType"),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),e._v("_ModalScopeStatus"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("return")]),e._v(" widget"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("?")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("route "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("as")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ModalRoute")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("T")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("?")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("h2",{attrs:{id:"å››ã€è§£å†³æ–¹æ¡ˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å››ã€è§£å†³æ–¹æ¡ˆ"}},[e._v("#")]),e._v(" å››ã€è§£å†³æ–¹æ¡ˆ")]),e._v(" "),t("h3",{attrs:{id:"æ–¹æ¡ˆä¸€-è°ƒæ•´-modalroute-of"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ¡ˆä¸€-è°ƒæ•´-modalroute-of"}},[e._v("#")]),e._v(" æ–¹æ¡ˆä¸€ï¼šè°ƒæ•´ "),t("code",[e._v("ModalRoute.of")])]),e._v(" "),t("p",[e._v("åœ¨å½“å‰ç‰ˆæœ¬ä¸­ï¼Œ"),t("code",[e._v("of")]),e._v(" çš„ç”¨æ„å°±æ˜¯æ‰¾åˆ°ç›¸åº”çš„ "),t("code",[e._v("ModalRoute")]),e._v(" å¹¶ä¸”åˆ›å»ºä¾èµ–å…³ç³»ï¼Œå½“æ•°æ®æ”¹å˜æ—¶ä¼šé‡æ–° "),t("code",[e._v("build")]),e._v(" ï¼Œè¿™æ˜¯ç¬¦åˆå®ƒæœŸæœ›ç”¨æ„çš„ã€‚")]),e._v(" "),t("p",[e._v("ä½†æ˜¯æœ‰äº›åœºæ™¯ä¸‹æˆ‘ä»¬å¹¶ä¸å¸Œæœ›æœ‰è¿™ä¸ª â€œ"),t("strong",[e._v("ç‰¹æ€§")]),e._v("â€ï¼Œæ¯”å¦‚ï¼Œæˆ‘æ‰“å¼€æ–°é¡µé¢åï¼Œé€šè¿‡ "),t("code",[e._v("ModalRoute.of(context)?.settings.arguments")]),e._v(" å–è·¯ç”±å‚æ•°ï¼Œå½“å‰é¡µé¢çš„å–å‚ï¼Œä¸è·³è½¬å’Œå…³é—­ä¸‹ä¸ªé¡µé¢æ˜¯æ²¡æœ‰ä»»ä½•å…³ç³»çš„ï¼Œæ‰€ä»¥è¿™ç§åœºæ™¯ä¸‹è§¦å‘ "),t("code",[e._v("rebuild")]),e._v(" å°†æ¯«æ— æ„ä¹‰ã€‚")]),e._v(" "),t("p",[e._v("æ‰€ä»¥æˆ‘æäº†ä¸ª "),t("code",[e._v("PR")]),e._v(": "),t("a",{attrs:{href:"https://github.com/flutter/flutter/pull/145389",target:"_blank",rel:"noopener noreferrer"}},[e._v("#145389"),t("OutboundLink")],1),e._v(", ç»™ "),t("code",[e._v("ModalRoute.of")]),e._v(" æ·»åŠ äº† "),t("code",[e._v("createDependency")]),e._v(" å‚æ•°ï¼Œä¸ºå¼€å‘è€…æä¾›äº†æ˜¯å¦åˆ›å»ºä¾èµ–çš„é€‰æ‹©ã€‚ç›®å‰è¿˜åœ¨å®¡æ ¸ä¸­~")]),e._v(" "),t("div",{staticClass:"language-dart extra-class"},[t("pre",{pre:!0,attrs:{class:"language-dart"}},[t("code",[e._v("  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("static")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ModalRoute")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("T")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("?")]),e._v(" of"),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("T")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("extends")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Object")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("?")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("BuildContext")]),e._v(" context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    bool createDependency "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    _ModalScopeStatus"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("?")]),e._v(" widget"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("if")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("createDependency"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      widget "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("dependOnInheritedWidgetOfExactType"),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),e._v("_ModalScopeStatus"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("else")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      widget "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" context\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("getElementForInheritedWidgetOfExactType"),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),e._v("_ModalScopeStatus"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n          "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("?")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("widget "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("as")]),e._v(" _ModalScopeStatus"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("?")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("return")]),e._v(" widget"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("?")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("route "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("as")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ModalRoute")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("T")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("?")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("h3",{attrs:{id:"æ–¹æ¡ˆäºŒ-é­”æ”¹æºç "}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ¡ˆäºŒ-é­”æ”¹æºç "}},[e._v("#")]),e._v(" æ–¹æ¡ˆäºŒï¼šé­”æ”¹æºç ")]),e._v(" "),t("p",[e._v("åŸ "),t("code",[e._v("PR")]),e._v(" æ˜¯å¯¹ "),t("code",[e._v("Tab")]),e._v(" é”®åˆ‡æ¢ç„¦ç‚¹é—®é¢˜çš„ä¿®å¤ï¼Œä½†å¯¹äºç§»åŠ¨ç«¯æ¥è¯´æ ¹æœ¬ä¸ç®—é—®é¢˜ï¼Œå› ä¸ºç”¨ä¸ä¸Š~ ğŸ˜… ï¼ˆå½“ç„¶ï¼Œå¦‚æœä½ ä»¬çš„ç”¨æˆ·æœ‰ä½¿ç”¨æ— éšœç¢åŠŸèƒ½çš„ï¼Œè¿˜éœ€è¦è‡ªè¡Œæ–Ÿé…Œä¸€ä¸‹ï¼‰")]),e._v(" "),t("p",[e._v("å¦‚æœè¿™ä¸ªé—®é¢˜åˆ°æ—¶è¿˜æœªè§£å†³ï¼ˆåŸ "),t("code",[e._v("PR")]),e._v(" çš„ä½œè€…è¿˜åœ¨ä¼‘å‡ï¼‰ï¼Œé‚£æˆ‘ä»¬ä¹Ÿå¯ä»¥å…ˆæ³¨é‡Šæ‰ç›¸å…³ä»£ç å¯¹ "),t("code",[e._v("changedInternalState")]),e._v(" çš„è°ƒç”¨æ¥åº”å¯¹")]),e._v(" "),t("div",{staticClass:"language-diff extra-class"},[t("pre",{pre:!0,attrs:{class:"language-diff"}},[t("code",[e._v("// packages/flutter/lib/src/widgets/routes.dart\n\nabstract class ModalRoute<T> extends TransitionRoute<T> with LocalHistoryRoute<T> {\n"),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" ...\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" @override\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" void didChangeNext(Route<dynamic>? nextRoute) {\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("   super.didChangeNext(nextRoute);\n")])]),t("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    // changedInternalState();\n")])]),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" }\n")])]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" @override\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" void didPopNext(Route<dynamic> nextRoute) {\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("   super.didPopNext(nextRoute);\n")])]),t("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    // changedInternalState();\n")])]),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v(" }\n")])]),e._v("}\n")])])]),t("p",[e._v("æä¾›ä¸€ä¸ªè¡¥ä¸")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# è¿›å…¥ä½ çš„ flutter ç›®å½•ï¼Œæ¯”å¦‚æˆ‘ç”¨çš„æ˜¯ fvm ä¸‹è½½çš„ 3.19.3")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# è®°å¾—å°† cd åé¢çš„è·¯å¾„æ¢æˆä½ è‡ªå·±ç”µè„‘ä¸Šçš„~")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" /Users/lxf/fvm/versions/3.19.3\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# ä¸‹è½½è¡¥ä¸")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-O")]),e._v(" https://raw.githubusercontent.com/LinXunFeng/flutter_assets/main/patch/01_rollbak_3_19_routes_change/0001-Roll-back-changes-to-routes.dart.patch\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# åº”ç”¨è¡¥ä¸")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" apply 0001-Roll-back-changes-to-routes.dart.patch\n")])])]),t("h2",{attrs:{id:"äº”ã€æœ€å"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#äº”ã€æœ€å"}},[e._v("#")]),e._v(" äº”ã€æœ€å")]),e._v(" "),t("p",[e._v("æ€»è€Œè¨€ä¹‹ï¼Œè·ç¦»5æœˆ1æ—¥ï¼ˆè‹¹æœå¼ºåˆ¶è¦æ±‚æ·»åŠ éšç§æ¸…å•æ–‡ä»¶çš„æœŸé™ï¼‰è¿˜æœ‰ä¸€ä¸ªæœˆï¼Œæˆ‘ä»¬ç°åœ¨å¤§å¯ä¿æŒåœ¨ "),t("code",[e._v("3.13")]),e._v(" ç‰ˆæœ¬å…ˆç”¨ç€ï¼Œå…å¾—æŠ˜è…¾ï¼ŒåŒæ—¶ä¹Ÿç¥ˆç¥·å¿«ç‚¹ä¿®å¤è¯¥é—®é¢˜ï¼Œç„¶åé¡ºåˆ©å‡çº§ä¸Šå»~")])])}),[],!1,null,null,null);t.default=n.exports}}]);