(window.webpackJsonp=window.webpackJsonp||[]).push([[152],{560:function(e,t,s){"use strict";s.r(t);var a=s(21),r=Object(a.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"ä¸€ã€æ¦‚è¿°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€æ¦‚è¿°"}},[e._v("#")]),e._v(" ä¸€ã€æ¦‚è¿°")]),e._v(" "),t("p",[e._v("æœ€è¿‘å‡†å¤‡ä½¿ç”¨ "),t("code",[e._v("Flutter")]),e._v(" çš„ "),t("code",[e._v("3.24")]),e._v(" ç‰ˆæœ¬æ‰“åŒ…ä¸Šæ¶ "),t("code",[e._v("APP")]),e._v("ï¼Œç»“æœå‰å¤©çœ‹åˆ°æœ‰äººæäº†ä¸€ä¸ª "),t("code",[e._v("issue")]),e._v(": "),t("a",{attrs:{href:"https://github.com/flutter/flutter/issues/158423",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/flutter/flutter/issues/158423"),t("OutboundLink")],1),e._v(" ï¼Œè¯´åˆ†åˆ«ä½¿ç”¨ "),t("code",[e._v("3.24.3")]),e._v(" å’Œ "),t("code",[e._v("3.24.4")]),e._v(" æäº¤è‹¹æœå®¡æ ¸æ—¶ï¼Œéƒ½æƒ¨é­è¢«æ‹’~")]),e._v(" "),t("p",[e._v("è‹¹æœåé¦ˆçš„ä¿¡æ¯å¦‚ä¸‹ï¼š")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Guideline 2.5.1 - Performance - Software Requirements\n\nThe app uses or references the following non-public or deprecated APIs:\n\nFrameworks/Flutter.framework/Flutter\n\nSymbols:\n\nâ€¢ _kCTFontPaletteAttribute\nâ€¢ _kCTFontPaletteColorsAttribute\n\nThe use of non-public or deprecated APIs is not permitted, as they can lead to a poor user experience should these APIs change and are otherwise not supported on Apple platforms.\n")])])]),t("p",[e._v("å¯ä»¥çœ‹åˆ°ï¼Œæ˜¯è¯´ "),t("code",[e._v("Flutter")]),e._v(" ä½¿ç”¨äº†æœªå…¬å¼€çš„ "),t("code",[e._v("API")]),e._v("ï¼Œå¹¶ä¸”ä»–ä½¿ç”¨ "),t("code",[e._v("strings")]),e._v(" å‘½ä»¤ä¹ŸéªŒè¯äº†è¿™ä¸€ç‚¹ã€‚")]),e._v(" "),t("p",[t("code",[e._v("3.24.x")])]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("strings Runner.app/Frameworks/Flutter.framework/Flutter "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("grep")]),e._v(" kCT\nSkCTMShader\nkCTFontVariationAxisHiddenKey\nkCTFontPaletteAttribute\nkCTFontPaletteColorsAttribute\n")])])]),t("p",[t("code",[e._v("3.22.3")])]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("strings Runner.app/Frameworks/Flutter.framework/Flutter "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("grep")]),e._v(" kCT\nSkCTMShader\nkCTFontVariationAxisHiddenKey\n")])])]),t("p",[e._v("æˆ‘å…ˆåœ¨ "),t("code",[e._v("Flutter")]),e._v(" å¼•æ“æºç ä¸­æœç´¢ï¼Œç»“æœå‹æ ¹å°±æœç´¢ä¸åˆ°ï¼Œéšåæ‰“å¼€äº†å‰å‡ æ—¥ç¼–è¯‘å¥½çš„å¼•æ“è°ƒè¯•é¡¹ç›®ï¼Œç»“æœä¸€æœä¸€ä¸ªå‡†ï¼Œåœ¨ "),t("code",[e._v("third_party")]),e._v(" ä¾èµ–ä¸‹çš„ "),t("code",[e._v("Skia")]),e._v(" ä»£ç ä¸­ï¼Œå¾ˆå¿«å°±å®šä½åˆ°äº†å¼•å…¥æœªå…¬å¼€ "),t("code",[e._v("API")]),e._v(" çš„ç›¸å…³æäº¤è®°å½• "),t("a",{attrs:{href:"https://skia-review.googlesource.com/c/skia/+/867836",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://skia-review.googlesource.com/c/skia/+/867836"),t("OutboundLink")],1),e._v(" ã€‚")]),e._v(" "),t("p",[e._v("æˆ‘ä¸€çœ‹å®Œå°±å•ªçš„ä¸€å£°æ•²èµ·æ¥äº†ï¼Œå¾ˆå¿«å•Šï¼ä¸Šæ¥å°±æ˜¯ä¸€ä¸ª "),t("code",[e._v("Revert")]),e._v(" "),t("a",{attrs:{href:"https://skia-review.googlesource.com/c/skia/+/918416",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://skia-review.googlesource.com/c/skia/+/918416"),t("OutboundLink")],1),e._v(" ã€‚")]),e._v(" "),t("p",[e._v("ç›®å‰æ­¤æ¬¡å—å½±å“çš„ "),t("code",[e._v("Flutter")]),e._v(" ç‰ˆæœ¬èŒƒå›´æš‚æ—¶æ˜¯ "),t("code",[e._v("3.24.0")]),e._v(" ~ "),t("code",[e._v("3.24.4")]),e._v("ï¼Œå¾—ç­‰å¾…æ–°ç‰ˆæœ¬çš„å‘å¸ƒæ‰å¯ä»¥è§£å†³ã€‚å»ºè®®è¿˜æ²¡ç”¨ä¸Š "),t("code",[e._v("3.24")]),e._v(" çš„å°ä¼™ä¼´å…ˆä¸è¦å‡çº§ï¼Œé‚£å¦‚æœå·²ç»æ˜¯ "),t("code",[e._v("3.24")]),e._v(" æˆ–è€…æ˜¯ä¸€å®šè¦ç”¨ "),t("code",[e._v("3.24.4")]),e._v(" åŠä»¥ä¸‹ç‰ˆæœ¬çš„å°ä¼™ä¼´è¦æ€ä¹ˆåŠå‘¢ï¼Ÿé‚£å°±è·Ÿæˆ‘ä¸€èµ·æ¥è‡ªç¼–è¯‘å¼•æ“å§~")]),e._v(" "),t("h2",{attrs:{id:"äºŒã€ç¼–è¯‘å¼•æ“"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€ç¼–è¯‘å¼•æ“"}},[e._v("#")]),e._v(" äºŒã€ç¼–è¯‘å¼•æ“")]),e._v(" "),t("h3",{attrs:{id:"ç¯å¢ƒ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¯å¢ƒ"}},[e._v("#")]),e._v(" ç¯å¢ƒ")]),e._v(" "),t("blockquote",[t("p",[e._v("æ³¨æ„ï¼šå…¨ç¨‹éœ€è¦ç§‘å­¦ä¸Šç½‘ç¯å¢ƒï¼Œè¯·è‡ªè¡ŒæŸ¥æ‰¾å’Œé…ç½®")])]),e._v(" "),t("p",[e._v("é¦–å…ˆæ‹‰å–æœ€æ–°çš„ "),t("code",[e._v("depot_tools")]),e._v("ï¼Œæ”¾åˆ°ä¸€ä¸ªåˆé€‚çš„ä½ç½®ï¼Œæ¯”å¦‚æˆ‘æ”¾åœ¨ "),t("code",[e._v("~/development")]),e._v(" ç›®å½•ä¸‹")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" ~/development\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" clone https://chromium.googlesource.com/chromium/tools/depot_tools.git\n")])])]),t("p",[e._v("å°† "),t("code",[e._v("depot_tools")]),e._v(" æ·»åŠ è‡³ç¯å¢ƒå˜é‡ï¼Œåœ¨ä½ çš„ç»ˆç«¯é…ç½®æ–‡ä»¶é‡Œè¡¥å……å¦‚ä¸‹å†…å®¹")]),e._v(" "),t("blockquote",[t("p",[e._v("ç»ˆç«¯é…ç½®æ–‡ä»¶å› äººè€Œå¼‚ï¼Œå¦‚ï¼š"),t("code",[e._v("~/.bash_profile")]),e._v("ã€"),t("code",[e._v("~/.zshrc")]),e._v("ã€"),t("code",[e._v("~/.zprofile")]),e._v("ï¼Œè¯·è‡ªè¡Œåˆ¤æ–­")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('export PATH = "$HOME/development/depot_tools":$PATH\n')])])]),t("p",[e._v("ç„¶å "),t("code",[e._v("source ~/.zshrc")]),e._v("ï¼ˆè¿™é‡Œè¯·æ ¹æ®è‡ªèº«æƒ…å†µä¿®æ”¹ç»ˆç«¯é…ç½®æ–‡ä»¶è·¯å¾„ï¼‰")]),e._v(" "),t("h3",{attrs:{id:"æ‹‰æºç "}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ‹‰æºç "}},[e._v("#")]),e._v(" æ‹‰æºç ")]),e._v(" "),t("p",[e._v("æ‰¾ä¸ªåˆé€‚çš„ç›®å½•ï¼Œåˆ›å»º "),t("code",[e._v("engine")]),e._v(" ç›®å½•å¹¶è¿›å…¥")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("mkdir engine\ncd engine\n")])])]),t("p",[e._v("å¼€å§‹æ‹‰å–æºç ")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("fetch flutter\n")])])]),t("p",[e._v("å®ƒä¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»º "),t("code",[e._v(".gclient")]),e._v(" æ–‡ä»¶ï¼Œå†™å¥½é…ç½®ï¼Œå¹¶æ‰§è¡Œ "),t("code",[e._v("gclient sync")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('solutions = [\n  {\n    "custom_deps": {},\n    "deps_file": "DEPS",\n    "managed": False,\n    "name": "src/flutter",\n    "safesync_url": "",\n    "url": "https://github.com/flutter/engine.git",\n  },\n]\n')])])]),t("p",[e._v("å¦‚æœåœ¨æ‹‰å–ä»£ç çš„è¿‡ç¨‹ä¸­é‡åˆ°å¦‚ä¸‹é—®é¢˜")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("remote: Enumerating objects: 835563, done.\nremote: Counting objects: 100% (1612/1612), done.\nremote: Compressing objects: 100% (1011/1011), done.\nerror: RPC failed; curl 92 HTTP/2 stream 5 was not closed cleanly: CANCEL (err 8)\nerror: 1481 bytes of body are still expected\nfetch-pack: unexpected disconnect while reading sideband packet\nfatal: early EOF\nfatal: fetch-pack: invalid index-pack output\n\nsrc/flutter (ERROR)\n----------------------------------------\n[0:00:00] Started.\n")])])]),t("p",[e._v("åˆ«æ…Œï¼Œæ‰§è¡Œä¸‹æ–¹å‘½ä»¤è®©å…¶æ¥ç€æ‹‰ï¼Œç›´è‡³å®Œæˆ")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("gclient "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sync")]),e._v("\n")])])]),t("p",[e._v("æ‹‰å–å®Œæˆåï¼Œå»æŸ¥çœ‹æˆ‘ä»¬ä½¿ç”¨çš„ "),t("code",[e._v("Flutter")]),e._v(" ç‰ˆæœ¬å¯¹åº”çš„å¼•æ“ç‰ˆæœ¬ï¼Œè¿™é‡Œä»¥ "),t("code",[e._v("3.24.4")]),e._v(" ä¸ºä¾‹ï¼Œæ‰“å¼€é“¾æ¥ï¼šhttps://github.com/flutter/flutter/blob/3.24.4/bin/internal/engine.version ï¼Œæ‹¿åˆ° "),t("code",[e._v("db49896cf25ceabc44096d5f088d86414e05a7aa")])]),e._v(" "),t("p",[e._v("æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è¿›è¡Œåˆ‡æ¢")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("cd src/flutter\ngit checkout db49896cf25ceabc44096d5f088d86414e05a7aa\n")])])]),t("p",[e._v("æ‰§è¡Œå®Œæˆä¼šè¾“å‡ºå¦‚ä¸‹å†…å®¹")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('Previous HEAD position was b0a4ca92c4 Add FlPointerManager to process pointer events from GTK in a form suitable for Flutter. (#56443)\nHEAD is now at db49896cf2 [CP-stable]Add xcprivacy privacy manifest to macOS framework (#55366)\npost-checkout: The engine source tree has been updated.\n\nYou may need to run "gclient sync -D"\n')])])]),t("p",[e._v("æŒ‰ç…§æç¤ºæ‰§è¡Œ")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("gclient sync -D\n")])])]),t("h3",{attrs:{id:"è°ƒæ•´æºç "}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è°ƒæ•´æºç "}},[e._v("#")]),e._v(" è°ƒæ•´æºç ")]),e._v(" "),t("p",[e._v("æŒ‰è·¯å¾„ "),t("code",[e._v("engine/src/flutter/third_party/skia/src/ports/SkTypeface_mac_ct.cpp")]),e._v(" æ‰“å¼€æ–‡ä»¶ï¼ŒæŒ‰ä¸‹æ–¹å†…å®¹è¿›è¡Œä¿®æ”¹ï¼ˆçº¢ï¼šåˆ é™¤ï¼Œç»¿ï¼šæ–°å¢ï¼‰")]),e._v(" "),t("div",{staticClass:"language-diff extra-class"},[t("pre",{pre:!0,attrs:{class:"language-diff"}},[t("code",[e._v("static CFStringRef getCTFontPaletteAttribute() {\n"),t("span",{pre:!0,attrs:{class:"token deleted-sign deleted"}},[t("span",{pre:!0,attrs:{class:"token prefix deleted"}},[e._v("-")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    static CFStringRef* kCTFontPaletteAttributePtr =\n")]),t("span",{pre:!0,attrs:{class:"token prefix deleted"}},[e._v("-")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v('        static_cast<CFStringRef*>(dlsym(RTLD_DEFAULT, "kCTFontPaletteAttribute"));\n')]),t("span",{pre:!0,attrs:{class:"token prefix deleted"}},[e._v("-")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    return *kCTFontPaletteAttributePtr;\n")])]),t("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    return nullptr;\n")]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    //static CFStringRef* kCTFontPaletteAttributePtr =\n")]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v('    //    static_cast<CFStringRef*>(dlsym(RTLD_DEFAULT, "kCTFontPaletteAttribute"));\n')]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    //return *kCTFontPaletteAttributePtr;\n")])]),e._v("}\nstatic CFStringRef getCTFontPaletteColorsAttribute() {\n"),t("span",{pre:!0,attrs:{class:"token deleted-sign deleted"}},[t("span",{pre:!0,attrs:{class:"token prefix deleted"}},[e._v("-")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    static CFStringRef* kCTFontPaletteColorsAttributePtr =\n")]),t("span",{pre:!0,attrs:{class:"token prefix deleted"}},[e._v("-")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v('        static_cast<CFStringRef*>(dlsym(RTLD_DEFAULT, "kCTFontPaletteColorsAttribute"));\n')]),t("span",{pre:!0,attrs:{class:"token prefix deleted"}},[e._v("-")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    return *kCTFontPaletteColorsAttributePtr;\n")])]),t("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    return nullptr;\n")]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    //static CFStringRef* kCTFontPaletteColorsAttributePtr =\n")]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v('    //    static_cast<CFStringRef*>(dlsym(RTLD_DEFAULT, "kCTFontPaletteColorsAttribute"));\n')]),t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    //return *kCTFontPaletteColorsAttributePtr;\n")])]),e._v("}\n\n...\n\nstatic bool apply_palette(CFMutableDictionaryRef attributes,\n"),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("                         const SkFontArguments::Palette& palette) {\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("   bool changedAttributes = false;\n")])]),t("span",{pre:!0,attrs:{class:"token deleted-sign deleted"}},[t("span",{pre:!0,attrs:{class:"token prefix deleted"}},[e._v("-")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    if (palette.index != 0 || palette.overrideCount) {\n")])]),t("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    if ((palette.index != 0 || palette.overrideCount) && getCTFontPaletteAttribute()) {\n")])]),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("       SkUniqueCFRef<CFNumberRef> paletteIndex(\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("               CFNumberCreate(kCFAllocatorDefault, kCFNumberIntType, &palette.index));\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("       CFDictionarySetValue(attributes, getCTFontPaletteAttribute(), paletteIndex.get());\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("       changedAttributes = true;\n")]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("   }\n")])]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token deleted-sign deleted"}},[t("span",{pre:!0,attrs:{class:"token prefix deleted"}},[e._v("-")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    if (palette.overrideCount) {\n")])]),t("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("    if (palette.overrideCount && getCTFontPaletteColorsAttribute()) {\n")])]),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("       SkUniqueCFRef<CFMutableDictionaryRef> overrides(\n")])]),e._v("\n...\n")])])]),t("p",[e._v("ç›¸åº”ä¿®æ”¹æ¥è‡ª: "),t("a",{attrs:{href:"https://skia-review.googlesource.com/c/skia/+/918518",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://skia-review.googlesource.com/c/skia/+/918518"),t("OutboundLink")],1)]),e._v(" "),t("h3",{attrs:{id:"ç¼–è¯‘"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–è¯‘"}},[e._v("#")]),e._v(" ç¼–è¯‘")]),e._v(" "),t("p",[e._v("æ¥åˆ° "),t("code",[e._v("engine/src")]),e._v(" ç›®å½•ï¼Œä½¿ç”¨ "),t("code",[e._v("gn")]),e._v(" ç¼–è¯‘ç”Ÿæˆ "),t("code",[e._v("ninja")]),e._v(" æ„å»ºæ–‡ä»¶")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("./flutter/tools/gn --runtime-mode release --mac-cpu arm64\n./flutter/tools/gn --ios --runtime-mode release\n")])])]),t("p",[e._v("ä½¿ç”¨ "),t("code",[e._v("ninja")]),e._v(" ç¼–è¯‘å¼•æ“çš„æœ€ç»ˆäº§ç‰©")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("ninja -C out/host_release_arm64\nninja -C out/ios_release\n")])])]),t("p",[e._v("å¦‚æœä½ å½“å‰æ˜¯ "),t("code",[e._v("MacOS 15")]),e._v(" çš„ "),t("code",[e._v("Sequoia")]),e._v(" ç³»ç»Ÿï¼Œåœ¨æ‰§è¡Œ "),t("code",[e._v("ninja -C out/host_release_arm64")]),e._v(" æ—¶ä¼šé‡åˆ°å¦‚ä¸‹é”™è¯¯")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("COPY '/System/Library/Fonts/A...arty/txt/assets/Apple Color Emoji.ttc'\nFAILED: gen/flutter/third_party/txt/assets/Apple Color Emoji.ttc\nln -f '/System/Library/Fonts/Apple Color Emoji.ttc' 'gen/flutter/third_party/txt/assets/Apple Color Emoji.ttc' 2>/dev/null || (rm -rf 'gen/flutter/third_party/txt/assets/Apple Color Emoji.ttc' && cp -af '/System/Library/Fonts/Apple Color Emoji.ttc' 'gen/flutter/third_party/txt/assets/Apple Color Emoji.ttc')\ncp: chflags: gen/flutter/third_party/txt/assets/Apple Color Emoji.ttc: Operation not permitted\n[18/4139] SOLINK libvk_swiftshader.dylib libvk_swiftshader.dylib.TOC\nninja: build stopped: subcommand failed.\n")])])]),t("p",[e._v("åˆ«æ€¥ï¼Œæ‰“å¼€ "),t("code",[e._v("engine/src/build/toolchain/mac/BUILD.gn")]),e._v("ï¼Œåšå¦‚ä¸‹ä¿®æ”¹ï¼Œä¿®æ”¹å®Œå†æ‰§è¡Œ "),t("code",[e._v("gn")]),e._v(" å’Œ "),t("code",[e._v("ninja")])]),e._v(" "),t("div",{staticClass:"language-diff extra-class"},[t("pre",{pre:!0,attrs:{class:"language-diff"}},[t("code",[t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v('   tool("copy") {\n')])]),t("span",{pre:!0,attrs:{class:"token deleted-sign deleted"}},[t("span",{pre:!0,attrs:{class:"token prefix deleted"}},[e._v("-")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v('      command = "ln -f {{source}} {{output}} 2>/dev/null || (rm -rf {{output}} && cp -af {{source}} {{output}})"\n')])]),t("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[t("span",{pre:!0,attrs:{class:"token prefix inserted"}},[e._v("+")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v('      command = "ln -f {{source}} {{output}} 2>/dev/null || (rsync -a --delete {{source}} {{output}})"\n')])]),t("span",{pre:!0,attrs:{class:"token unchanged"}},[t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v('     description = "COPY {{source}} {{output}}"\n')]),t("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[e._v(" ")]),t("span",{pre:!0,attrs:{class:"token line"}},[e._v("   }\n")])])])])]),t("p",[e._v("ç›¸åº”çš„ "),t("code",[e._v("issue")]),e._v(": "),t("a",{attrs:{href:"https://github.com/flutter/flutter/issues/152978",target:"_blank",rel:"noopener noreferrer"}},[e._v("#152978"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("å¥½äº†ï¼Œé™é™ç­‰å¾…ç¼–è¯‘å®Œæˆã€‚")]),e._v(" "),t("p",[e._v("è¯·æ³¨æ„ï¼Œè¿™å°†æ˜¯ä¸ªååˆ†æ¼«é•¿ä¸”å…¨ç¨‹ "),t("code",[e._v("CPU")]),e._v(" å ç”¨ç‡ä¸º "),t("code",[e._v("100%")]),e._v(" çš„è¿‡ç¨‹~")]),e._v(" "),t("p",[e._v("å»ºè®®ä½¿ç”¨ä¸€å°ç©ºé—²çš„ "),t("code",[e._v("Mac")]),e._v(" ç”µè„‘å»åšè¿™ä¸ªäº‹ï¼å¦åˆ™ä½ å°†å•¥æ´»ä¹Ÿå¹²ä¸äº†~")]),e._v(" "),t("h3",{attrs:{id:"éªŒè¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#éªŒè¯"}},[e._v("#")]),e._v(" éªŒè¯")]),e._v(" "),t("p",[e._v("è¿›å…¥ "),t("code",[e._v("engine/src/out/ios_release")])]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("strings Flutter.framework/Flutter "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("grep")]),e._v(" kCT\n\nSkCTMShader\nkCTFontVariationAxisHiddenKey\n")])])]),t("p",[e._v("å¯ä»¥çœ‹åˆ°ï¼Œæ²¡æœ‰ "),t("code",[e._v("kCTFontPaletteAttribute")]),e._v(" å’Œ "),t("code",[e._v("kCTFontPaletteColorsAttribute")]),e._v("ã€‚")]),e._v(" "),t("h3",{attrs:{id:"ä½¿ç”¨æœ¬åœ°å¼•æ“"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨æœ¬åœ°å¼•æ“"}},[e._v("#")]),e._v(" ä½¿ç”¨æœ¬åœ°å¼•æ“")]),e._v(" "),t("p",[e._v("æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¯¹é¡¹ç›®è¿›è¡Œç¼–è¯‘")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("flutter build ipa "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--local-engine-src-path"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/Users/lxf/engine/src "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--local-engine"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("ios_release "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--local-engine-host"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("host_release_arm64\n")])])]),t("p",[e._v("å¦‚æœä½ æœ‰ä½¿ç”¨ "),t("code",[e._v("realm")]),e._v(" çš„è¯ï¼Œå¯èƒ½ä¼šé‡åˆ°å¦‚ä¸‹é”™è¯¯")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('Installing realm (1.0.3)\n[!] /bin/bash -c\nset -e\nsource "/Users/lxf/app/ios/Flutter/flutter_export_environment.sh" && cd "$FLUTTER_APPLICATION_PATH" && "$FLUTTER_ROOT/bin/flutter" pub run realm install --target-os-type ios --flavor flutter\n\nYou must specify --local-engine or --local-web-sdk if you are using a locally built engine or web sdk.\n')])])]),t("p",[e._v("ä½ éœ€è¦å¯¹è¯¥æ–‡ä»¶\n"),t("code",[e._v("/Users/lxf/app/ios/.symlinks/plugins/realm/ios/realm.podspec")]),e._v(" è¿›è¡Œä¿®æ”¹ï¼Œåœ¨ "),t("code",[e._v('\\"$FLUTTER_ROOT/bin/flutter\\"')]),e._v(" å’Œ "),t("code",[e._v("pub")]),e._v(" ä¸­é—´åŠ ä¸Šå¼•æ“ç›¸å…³å‚æ•°ã€‚å¦‚ä¸‹æ‰€ç¤º")]),e._v(" "),t("div",{staticClass:"language-podspec extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('s.prepare_command           = "source \\"#{project_dir}/Flutter/flutter_export_environment.sh\\" && cd \\"$FLUTTER_APPLICATION_PATH\\" && \\"$FLUTTER_ROOT/bin/flutter\\" --local-engine-src-path /Users/lxf/engine/src --local-engine ios_release --local-engine-host host_release_arm64 pub run realm install --target-os-type ios --flavor flutter"\n\n:script => \'source "$PROJECT_DIR/../Flutter/flutter_export_environment.sh" && cd "$FLUTTER_APPLICATION_PATH" && "$FLUTTER_ROOT/bin/flutter" --local-engine-src-path /Users/lxf/engine/src --local-engine ios_release --local-engine-host host_release_arm64 pub run realm install --target-os-type ios --flavor flutter\',\n')])])]),t("p",[e._v("å¦‚æœä½ åªæ˜¯æƒ³å¯¹é¡¹ç›®è¿›è¡Œé…ç½®ï¼Œåˆ™å°† "),t("code",[e._v("ipa")]),e._v(" æ”¹ä¸º "),t("code",[e._v("ios")]),e._v("ï¼Œå¹¶åŠ ä¸Š "),t("code",[e._v("--config-only")]),e._v(" å‚æ•°å³å¯ã€‚")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("flutter build ios \\\n--local-engine-src-path=/Users/lxf/engine/src \\\n--local-engine=ios_release \\\n--local-engine-host=host_release_arm64 \\\n--config-only\n")])])]),t("p",[e._v("ä»¥å‰ä½¿ç”¨æœ¬åœ°å¼•æ“åªéœ€è¦ "),t("code",[e._v("--local-engine")]),e._v(" å‚æ•°ï¼Œç°åœ¨è¦æ±‚ç»“åˆ "),t("code",[e._v("--local-engine-host")]),e._v(" ä¸€å—ä½¿ç”¨ï¼Œè¿™é‡Œé™„ä¸Šç›¸å…³ "),t("code",[e._v("issue")]),e._v("ï¼š"),t("a",{attrs:{href:"https://github.com/flutter/flutter/issues/132245",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/flutter/flutter/issues/132245"),t("OutboundLink")],1),e._v(" ï¼Œæƒ³äº†è§£çš„å¯ä»¥ç‚¹å¼€çœ‹çœ‹")]),e._v(" "),t("h2",{attrs:{id:"ä¸‰ã€æœ€å"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰ã€æœ€å"}},[e._v("#")]),e._v(" ä¸‰ã€æœ€å")]),e._v(" "),t("p",[e._v("è¿‡ç¨‹ä¸éš¾ï¼Œéº»çƒ¦çš„æ˜¯æ‹‰æºç å’Œç¼–è¯‘çœŸçš„å¥½æ…¢ï¼Œè€Œä¸”ç©ºé—´å ç”¨è¿˜å¤§~")]),e._v(" "),t("p",[e._v("å¥½äº†ï¼Œæœ¬ç¯‡åˆ°æ­¤ç»“æŸï¼Œæ„Ÿè°¢å¤§å®¶çš„æ”¯æŒï¼Œæˆ‘ä»¬ä¸‹æ¬¡å†è§ï¼ ğŸ‘‹")])])}),[],!1,null,null,null);t.default=r.exports}}]);