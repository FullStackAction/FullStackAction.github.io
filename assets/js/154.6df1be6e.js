(window.webpackJsonp=window.webpackJsonp||[]).push([[154],{562:function(a,t,s){"use strict";s.r(t);var e=s(21),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"一、前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、前言"}},[a._v("#")]),a._v(" 一、前言")]),a._v(" "),t("p",[a._v("在项目完全重构成纯 "),t("code",[a._v("Flutter")]),a._v(" 之后 ，"),t("code",[a._v("iOS")]),a._v(" 端在 "),t("code",[a._v("i7 Mac Mini")]),a._v(" 构建机上的打包时间差不多在 "),t("code",[a._v("12分钟")]),a._v(" 左右，而在升级了 "),t("code",[a._v("Xcode 16")]),a._v(" 之后，构建机的打包时间有了质的 "),t("code",[a._v("“提升”")]),a._v("，来到了 "),t("code",[a._v("25分钟")]),a._v("，换成 "),t("code",[a._v("M1")]),a._v(" 来了也压不住，甚至更久~")]),a._v(" "),t("p",[a._v("这种情况在退回 "),t("code",[a._v("Xcode 15")]),a._v(" 是可以解决的，但是这并不是长久之计，因为苹果早晚会强制要求升级的，好在申请了台 "),t("code",[a._v("M4 Mac Mini")]),a._v(" 来打包，时间来到了 "),t("code",[a._v("15 分钟")]),a._v("，不过随着业务功能不断迭代，构建时间也慢慢增加，目前来到了 "),t("code",[a._v("17、18分钟")]),a._v("，但一旦哪天对 "),t("code",[a._v("M4")]),a._v(" 构建机进行维护，让 "),t("code",[a._v("i7")]),a._v(" 和 "),t("code",[a._v("M1")]),a._v(" 顶上时，再加上多个打包任务并行，完成打包的时间动不动就得 "),t("code",[a._v("半小时")]),a._v(" 起步，真的很令人绝望~")]),a._v(" "),t("p",[a._v("这里先给出优化后的打包时间")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("构建机")]),a._v(" "),t("th",[a._v("优化前(min)")]),a._v(" "),t("th",[a._v("优化后(min)")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[t("code",[a._v("i7")])]),a._v(" "),t("td",[a._v("25+")]),a._v(" "),t("td",[a._v("14+")])]),a._v(" "),t("tr",[t("td",[t("code",[a._v("M4")])]),a._v(" "),t("td",[a._v("16+")]),a._v(" "),t("td",[a._v("8+")])])])]),a._v(" "),t("ul",[t("li",[a._v("优化前 : "),t("code",[a._v("Profile")]),a._v(" + "),t("code",[a._v("源码依赖")]),a._v(" 原生插件")]),a._v(" "),t("li",[a._v("优化后 : "),t("code",[a._v("Release")]),a._v(" + "),t("code",[a._v("二进制依赖")]),a._v(" 原生插件")]),a._v(" "),t("li",[a._v("环境 : "),t("code",[a._v("Xcode 16")])])]),a._v(" "),t("h2",{attrs:{id:"二、编译模式对比"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、编译模式对比"}},[a._v("#")]),a._v(" 二、编译模式对比")]),a._v(" "),t("p",[a._v("这里我拿了一个业务组件来做测试，分别使用 "),t("code",[a._v("Xcode 15")]),a._v(" 和 "),t("code",[a._v("Xcode 16")]),a._v(" 对 "),t("code",[a._v("Profile")]),a._v(" 和 "),t("code",[a._v("Release")]),a._v(" 两种模式来观察编译用时")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20230813121546/image/202503091956443.png",alt:""}})]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("版本")]),a._v(" "),t("th",[t("code",[a._v("Profile")]),a._v(" (s)")]),a._v(" "),t("th",[t("code",[a._v("Release")]),a._v(" (s)")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[t("code",[a._v("Xcode 15")])]),a._v(" "),t("td",[a._v("389")]),a._v(" "),t("td",[a._v("384.6")])]),a._v(" "),t("tr",[t("td",[t("code",[a._v("Xcode 16")])]),a._v(" "),t("td",[a._v("952.3")]),a._v(" "),t("td",[a._v("477.4")])])])]),a._v(" "),t("p",[a._v("可以看到升级到 "),t("code",[a._v("Xcode 16")]),a._v(" 后，两种模式的编译时间都比使用 "),t("code",[a._v("Xcode 15")]),a._v(" 的要久，特别是 "),t("code",[a._v("Profile")]),a._v(" 模式下的编译时间更离谱，是 "),t("code",[a._v("Release")]),a._v(" 的 "),t("code",[a._v("2倍")]),a._v(" 多~")]),a._v(" "),t("p",[a._v("而我们的项目为了方便，是以编译模式进行环境区分的。")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("Profile")]),a._v(" : 测试包使用，对应 "),t("code",[a._v("kProfileMode")])]),a._v(" "),t("li",[t("code",[a._v("Release")]),a._v(" : 上架包使用，对应 "),t("code",[a._v("kReleaseMode")])])]),a._v(" "),t("h2",{attrs:{id:"三、调整环境判断"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、调整环境判断"}},[a._v("#")]),a._v(" 三、调整环境判断")]),a._v(" "),t("p",[a._v("基于现状，只能调整项目中对环境的区分逻辑，改用 "),t("code",[a._v("Dart Define")]),a._v(" 将环境参数传入。")]),a._v(" "),t("p",[a._v("这里使用 "),t("code",[a._v("--dart-define-from-file")]),a._v(" 传递文件的方式")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("fvm spawn "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.24")]),a._v(".5 build ipa "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--release")]),a._v(" --export-options-plist"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("path/to/ad_hoc.plist --dart-define-from-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("path/to/test.env\n")])])]),t("p",[t("code",[a._v("test.env")]),a._v(" 文件以键值对的方式设置环境变量")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("APP_ENV=test\n")])])]),t("p",[a._v("取值方式如下，注意，一定要加上 "),t("code",[a._v("const")]),a._v("！")]),a._v(" "),t("div",{staticClass:"language-dart extra-class"},[t("pre",{pre:!0,attrs:{class:"language-dart"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/// dart define 环境变量")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("get")]),a._v(" appEnv "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("fromEnvironment")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'APP_ENV'")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),t("p",[a._v("判断是否为 "),t("code",[a._v("release")])]),a._v(" "),t("div",{staticClass:"language-dart extra-class"},[t("pre",{pre:!0,attrs:{class:"language-dart"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("enum")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("AppBuildMode")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  release"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  debug"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("AppBuildMode")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("?")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("fetchAppEnvType")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("switch")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("appEnv"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("toLowerCase")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("case")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"debug"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("AppBuildMode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("debug"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("case")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"test"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("AppBuildMode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("test"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("case")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"release"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("AppBuildMode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("release"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("default")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\nbool "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("isRelease")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("final")]),a._v(" envType "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("fetchAppEnvType")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("envType "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("==")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 没有使用 dart define 设置环境变量")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" kReleaseMode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("else")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("AppBuildMode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("release "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("==")]),a._v(" envType"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("h2",{attrs:{id:"四、浅探索耗时"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、浅探索耗时"}},[a._v("#")]),a._v(" 四、浅探索耗时")]),a._v(" "),t("p",[a._v("当然，我们也可以尝试去探索一下，到底是哪里耗时这么久。")]),a._v(" "),t("p",[a._v("通过 "),t("code",[a._v("Xcode")]),a._v(" 自身去查看编译耗时会发现最长的是 "),t("code",[a._v("Run Script")]),a._v("，其主要负责编译 "),t("code",[a._v("Flutter")]),a._v(" 侧的代码。")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20230813121546/image/202503091957711.png",alt:""}})]),a._v(" "),t("blockquote",[t("p",[a._v("注：这里的时间是 Xcode 16 + Release 下的")])]),a._v(" "),t("p",[a._v("但是展开详细内容会发现一点有用的信息都没有，无法定位到具体问题。")]),a._v(" "),t("p",[a._v("经过对 "),t("code",[a._v("flutter_tools")]),a._v(" 的代码进行阅读后发现，可以通过设置环境变量 "),t("code",[a._v("VERBOSE_SCRIPT_LOGGING")]),a._v(" 来使其加上 "),t("code",[a._v("--verbose")]),a._v(" 参数，进而将打包过程中的一些信息打印出来。")]),a._v(" "),t("p",[a._v("具体操作: "),t("code",[a._v("Runner")]),a._v(" -> "),t("code",[a._v("Build Phases")]),a._v(" -> "),t("code",[a._v("Run Script")]),a._v(" 中补充一句 "),t("code",[a._v("export VERBOSE_SCRIPT_LOGGING=1")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 补充这一句")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("VERBOSE_SCRIPT_LOGGING")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n\n/bin/sh "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$FLUTTER_ROOT")]),a._v('/packages/flutter_tools/bin/xcode_backend.sh"')]),a._v(" build\n")])])]),t("p",[a._v("再次编译就可以看到详细的 "),t("code",[a._v("flutter")]),a._v(" 命令打包信息，可以将其导出后慢慢查看。")]),a._v(" "),t("p",[a._v("下面是摘出的主要耗时记录和文件大小")]),a._v(" "),t("p",[a._v("Profile")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Xcode 15")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("   +2 ms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" executing: xcrun cc "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-arch")]),a._v(" arm64 -miphoneos-version-min"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("12.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-isysroot")]),a._v(" /Applications/Xcode-15.4.0.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS17.5.sdk "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" /Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/80c2b96b2938ac2118bcd57be8744d2f/arm64/snapshot_assembly.S "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" /Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/80c2b96b2938ac2118bcd57be8744d2f/arm64/snapshot_assembly.o\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("+165207 ms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" executing: xcrun clang "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-arch")]),a._v(" arm64 -miphoneos-version-min"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("12.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-isysroot")]),a._v(" /Applications/Xcode-15.4.0.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS17.5.sdk "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-dynamiclib")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xlinker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rpath")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xlinker")]),a._v(" @executable_path/Frameworks "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xlinker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rpath")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xlinker")]),a._v(" @loader_path/Frameworks -fapplication-extension "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-install_name")]),a._v(" @rpath/App.framework/App "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" /Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/80c2b96b2938ac2118bcd57be8744d2f/arm64/App.framework/App /Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/80c2b96b2938ac2118bcd57be8744d2f/arm64/snapshot_assembly.o\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" +289 ms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("   +1 ms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" executing: /Users/lxf/fvm/versions/3.24.5/bin/cache/artifacts/engine/ios-profile/gen_snapshot_arm64 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--deterministic")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--snapshot_kind")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("app-aot-assembly "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--assembly")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/80c2b96b2938ac2118bcd57be8744d2f/arm64/snapshot_assembly.S /Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/80c2b96b2938ac2118bcd57be8744d2f/app.dill\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("+96580 ms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Xcode 16")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" executing: xcrun cc "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-arch")]),a._v(" arm64 -miphoneos-version-min"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("12.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-isysroot")]),a._v(" /Applications/Xcode-16.0.0.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS18.0.sdk "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" /Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/503cc01726bac6c42836b48ae4a747ed/arm64/snapshot_assembly.S "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" /Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/503cc01726bac6c42836b48ae4a747ed/arm64/snapshot_assembly.o\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("+596589 ms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" executing: xcrun clang "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-arch")]),a._v(" arm64 -miphoneos-version-min"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("12.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-isysroot")]),a._v(" /Applications/Xcode-16.0.0.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS18.0.sdk "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-dynamiclib")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xlinker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rpath")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xlinker")]),a._v(" @executable_path/Frameworks "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xlinker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rpath")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xlinker")]),a._v(" @loader_path/Frameworks -fapplication-extension "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-install_name")]),a._v(" @rpath/App.framework/App "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" /Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/503cc01726bac6c42836b48ae4a747ed/arm64/App.framework/App /Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/503cc01726bac6c42836b48ae4a747ed/arm64/snapshot_assembly.o\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" +290 ms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("   +1 ms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" executing: /Users/lxf/fvm/versions/3.24.5/bin/cache/artifacts/engine/ios-profile/gen_snapshot_arm64 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--deterministic")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--snapshot_kind")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("app-aot-assembly "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--assembly")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/503cc01726bac6c42836b48ae4a747ed/arm64/snapshot_assembly.S /Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/503cc01726bac6c42836b48ae4a747ed/app.dill\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("+92259 ms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Xcode 15、Xcode 16 一样")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-lh")]),a._v("\ntotal "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("853368")]),a._v("\ndrwxr-xr-x@ "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v(" lxf  staff    96B  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("15")]),a._v(":48 App.framework\ndrwxr-xr-x@ "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v(" lxf  staff    96B  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("15")]),a._v(":48 App.framework.dSYM\n-rw-r--r--@ "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" lxf  staff   323M  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("15")]),a._v(":38 snapshot_assembly.S\n-rw-r--r--@ "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" lxf  staff    93M  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("15")]),a._v(":48 snapshot_assembly.o\n")])])]),t("p",[a._v("Release")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Xcode 15")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" executing: xcrun cc "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-arch")]),a._v(" arm64 -miphoneos-version-min"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("12.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-isysroot")]),a._v(" /Applications/Xcode-15.4.0.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS17.5.sdk "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" /Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/a403cb206ef9086380afa3baff59c37e/arm64/snapshot_assembly.S "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" /Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/a403cb206ef9086380afa3baff59c37e/arm64/snapshot_assembly.o\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("+92077 ms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" executing: xcrun clang "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-arch")]),a._v(" arm64 -miphoneos-version-min"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("12.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-isysroot")]),a._v(" /Applications/Xcode-15.4.0.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS17.5.sdk "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-dynamiclib")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xlinker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rpath")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xlinker")]),a._v(" @executable_path/Frameworks "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xlinker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rpath")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xlinker")]),a._v(" @loader_path/Frameworks -fapplication-extension "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-install_name")]),a._v(" @rpath/App.framework/App "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" /Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/a403cb206ef9086380afa3baff59c37e/arm64/App.framework/App /Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/a403cb206ef9086380afa3baff59c37e/arm64/snapshot_assembly.o\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" +245 ms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("   +1 ms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" executing: /Users/lxf/fvm/versions/3.24.5/bin/cache/artifacts/engine/ios-release/gen_snapshot_arm64 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--deterministic")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--snapshot_kind")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("app-aot-assembly "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--assembly")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/a403cb206ef9086380afa3baff59c37e/arm64/snapshot_assembly.S /Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/a403cb206ef9086380afa3baff59c37e/app.dill\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("+88256 ms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ========== 华丽的分割线 ========== #")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Xcode 16")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" executing: xcrun cc "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-arch")]),a._v(" arm64 -miphoneos-version-min"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("12.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-isysroot")]),a._v(" /Applications/Xcode-16.0.0.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS18.0.sdk "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" /Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/6294397816f76932cad621f56d6b967b/arm64/snapshot_assembly.S "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" /Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/6294397816f76932cad621f56d6b967b/arm64/snapshot_assembly.o\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("+246277 ms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" executing: xcrun clang "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-arch")]),a._v(" arm64 -miphoneos-version-min"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("12.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-isysroot")]),a._v(" /Applications/Xcode-16.0.0.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS18.0.sdk "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-dynamiclib")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xlinker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rpath")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xlinker")]),a._v(" @executable_path/Frameworks "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xlinker")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-rpath")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xlinker")]),a._v(" @loader_path/Frameworks -fapplication-extension "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-install_name")]),a._v(" @rpath/App.framework/App "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" /Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/6294397816f76932cad621f56d6b967b/arm64/App.framework/App /Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/6294397816f76932cad621f56d6b967b/arm64/snapshot_assembly.o\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" +237 ms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("   +1 ms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" executing: /Users/lxf/fvm/versions/3.24.5/bin/cache/artifacts/engine/ios-release/gen_snapshot_arm64 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--deterministic")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--snapshot_kind")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("app-aot-assembly "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--assembly")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/6294397816f76932cad621f56d6b967b/arm64/snapshot_assembly.S /Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/6294397816f76932cad621f56d6b967b/app.dill\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("+88139 ms"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Xcode 15、Xcode 16 一样")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-lh")]),a._v("\ntotal "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("572808")]),a._v("\ndrwxr-xr-x@ "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v(" lxf  staff    96B  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("17")]),a._v(":08 App.framework\ndrwxr-xr-x@ "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v(" lxf  staff    96B  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("16")]),a._v(":02 App.framework.dSYM\n-rw-r--r--@ "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" lxf  staff   213M  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("17")]),a._v(":04 snapshot_assembly.S\n-rw-r--r--@ "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" lxf  staff    67M  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("17")]),a._v(":08 snapshot_assembly.o\n")])])]),t("p",[a._v("你可能会觉得最耗时的是 "),t("code",[a._v("xcrun clang")]),a._v("，但其实每一行前面的中括号内的时间，是上一行的命令的耗时，即 "),t("code",[a._v("xcrun cc")]),a._v(" 最耗时，而其它命令的执行时间是差不多的。")]),a._v(" "),t("p",[t("code",[a._v("xcrun cc")]),a._v(" 命令是用于将 "),t("code",[a._v("Flutter")]),a._v(" 生成的汇编代码（"),t("code",[a._v("snapshot_assembly.S")]),a._v("）编译为目标文件（"),t("code",[a._v("snapshot_assembly.o")]),a._v("），不知道苹果使用的 "),t("code",[a._v("clang")]),a._v(" 版本是有什么问题，在 "),t("code",[a._v("Profile")]),a._v(" 下的编译时长是 "),t("code",[a._v("Release")]),a._v(" 下的 "),t("code",[a._v("2倍")]),a._v(" 多，它就是造成编译时间变长的主要原因，到这我就没继续往下研究了，有兴趣的小伙伴可以尝试研究看看。")]),a._v(" "),t("p",[a._v("除此之外，汇编文件 "),t("code",[a._v("snapshot_assembly.S")]),a._v(" 的大小相差 "),t("code",[a._v("100M+")]),a._v("，我们可以在日志中找到生成汇编代码的 "),t("code",[a._v("gen_snapshot_*")]),a._v(" 命令，如下所示")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("executing: /Users/lxf/fvm/versions/3.24.5/bin/cache/artifacts/engine/ios-release/gen_snapshot_arm64 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--deterministic")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--snapshot_kind")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("app-aot-assembly "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--assembly")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/0385e340094e836ea63c75553c018e82/arm64/snapshot_assembly.S /Users/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./.dart_tool/flutter_build/0385e340094e836ea63c75553c018e82/app.dill\n")])])]),t("p",[a._v("给 "),t("code",[a._v("gen_snapshot_*")]),a._v(" 命令加上 "),t("code",[a._v("--trace-compiler")]),a._v(" 标志并重新运行，让其提供每个函数的编译时间，并记录到 "),t("code",[a._v("result.txt")]),a._v(" 中，精简命令如下")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("gen_snapshot_* --trace-compiler "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". app.dill "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" result.txt "),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("&1")]),a._v("\n")])])]),t("p",[t("code",[a._v("result.txt")]),a._v(" 中的内容长这个样子")]),a._v(" "),t("div",{staticClass:"language-txt extra-class"},[t("pre",{pre:!0,attrs:{class:"language-txt"}},[t("code",[a._v("Precompiling optimized function: 'dart:core_StateError_StateError.' @ token 21950, size 52\n--\x3e 'dart:core_StateError_StateError.' entry: 0x108d00090 size: 56 time: 935 us\nPrecompiling optimized function: 'dart:core_RangeError_RangeError.' @ token 9976, size 94\n--\x3e 'dart:core_RangeError_RangeError.' entry: 0x108d000e0 size: 72 time: 133 us\n...\n")])])]),t("p",[a._v("根据 "),t("code",[a._v("result.txt")]),a._v(" 中的耗时（"),t("code",[a._v("time")]),a._v("）进行从大到小排序，并输出到 "),t("code",[a._v("sorted_result.txt")]),a._v(" 中")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'^--\x3e'")]),a._v(" result.txt "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{for(i=1;i<=NF;i++) if($i==\"time:\") print $(i+1), $0}'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sort")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-nr")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cut")]),a._v(" -d"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("' '")]),a._v(" -f2- "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" sorted_result.txt\n")])])]),t("p",[a._v("排序后我们就可以清晰的知道哪些方法是比较耗时的，大家自行判断是否优化即可。")]),a._v(" "),t("p",[a._v("经过对比两个 "),t("code",[a._v("sorted_result.txt")]),a._v(" 后发现，一些方法在 "),t("code",[a._v("Profile")]),a._v(" 中存在而 "),t("code",[a._v("Release")]),a._v(" 中没有，即发生了 "),t("code",[a._v("Tree Shaking")]),a._v("。")]),a._v(" "),t("p",[a._v("在 "),t("code",[a._v("Flutter")]),a._v(" 中，"),t("code",[a._v("Tree Shaking")]),a._v(" 是一种优化技术，用于删除未使用的代码，以减小应用的大小并提高性能。对于不同的构建模式，"),t("code",[a._v("Tree Shaking")]),a._v(" 的行为有所不同：")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("模式")]),a._v(" "),t("th",[a._v("描述")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[t("code",[a._v("Debug")])]),a._v(" "),t("td",[a._v("不会进行 "),t("code",[a._v("Tree Shaking")]),a._v("。"),t("br"),a._v("因为 Debug 模式主要用于开发和调试，保留所有代码和调试信息，以便于开发者进行调试。")])]),a._v(" "),t("tr",[t("td",[t("code",[a._v("Profile")])]),a._v(" "),t("td",[a._v("会进行部分 "),t("code",[a._v("Tree Shaking")]),a._v("。"),t("br"),a._v("主要用于性能分析，尽可能地优化代码，同时保留一些调试信息，以便开发者能分析性能问题。")])]),a._v(" "),t("tr",[t("td",[t("code",[a._v("Release")])]),a._v(" "),t("td",[a._v("会进行全面的 "),t("code",[a._v("Tree Shaking")]),a._v("。"),t("br"),a._v("会删除未使用的代码，并进行其他优化，以确保应用的体积尽可能小，并且性能最佳。")])])])]),a._v(" "),t("p",[a._v("关于构建模式的详细说明，可以看官方文档 "),t("a",{attrs:{href:"https://docs.flutter.dev/testing/build-modes",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://docs.flutter.dev/testing/build-modes"),t("OutboundLink")],1)]),a._v(" "),t("blockquote",[t("p",[a._v("因此，如果我们希望最大限度地减少应用的体积并提高性能，建议在 "),t("code",[a._v("Release")]),a._v(" 模式下构建 "),t("code",[a._v("Flutter")]),a._v(" 应用。")])]),a._v(" "),t("p",[a._v("将 "),t("code",[a._v("Profile")]),a._v(" 模式切到 "),t("code",[a._v("Release")]),a._v(" 模式后的打包时间如下")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("构建机")]),a._v(" "),t("th",[t("code",[a._v("Profile")]),a._v("(min)")]),a._v(" "),t("th",[t("code",[a._v("Release")]),a._v("(min)")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[t("code",[a._v("i7")])]),a._v(" "),t("td",[a._v("25+")]),a._v(" "),t("td",[a._v("18+")])]),a._v(" "),t("tr",[t("td",[t("code",[a._v("M4")])]),a._v(" "),t("td",[a._v("16+")]),a._v(" "),t("td",[a._v("9+")])])])]),a._v(" "),t("p",[a._v("可以看到，切换编译模式已经很大程度地优化了编译时长，不过我们还可以再进一步优化。")]),a._v(" "),t("h2",{attrs:{id:"五、二进制依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五、二进制依赖"}},[a._v("#")]),a._v(" 五、二进制依赖")]),a._v(" "),t("p",[t("code",[a._v("二进制依赖")]),a._v(" 是 "),t("code",[a._v("iOS")]),a._v(" 端老生常谈的优化点了，通过直接使用编译好的库或模块，从而避免编译的时间和资源消耗。")]),a._v(" "),t("blockquote",[t("p",[a._v("因此，原生插件越多，编译速度就越慢，二进制依赖的优化效果越好，二进制依赖的优化效果越好，编译速度就越快，所以编译越慢，编译越快 ~")])]),a._v(" "),t("p",[a._v("在这里我使用的是 "),t("code",[a._v("Rugby")]),a._v(" 这个工具。")]),a._v(" "),t("h3",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Ls")]),a._v(" https://swiftyfinch.github.io/rugby/install.sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n")])])]),t("p",[a._v("安装完成后输出如下内容")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("🏈 Rugby has been installed ✓\n\n/Users/lxf/.rugby/clt is not "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" your "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),a._v("\nAdd it manually to your shell profile.\nFor example, "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" you use zsh, run this command:\n$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'\\nexport PATH=$PATH:~/.rugby/clt'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v(" ~/.zshrc\nThan "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("open")]),a._v(" a new window or tab "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" the terminal "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" applying changes.\n")])])]),t("p",[a._v("根据提示，将 "),t("code",[a._v("rugby")]),a._v(" 添加到环境变量中。")]),a._v(" "),t("p",[a._v("完成后新开个终端，执行如下命令验证 "),t("code",[a._v("rugby")]),a._v(" 是否可以被正常使用")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("rugby "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--version")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 输出")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2.10")]),a._v(".2\n")])])]),t("h3",{attrs:{id:"使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[a._v("#")]),a._v(" 使用")]),a._v(" "),t("p",[a._v("在执行完 "),t("code",[a._v("pod install")]),a._v(" 后，再执行 "),t("code",[a._v("rugby cache")]),a._v(" 即可将原生插件从源码依赖转成二进制依赖了")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("rugby cache "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--arch")]),a._v(" arm64 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--sdk")]),a._v(" ios "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--except")]),a._v(" chat_bottom_container realm dart_native "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--config")]),a._v(" Release\n")])])]),t("p",[a._v("这里通过 "),t("code",[a._v("--except")]),a._v(" 将一些不做二进制依赖的包过滤掉了。")]),a._v(" "),t("p",[a._v("当这些参数太多之后，命令会变得很长，不好看，可以将这些参数整理到 "),t("code",[a._v("plans.yml")]),a._v(" 文件中")]),a._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("profile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" cache\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("sdk")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" ios\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("config")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" Profile\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("except")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" chat_bottom_container\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" realm\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" dart_native\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("release")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" cache\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("sdk")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" ios\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("config")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" Release\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("except")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" chat_bottom_container\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" realm\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" dart_native\n")])])]),t("p",[a._v("然后改为 "),t("code",[a._v("rugby plan")]),a._v(" 去执行，并且指定使用 "),t("code",[a._v("plans.yml")]),a._v(" 中的 "),t("code",[a._v("release")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("rugby plan release "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /User/lxf/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("./plans.yml\n")])])]),t("p",[a._v("不过需要注意的是，如果你再次执行 "),t("code",[a._v("pod install")]),a._v(" 将会还原为源码依赖！"),t("code",[a._v("rugby")]),a._v(" 的修改就会失效~")]),a._v(" "),t("p",[a._v("而我们平时执行的 "),t("code",[a._v("flutter build ipa")]),a._v(" 命令，其内部是有可能会去执行 "),t("code",[a._v("pod install")]),a._v(" 的，那如何避免呢？")]),a._v(" "),t("p",[a._v("经过 "),t("code",[a._v("flutter_tools")]),a._v(" 的源码阅读，发现它会做如下判断")]),a._v(" "),t("ol",[t("li",[a._v("涉及的文件是否存在")]),a._v(" "),t("li",[a._v("对比 "),t("code",[a._v("pod_inputs.fingerprint")]),a._v(" 中的各项 "),t("code",[a._v("MD5")]),a._v(" 值")]),a._v(" "),t("li",[a._v("对比 "),t("code",[a._v("Podfile.lock")]),a._v(" 与 "),t("code",[a._v("Pods/Manifest.lock")]),a._v(" 内容")])]),a._v(" "),t("p",[t("code",[a._v("pod_inputs.fingerprint")]),a._v(" 位于 "),t("code",[a._v("build/ios")]),a._v(" 目录，内容如下")]),a._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"files"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"/Users/lxf/.../ios/Runner.xcodeproj/project.pbxproj"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"21b527dc18081de6eabe26c6a4e851b2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"/Users/lxf/.../ios/Podfile"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"25baa69590b287fd88a578ae5fa2f964"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('".../flutter/packages/flutter_tools/bin/podhelper.rb"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"29abcfc3297c225fc1d1ae2380787cd6"')]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("所以现在很明确，我们需要调整打包步骤")]),a._v(" "),t("ol",[t("li",[t("code",[a._v("flutter pub get/upgrade")])]),a._v(" "),t("li",[t("code",[a._v("cd ios && pod install")])]),a._v(" "),t("li",[a._v("切成二进制依赖")]),a._v(" "),t("li",[a._v("自己生成 "),t("code",[a._v("pod_inputs.fingerprint")])]),a._v(" "),t("li",[a._v("拷贝 "),t("code",[a._v("Podfile.lock")]),a._v(" 至 "),t("code",[a._v("Pods/Manifest.lock")])]),a._v(" "),t("li",[t("code",[a._v("flutter build ipa")])])]),a._v(" "),t("p",[a._v("其中第 "),t("code",[a._v("3")]),a._v(" ~ 第 "),t("code",[a._v("5")]),a._v(" 步我已经做了封装在我的 "),t("a",{attrs:{href:"https://github.com/LinXunFeng/condor",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://github.com/LinXunFeng/condor"),t("OutboundLink")],1),a._v(" 项目中，使用如下")]),a._v(" "),t("h3",{attrs:{id:"condor"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#condor"}},[a._v("#")]),a._v(" Condor")]),a._v(" "),t("h4",{attrs:{id:"安装-condor"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-condor"}},[a._v("#")]),a._v(" 安装 "),t("code",[a._v("condor")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("brew tap LinXunFeng/tap "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" brew "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" condor\n")])])]),t("h4",{attrs:{id:"指定编译模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#指定编译模式"}},[a._v("#")]),a._v(" 指定编译模式")]),a._v(" "),t("p",[a._v("设置环境变量 "),t("code",[a._v("CONDOR_BUILD_MODE")]),a._v("，对应 "),t("code",[a._v("plans.yml")]),a._v(" 里的 "),t("code",[a._v("profile")]),a._v(" 和 "),t("code",[a._v("release")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("CONDOR_BUILD_MODE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("release\n")])])]),t("p",[a._v("也可以使用 "),t("code",[a._v("--mode")]),a._v(" 参数来指定模式")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("condor optimize-build --mode release\n")])])]),t("h4",{attrs:{id:"二进制依赖与同步文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二进制依赖与同步文件"}},[a._v("#")]),a._v(" 二进制依赖与同步文件")]),a._v(" "),t("p",[a._v("进入到 "),t("code",[a._v("Flutter")]),a._v(" 项目的根目录，执行如下命令")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" path/to/your/flutter_project\n\ncondor optimize-build "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--config")]),a._v(" path/to/rugby/plans.yml\n")])])]),t("p",[a._v("如果你想指定 "),t("code",[a._v("fvm")]),a._v(" 安装的且非全局默认的 "),t("code",[a._v("flutter")]),a._v("，则可以加上 "),t("code",[a._v("--flutter")]),a._v(" 参数")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("condor optimize-build "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--config")]),a._v(" path/to/rugby/plans.yml "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--flutter")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"fvm spawn 3.24.5"')]),a._v("\n")])])]),t("p",[a._v("最后执行打包命令即可。")]),a._v(" "),t("h2",{attrs:{id:"六、最后"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#六、最后"}},[a._v("#")]),a._v(" 六、最后")]),a._v(" "),t("p",[a._v("希望苹果下一个版本的 "),t("code",[a._v("Xcode")]),a._v(" 可以解决这个问题吧，不然的话，emmm，我也不会升级电脑的~")])])}),[],!1,null,null,null);t.default=r.exports}}]);