(window.webpackJsonp=window.webpackJsonp||[]).push([[190],{600:function(s,t,a){"use strict";a.r(t);var e=a(21),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"一、概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、概述"}},[s._v("#")]),s._v(" 一、概述")]),s._v(" "),t("p",[s._v("不久前，谷歌推出了开源的 AI 代理 "),t("code",[s._v("Gemini CLI")]),s._v("，它为个人开发者提供了近乎无上限的免费使用 "),t("code",[s._v("Gemini 2.5 Pro")]),s._v(" 的额度，每分钟 "),t("code",[s._v("60")]),s._v(" 次，每日最多可达 "),t("code",[s._v("1,000")]),s._v(" 次的模型执行额度，且完全免费！")]),s._v(" "),t("p",[t("code",[s._v("Gemini 2.5 Pro")]),s._v(" 在编码上的能力，我们可以参考 "),t("a",{attrs:{href:"https://web.lmarena.ai/leaderboard",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://web.lmarena.ai/leaderboard"),t("OutboundLink")],1),s._v(" 上查看排名。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20230813121546/image/202507271327348.png",alt:""}})]),s._v(" "),t("p",[s._v("而这么牛的模型，只能运行在终端这个小框框里实属可惜，所以本文将介绍如何使其 "),t("code",[s._v("OpenAI-compatible")]),s._v(" 化，从而摆脱终端限制。")]),s._v(" "),t("blockquote",[t("p",[s._v("注：该方案本人主号已稳定使用一个多月，不过如果你有小号的话还是建议使用小号~")])]),s._v(" "),t("h2",{attrs:{id:"二、安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、安装"}},[s._v("#")]),s._v(" 二、安装")]),s._v(" "),t("blockquote",[t("p",[s._v("环境前提，需要已经安装 "),t("code",[s._v("Node.js")]),s._v("，并且版本 "),t("code",[s._v("≥ 20")])])]),s._v(" "),t("p",[s._v("全局安装 "),t("code",[s._v("gemini-cli")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" @google/gemini-cli\n")])])]),t("p",[s._v("注：我自己使用的包管理工具是 "),t("code",[s._v("pnpm")]),s._v("，你可以使用 "),t("code",[s._v("Node.js")]),s._v(" 自带的 "),t("code",[s._v("npm")])]),s._v(" "),t("h2",{attrs:{id:"三、授权认证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、授权认证"}},[s._v("#")]),s._v(" 三、授权认证")]),s._v(" "),t("h3",{attrs:{id:"启用-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启用-api"}},[s._v("#")]),s._v(" 启用 API")]),s._v(" "),t("p",[s._v("使用 OAuth 凭据文件认证的方式，先打开如下链接")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20230813121546/image/202507271327478.png",alt:""}})]),s._v(" "),t("p",[s._v("点击写着 "),t("code",[s._v("前往 Gemini for Google Cloud")]),s._v(" 的蓝色大按钮。")]),s._v(" "),t("p",[s._v("在跳转至另一个页面后，点击左上角的 "),t("code",[s._v("选择项目")]),s._v(" 进行选择。")]),s._v(" "),t("p",[s._v("接着查看地址栏里的链接，如下")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://console.cloud.google.com/marketplace/product/google/cloudaicompanion.googleapis.com?hl=zh-cn&inv=1&invt=abcdef&project=linxunfeng",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://console.cloud.google.com/marketplace/product/google/cloudaicompanion.googleapis.com?hl=zh-cn&inv=1&invt=abcdef&project=linxunfeng"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("找到 "),t("code",[s._v("project")]),s._v(" 参数，即 "),t("code",[s._v("项目 ID")]),s._v("，记下它的值，如这里的 "),t("code",[s._v("linxunfeng")]),s._v("。")]),s._v(" "),t("p",[s._v("再点击蓝色按钮 "),t("code",[s._v("启用")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20230813121546/image/202507271328102.png",alt:""}})]),s._v(" "),t("p",[s._v("没有项目则自行创建一个")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20230813121546/image/202507271328568.png",alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20230813121546/image/202507271328480.png",alt:""}})]),s._v(" "),t("p",[t("code",[s._v("项目名称")]),s._v(" 和 "),t("code",[s._v("项目 ID")]),s._v(" 根据你自己的情况去填写")]),s._v(" "),t("p",[s._v("如果你之前就启用过，则会显示 "),t("code",[s._v("API已启用")]),s._v("，如图所示")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20230813121546/image/202507271329116.jpg",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[s._v("#")]),s._v(" 配置")]),s._v(" "),t("p",[s._v("打开终端，新增环境变量 "),t("code",[s._v("GOOGLE_CLOUD_PROJECT")]),s._v("，值为 "),t("code",[s._v("project")]),s._v(" 的值，如上 "),t("code",[s._v("linxunfeng")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("GOOGLE_CLOUD_PROJECT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"linxunfeng"')]),s._v("\n")])])]),t("p",[t("code",[s._v("source")]),s._v(" 配置文件或重启终端，运行 "),t("code",[s._v("gemini")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# source 你自己的配置文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ~/.zshrc\n\ngemini\n")])])]),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20230813121546/image/202507271329240.jpg",alt:""}})]),s._v(" "),t("p",[s._v("会让你选择主题，这里随意，看你喜欢～")]),s._v(" "),t("p",[s._v("接下来是认证方式，选择 "),t("code",[s._v("Login with Google")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20230813121546/image/202507271329269.jpg",alt:""}})]),s._v(" "),t("p",[s._v("会自动打开浏览器页面，按要求登录授权即可")]),s._v(" "),t("p",[s._v("授权成功后的页面会显示如下内容")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20230813121546/image/202507271330129.png",alt:""}})]),s._v(" "),t("p",[s._v("再回到终端，你会发现已经可以正常使用 "),t("code",[s._v("gemini")]),s._v(" 了")]),s._v(" "),t("p",[s._v("如果你没有执行过上述的 "),t("code",[s._v("前置操作")]),s._v("，终端内会遇到如下提示")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("Failed to login. Message: This account requires setting the GOOGLE_CLOUD_PROJECT "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),s._v(" var. See https://goo.gle/gemini-cli-auth-docs"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#workspace-gca")]),s._v("\n")])])]),t("p",[s._v("如果遇到了按上述的 "),t("code",[s._v("前置操作")]),s._v(" 操作一遍即可～")]),s._v(" "),t("p",[s._v("完成后查看 "),t("code",[s._v("~/.gemini/oauth_creds.json")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" ~/.gemini/oauth_creds.json\n")])])]),t("p",[s._v("文件内容如下所示")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"access_token"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lxf"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"refresh_token"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lxf"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"scope"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lxf"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"token_type"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Bearer"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"id_token"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lxf"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"expiry_date"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1751011026383")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h2",{attrs:{id:"四、openai-compatible"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、openai-compatible"}},[s._v("#")]),s._v(" 四、OpenAI-compatible")]),s._v(" "),t("p",[s._v("接下来部署项目 "),t("a",{attrs:{href:"https://github.com/GewoonJaap/gemini-cli-openai",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/GewoonJaap/gemini-cli-openai"),t("OutboundLink")],1),s._v(" 至 "),t("code",[s._v("Cloudflare")])]),s._v(" "),t("h3",{attrs:{id:"项目拉取"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#项目拉取"}},[s._v("#")]),s._v(" 项目拉取")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/GewoonJaap/gemini-cli-openai.git\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" gemini-cli-openai\n")])])]),t("h3",{attrs:{id:"安装依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[s._v("#")]),s._v(" 安装依赖")]),s._v(" "),t("p",[s._v("安装项目依赖")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" i\n")])])]),t("p",[s._v("全局安装 "),t("code",[s._v("wrangler")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" wrangler\n")])])]),t("h3",{attrs:{id:"创建-kv-存储"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建-kv-存储"}},[s._v("#")]),s._v(" 创建 "),t("code",[s._v("KV")]),s._v(" 存储")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("wrangler kv namespace create "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GEMINI_CLI_KV"')]),s._v("\n")])])]),t("p",[s._v("在执行这行命令时，如果你还没有授权过 "),t("code",[s._v("Cloudflare")]),s._v("，会出现如下提示，并会自动打开浏览器，不要慌，按提示登录授权即可。")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("Attempting to login via OAuth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nOpening a "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" your default browser: https://dash.cloudflare.com/oauth2/auth?xxx\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("Successfully logged in.\nResource location: remote\n🌀 Creating namespace with title "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GEMINI_CLI_KV"')]),s._v("\n✨ Success"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\nAdd the following to your configuration "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" your kv_namespaces array:\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("kv_namespaces"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nbinding "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GEMINI_CLI_KV"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"')]),s._v("\n")])])]),t("p",[s._v("将上述最后一行的 "),t("code",[s._v("id")]),s._v(" 值，替换掉 "),t("code",[s._v("wrangler.toml")]),s._v(" 中的 "),t("code",[s._v("GEMINI_CLI_KV")]),s._v("，如")]),s._v(" "),t("div",{staticClass:"language-toml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-toml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key property"}},[s._v("kv_namespaces")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key property"}},[s._v("binding")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GEMINI_CLI_KV"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key property"}},[s._v("id")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("h3",{attrs:{id:"认证信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#认证信息"}},[s._v("#")]),s._v(" 认证信息")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("wrangler secret put GCP_SERVICE_ACCOUNT\n")])])]),t("p",[s._v("执行后会让你输入，这里就需要用到 "),t("code",[s._v("~/.gemini/oauth_creds.json")]),s._v(" 里的数据，不过这里面的 "),t("code",[s._v("JSON")]),s._v(" 数据是多行的，而命令行只接收单行数据，所以需要我们先将其压缩成一行。")]),s._v(" "),t("p",[s._v("你可以谷歌在线压缩 "),t("code",[s._v("JSON")]),s._v(" 的工具去处理，也可以像我一样用 "),t("code",[s._v("jq")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装 jq")]),s._v("\nbrew "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" jq\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 压缩 json")]),s._v("\njq "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" ~/.gemini/oauth_creds.json "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" output.json\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或者")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" ~/.gemini/oauth_creds.json "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jq "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" output.json\n")])])]),t("p",[s._v("将 "),t("code",[s._v("output.json")]),s._v(" 内已经压缩好的 "),t("code",[s._v("JSON")]),s._v(" 复制后粘贴即可～")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("✔ Enter a secret value: … ***************************** \n*****************************\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n🌀 Creating the secret "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the Worker "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gemini-cli-worker"')]),s._v(" \n✔ There doesn't seem to be a Worker called "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gemini-cli-worker"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" Do you want to create a new Worker with that name and "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" secrets to it? … "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n🌀 Creating new Worker "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gemini-cli-worker"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n✨ Success"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" Uploaded secret GCP_SERVICE_ACCOUNT\n")])])]),t("h3",{attrs:{id:"密钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#密钥"}},[s._v("#")]),s._v(" 密钥")]),s._v(" "),t("p",[s._v("访问该服务时所需的密钥，防止别人随意使用你的 "),t("code",[s._v("Gemini CLI")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("wrangler secret put OPENAI_API_KEY\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("✔ Enter a secret value: … ********************\n🌀 Creating the secret "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the Worker "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gemini-cli-worker"')]),s._v(" \n✨ Success"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" Uploaded secret OPENAI_API_KEY\n")])])]),t("h3",{attrs:{id:"部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[s._v("#")]),s._v(" 部署")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" run deploy\n")])])]),t("p",[s._v("输出如下内容")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" gemini-cli-worker@1.0.0 deploy /path/to/gitHub/gemini-cli-openai\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" wrangler deploy\n\nCloudflare collects anonymous telemetry about your usage of Wrangler. Learn "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" at https://github.com/cloudflare/workers-sdk/tree/main/packages/wrangler/telemetry.md\n\n ⛅️ wrangler "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.22")]),s._v(".0\n───────────────────\nTotal Upload: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("102.28")]),s._v(" KiB / gzip: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("24.22")]),s._v(" KiB\nWorker Startup Time: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" ms\nYour Worker has access to the following bindings:\nBinding                                                   Resource          \nenv.GEMINI_CLI_KV "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("      KV Namespace      \n\nUploaded gemini-cli-worker "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.07")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nDeployed gemini-cli-worker triggers "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.81")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  https://gemini-cli-worker.lxf.workers.dev\nCurrent Version ID: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n")])])]),t("h2",{attrs:{id:"五、使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五、使用"}},[s._v("#")]),s._v(" 五、使用")]),s._v(" "),t("p",[s._v("如上述部署完成后，会输出类似这种域名链接 "),t("code",[s._v("https://gemini-cli-worker.lxf.workers.dev")]),s._v("，访问后页面显示如下内容说明搭建成功。")]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Gemini CLI OpenAI Worker"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"description"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OpenAI-compatible API for Google Gemini models via OAuth"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"authentication"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"required"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Bearer token in Authorization header"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"endpoints"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"chat_completions"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/v1/chat/completions"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"models"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/v1/models"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"debug"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"cache"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/v1/debug/cache"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"token_test"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/v1/token-test"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"full_test"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/v1/test"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"documentation"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://github.com/gewoonjaap/gemini-cli-openai"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("我们在链接后面拼上 "),t("code",[s._v("/v1")]),s._v(" 就可以使用了")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20230813121546/image/202507271330208.png",alt:""}})]),s._v(" "),t("p",[s._v("如图，这里以 "),t("code",[s._v("Roo Code")]),s._v(" 为例，新增一个配置文件，选择 "),t("code",[s._v("OpenAI Compatible")]),s._v("，填写基础 "),t("code",[s._v("URL")]),s._v(" 和密钥，然后点击模型，会自动列出所有支持的模型，选择你需要的模型后保存就可以使用了。")])])}),[],!1,null,null,null);t.default=n.exports}}]);