(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{525:function(t,a,s){"use strict";s.r(a);var n=s(21),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"一、简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、简介"}},[t._v("#")]),t._v(" 一、简介")]),t._v(" "),a("p",[a("code",[t._v("Frida")]),t._v(" 是一个跨平台的轻量级 "),a("code",[t._v("Hook")]),t._v(" 框架，支持 "),a("code",[t._v("MacOS")]),t._v("、"),a("code",[t._v("Linux")]),t._v(" 和 "),a("code",[t._v("Windows")]),t._v(" 操作系统，提供了精简的 "),a("code",[t._v("Python")]),t._v(" 接口和功能丰富的 "),a("code",[t._v("JS")]),t._v(" 接口，除了可以使用自身的控制台交互以外，还可以使用 "),a("code",[t._v("Python")]),t._v(" 将 "),a("code",[t._v("JS")]),t._v(" 脚本注入到运行程序中，通过 "),a("code",[t._v("Frida")]),t._v(" 可以获取程序的详细信息、拦截和调用指定函数、注入代码、修改参数等。")]),t._v(" "),a("p",[a("code",[t._v("Frida")]),t._v(" 源代码托管："),a("a",{attrs:{href:"https://github.com/frida",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/frida"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"二、安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、安装"}},[t._v("#")]),t._v(" 二、安装")]),t._v(" "),a("h3",{attrs:{id:"ios"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ios"}},[t._v("#")]),t._v(" "),a("code",[t._v("iOS")])]),t._v(" "),a("p",[t._v("添加软件源 "),a("code",[t._v("https://build.frida.re/")]),t._v("，然后搜索 "),a("code",[t._v("Frida")]),t._v(" 安装即可。")]),t._v(" "),a("p",[t._v("安装完成后可能通过 "),a("code",[t._v("ps")]),t._v(" 看到 "),a("code",[t._v("frida-server")]),t._v(" 后台程序则说明安装成功，若没有可以重启手机后再看看")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("lxf-iPad:~ root"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ps -ax | grep frida")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("26717")]),t._v(" ??         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":00.08 /usr/sbin/frida-server\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("26731")]),t._v(" ttys000    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":00.01 "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" frida\n")])])]),a("h3",{attrs:{id:"macos"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#macos"}},[t._v("#")]),t._v(" "),a("code",[t._v("MacOS")])]),t._v(" "),a("p",[t._v("使用 "),a("code",[t._v("pip")]),t._v(" 进行安装")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("pip "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" frida-tools "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# CLI tools")]),t._v("\npip "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" frida       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Python bindings")]),t._v("\n")])])]),a("p",[t._v("后续需要升级的话，可以使用 "),a("code",[t._v("--upgrade")]),t._v(" 参数")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("pip "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" frida-tools "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--upgrade")]),t._v("\npip "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" frida "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--upgrade")]),t._v("\n")])])]),a("p",[t._v("如果报 "),a("code",[t._v("command not found:pip")]),t._v(" 错误，说明当前系统没有安装 "),a("code",[t._v("pip")]),t._v("，可以使用下方命令安装")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("brew "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://bootstrap.pypa.io/get-pip.py\npython3 get-pip.py\n")])])]),a("p",[t._v("执行完成后会提示你将对应 "),a("code",[t._v("python")]),t._v(" 版本的 "),a("code",[t._v("bin")]),t._v(" 路径添加到 "),a("code",[t._v("PATH")]),t._v(" 中，如：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=~")]),t._v("/Library/Python/3.8/bin:"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),t._v("\n")])])]),a("p",[t._v("当然，如果你也有用 "),a("code",[t._v("pyenv")]),t._v("，则可以忽略上述的 "),a("code",[t._v("pip")]),t._v(" 安装流程，因为 "),a("code",[t._v("pyenv")]),t._v(" 自带了 "),a("code",[t._v("pip")]),t._v("。")]),t._v(" "),a("p",[t._v("你可以用 "),a("code",[t._v("which")]),t._v(" 命令查看你的 "),a("code",[t._v("pip")]),t._v(" 的安装位置。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("➜  ~ which pip\n/usr/local/var/pyenv/shims/pip\n")])])]),a("h2",{attrs:{id:"三、入门"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、入门"}},[t._v("#")]),t._v(" 三、入门")]),t._v(" "),a("p",[t._v("除了 "),a("code",[t._v("frida")]),t._v(" 主程序外，"),a("code",[t._v("frida-tools")]),t._v(" 里还提供了五个实用工具，它们位于 "),a("code",[t._v("/usr/local/bin/")]),t._v(" 目录下")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-al")]),t._v(" /usr/local/bin/frida-*\n")])])]),a("p",[t._v("如果使用的是 "),a("code",[t._v("pyenv")]),t._v(" 的 "),a("code",[t._v("pip")]),t._v(" 安装的 "),a("code",[t._v("frida")]),t._v("，则它们会被安装到 "),a("code",[t._v("/usr/local/var/pyenv/shims/")]),t._v(" 目录下")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-al")]),t._v(" /usr/local/var/pyenv/shims/frida-*\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("-rwxr-xr-x  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" lxf  admin  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("180")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(":05 /usr/local/var/pyenv/shims/frida-apk\n-rwxr-xr-x  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" lxf  admin  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("180")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(":05 /usr/local/var/pyenv/shims/frida-create\n-rwxr-xr-x  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" lxf  admin  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("180")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(":05 /usr/local/var/pyenv/shims/frida-discover\n-rwxr-xr-x  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" lxf  admin  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("180")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(":05 /usr/local/var/pyenv/shims/frida-join\n-rwxr-xr-x  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" lxf  admin  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("180")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(":05 /usr/local/var/pyenv/shims/frida-kill\n-rwxr-xr-x  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" lxf  admin  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("180")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(":05 /usr/local/var/pyenv/shims/frida-ls-devices\n-rwxr-xr-x  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" lxf  admin  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("180")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(":05 /usr/local/var/pyenv/shims/frida-ps\n-rwxr-xr-x  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" lxf  admin  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("180")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(":05 /usr/local/var/pyenv/shims/frida-trace\n")])])]),a("h3",{attrs:{id:"_1、查看可用的设备列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、查看可用的设备列表"}},[t._v("#")]),t._v(" 1、查看可用的设备列表")]),t._v(" "),a("p",[a("code",[t._v("frida-ls-devices")]),t._v(" 用于获取可用的设备列表，在多设备交互的情况下会非常有用")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("➜  ~ frida-ls-devices\nId                                        Type    Name\n----------------------------------------  ------  ------------\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("local")]),t._v("                                     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("local")]),t._v("   Local System\nd007dc58edd70caad950ff01b41ebf73cfa49fbe  usb     iPad\nsocket                                    remote  Local Socket\n")])])]),a("h3",{attrs:{id:"_2、获取设备的进程列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、获取设备的进程列表"}},[t._v("#")]),t._v(" 2、获取设备的进程列表")]),t._v(" "),a("p",[a("code",[t._v("frida-ps")]),t._v(" 用于获取进程列表信息")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("➜  ~ frida-ps "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--help")]),t._v("\nusage: frida-ps "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\noptions:\n  -h, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--help")]),t._v("            show this "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v(" message and "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v(" ID, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--device")]),t._v(" ID    connect to device with the given ID\n  -U, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--usb")]),t._v("             connect to USB device\n  -R, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--remote")]),t._v("          connect to remote frida-server\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-H")]),t._v(" HOST, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--host")]),t._v(" HOST  connect to remote frida-server on HOST\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--certificate")]),t._v(" CERTIFICATE\n                        speak TLS with HOST, expecting CERTIFICATE\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--origin")]),t._v(" ORIGIN       connect to remote server with “Origin” header "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" to\n                        ORIGIN\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--token")]),t._v(" TOKEN         authenticate with HOST using TOKEN\n  --keepalive-interval INTERVAL\n                        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" keepalive interval "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" seconds, or "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" to disable\n                        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("defaults to "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-1")]),t._v(" to auto-select based on transport"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--p2p")]),t._v("                 establish a peer-to-peer connection with target\n  --stun-server ADDRESS\n                        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" STUN server ADDRESS to use with "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--p2p")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--relay")]),t._v(" address,username,password,turn-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("udp,tcp,tls"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" relay to use with "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--p2p")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-O")]),t._v(" FILE, --options-file FILE\n                        text "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" containing additional "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" line options\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--version")]),t._v("             show program's version number and "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n  -a, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--applications")]),t._v("    list only applications\n  -i, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--installed")]),t._v("       include all installed applications\n  -j, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--json")]),t._v("            output results as JSON\n")])])]),a("p",[t._v("这里说明一下常用的命令参数")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("-U")])]),t._v(" "),a("td",[t._v("连接到 "),a("code",[t._v("USB")]),t._v(" 设备")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("-D")])]),t._v(" "),a("td",[t._v("如果当前有多台 "),a("code",[t._v("USB")]),t._v(" 设备，可以使用该参数指定设备的 "),a("code",[t._v("UDID")]),t._v("（"),a("code",[t._v("frida-ls-devices")]),t._v(" 列出的那些 "),a("code",[t._v("id")]),t._v("）")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("-R/-H")])]),t._v(" "),a("td",[t._v("连接到远程 "),a("code",[t._v("frida-server")]),t._v("，主要用于远程调试")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("-a")])]),t._v(" "),a("td",[t._v("仅显示正在运行的应用")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("-i")])]),t._v(" "),a("td",[t._v("显示所有已安装的应用（包括 "),a("code",[t._v("AppStore")]),t._v("安装的应用和系统应用）")])])])]),t._v(" "),a("p",[t._v("具体使用如下：")]),t._v(" "),a("p",[t._v("连接到 "),a("code",[t._v("USB")]),t._v(" 设备查看进程列表")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("~ frida-ps "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-U")]),t._v("\n  PID  Name\n-----  ---------------------------------------------------\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("25226")]),t._v("   Cydia\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("26745")]),t._v("   Twitter\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21611")]),t._v("   邮件\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("25055")]),t._v("      AppPredictionWidget\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20944")]),t._v("      AppleCredentialManagerDaemon\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1687")]),t._v("      AssetCacheLocatorService\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("23387")]),t._v("      CMFSyncAgent\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])]),a("p",[t._v("连接到 "),a("code",[t._v("USB")]),t._v(" 设备查看正在运行的应用")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("➜  ~ frida-ps "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-U")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-a")]),t._v("\n  PID  Name         Identifier\n-----  -----------  --------------------\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("25226")]),t._v("   Cydia    com.saurik.Cydia\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("26745")]),t._v("   Twitter  com.atebits.Tweetie2\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21611")]),t._v("   邮件       com.apple.mobilemail\n➜  ~\n")])])]),a("p",[t._v("连接到 "),a("code",[t._v("USB")]),t._v(" 设备查看所有安装的应用")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("➜  ~ frida-ps "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-U")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-a")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v("\n  PID  Name                         Identifier\n-----  ---------------------------  ------------------------------------------\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("25226")]),t._v("   Cydia                    com.saurik.Cydia\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("26745")]),t._v("   Twitter                  com.atebits.Tweetie2\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21611")]),t._v("   邮件                       com.apple.mobilemail\n    -   App Store                com.apple.AppStore\n    -   FaceTime 通话              com.apple.facetime\n    -   LXFProtocolTool_Example  org.cocoapods.demo.LXFProtocolTool-Example\n    -   Photo Booth              com.apple.Photo-Booth\n    -   Safari 浏览器               com.apple.mobilesafari\n    -   Substitute               com.ex.substitute.settings\n    -   SwiftyFitsize_Swift      org.cocoapods.demo.SwiftyFitsize-Swift\n    -   iTunes Store             com.apple.MobileStore\n    -   信息                       com.apple.MobileSMS\n    -   查找 iPhone                com.apple.mobileme.fmip1\n    -   设置                       com.apple.Preferences\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n")])])]),a("p",[t._v("连接到指定的 "),a("code",[t._v("USB")]),t._v(" 设备查看正在运行的应用")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("➜  ~ frida-ps "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v(" d007dc58edd70caad950ff01b41ebf73cfa49fbe "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-a")]),t._v("\n  PID  Name         Identifier\n-----  -----------  --------------------\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("25226")]),t._v("   Cydia    com.saurik.Cydia\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("26745")]),t._v("   Twitter  com.atebits.Tweetie2\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21611")]),t._v("   邮件       com.apple.mobilemail\n➜  ~\n")])])]),a("h3",{attrs:{id:"_3、杀死进程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、杀死进程"}},[t._v("#")]),t._v(" 3、杀死进程")]),t._v(" "),a("p",[a("code",[t._v("frida-kill")]),t._v(" 用来结束设备上的指定进程")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("➜  ~ frida-kill "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--help")]),t._v("\nusage: frida-kill "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" process\n\noptions:\n  -h, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--help")]),t._v("            show this "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v(" message and "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v(" ID, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--device")]),t._v(" ID    connect to device with the given ID\n  -U, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--usb")]),t._v("             connect to USB device\n  -R, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--remote")]),t._v("          connect to remote frida-server\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-H")]),t._v(" HOST, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--host")]),t._v(" HOST  connect to remote frida-server on HOST\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--certificate")]),t._v(" CERTIFICATE\n                        speak TLS with HOST, expecting CERTIFICATE\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--origin")]),t._v(" ORIGIN       connect to remote server with “Origin” header "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" to\n                        ORIGIN\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--token")]),t._v(" TOKEN         authenticate with HOST using TOKEN\n  --keepalive-interval INTERVAL\n                        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" keepalive interval "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" seconds, or "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" to disable\n                        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("defaults to "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-1")]),t._v(" to auto-select based on transport"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--p2p")]),t._v("                 establish a peer-to-peer connection with target\n  --stun-server ADDRESS\n                        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" STUN server ADDRESS to use with "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--p2p")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--relay")]),t._v(" address,username,password,turn-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("udp,tcp,tls"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" relay to use with "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--p2p")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-O")]),t._v(" FILE, --options-file FILE\n                        text "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" containing additional "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" line options\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--version")]),t._v("             show program's version number and "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n")])])]),a("p",[t._v("举个例子，杀掉 "),a("code",[t._v("PID")]),t._v(" 为 "),a("code",[t._v("26745")]),t._v(" 的 "),a("code",[t._v("Twitter")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("frida-kill "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-U")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("26745")]),t._v("\nfrida-kill "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-U")]),t._v(" Twitter\nfrida-kill "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v(" d007dc58edd70caad950ff01b41ebf73cfa49fbe "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("26745")]),t._v("\nfrida-kill "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v(" d007dc58edd70caad950ff01b41ebf73cfa49fbe Twitter\n")])])]),a("h3",{attrs:{id:"_4、跟踪函数-方法的调用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、跟踪函数-方法的调用"}},[t._v("#")]),t._v(" 4、跟踪函数/方法的调用")]),t._v(" "),a("p",[a("code",[t._v("frida-trace")]),t._v(" 用于跟踪函数或方法的调用。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("➜  ~ frida-trace "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--help")]),t._v("\nusage: frida-trace "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" target\n\npositional arguments:\n  args                  extra arguments and/or target\n\noptions:\n  -h, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--help")]),t._v("            show this "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v(" message and "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v(" ID, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--device")]),t._v(" ID    connect to device with the given ID\n  -U, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--usb")]),t._v("             connect to USB device\n  -R, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--remote")]),t._v("          connect to remote frida-server\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-H")]),t._v(" HOST, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--host")]),t._v(" HOST  connect to remote frida-server on HOST\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--certificate")]),t._v(" CERTIFICATE\n                        speak TLS with HOST, expecting CERTIFICATE\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--origin")]),t._v(" ORIGIN       connect to remote server with “Origin” header "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" to ORIGIN\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--token")]),t._v(" TOKEN         authenticate with HOST using TOKEN\n  --keepalive-interval INTERVAL\n                        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" keepalive interval "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" seconds, or "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" to disable "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("defaults to "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-1")]),t._v(" to auto-select based\n                        on transport"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--p2p")]),t._v("                 establish a peer-to-peer connection with target\n  --stun-server ADDRESS\n                        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" STUN server ADDRESS to use with "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--p2p")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--relay")]),t._v(" address,username,password,turn-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("udp,tcp,tls"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" relay to use with "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--p2p")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" TARGET, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--file")]),t._v(" TARGET\n                        spawn FILE\n  -F, --attach-frontmost\n                        attach to frontmost application\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-n")]),t._v(" NAME, --attach-name NAME\n                        attach to NAME\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" PID, --attach-pid PID\n                        attach to PID\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-W")]),t._v(" PATTERN, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--await")]),t._v(" PATTERN\n                        await spawn matching PATTERN\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--stdio")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("inherit,pipe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                        stdio behavior when spawning "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("defaults to “inherit”"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--aux")]),t._v(" option          "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" aux option when spawning, such as “uid"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("int"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("42")]),t._v("” "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("supported types are: string, bool,\n                        int"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--realm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("native,emulated"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                        realm to attach "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--runtime")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("qjs,v8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("    script runtime to use\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--debug")]),t._v("               "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" the Node.js compatible script debugger\n  --squelch-crash       "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" enabled, will not dump crash report to console\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-O")]),t._v(" FILE, --options-file FILE\n                        text "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" containing additional "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" line options\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--version")]),t._v("             show program"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s version number and exit\n  -I MODULE, --include-module MODULE\n                        include MODULE\n  -X MODULE, --exclude-module MODULE\n                        exclude MODULE\n  -i FUNCTION, --include FUNCTION\n                        include [MODULE!]FUNCTION\n  -x FUNCTION, --exclude FUNCTION\n                        exclude [MODULE!]FUNCTION\n  -a MODULE!OFFSET, --add MODULE!OFFSET\n                        add MODULE!OFFSET\n  -T INCLUDE_IMPORTS, --include-imports INCLUDE_IMPORTS\n                        include program'")]),t._v("s imports\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" MODULE, --include-module-imports MODULE\n                        include MODULE imports\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" OBJC_METHOD, --include-objc-method OBJC_METHOD\n                        include OBJC_METHOD\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-M")]),t._v(" OBJC_METHOD, --exclude-objc-method OBJC_METHOD\n                        exclude OBJC_METHOD\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-j")]),t._v(" JAVA_METHOD, --include-java-method JAVA_METHOD\n                        include JAVA_METHOD\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-J")]),t._v(" JAVA_METHOD, --exclude-java-method JAVA_METHOD\n                        exclude JAVA_METHOD\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" DEBUG_SYMBOL, --include-debug-symbol DEBUG_SYMBOL\n                        include DEBUG_SYMBOL\n  -q, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--quiet")]),t._v("           "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" not "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),t._v(" output messages\n  -d, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--decorate")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" module name to generated onEnter log statement\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-S")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")]),t._v(", --init-session "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")]),t._v("\n                        path to JavaScript "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" used to initialize the session\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-P")]),t._v(" PARAMETERS_JSON, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--parameters")]),t._v(" PARAMETERS_JSON\n                        parameters as JSON, exposed as a global named "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'parameters'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-o")]),t._v(" OUTPUT, "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--output")]),t._v(" OUTPUT\n                        dump messages to "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("\n")])])]),a("h4",{attrs:{id:"_4-1-跟踪函数调用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-跟踪函数调用"}},[t._v("#")]),t._v(" 4.1 跟踪函数调用")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v(" ➜  ~ frida-trace "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-U")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v(" compress "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"recv*"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-x")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"recvmsg*"')]),t._v(" Twitter\nInstrumenting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\ncompress: Auto-generated handler at "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/Users/lxf/Desktop/LXF/reverse/Test/__handlers__/libz.1.dylib/compress.js"')]),t._v("\nrecvfrom"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$NOCANCEL")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Auto-generated handler at "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/Users/lxf/Desktop/LXF/reverse/Test/__handlers__/libsystem_kernel.dylib/recvfrom_NOCANCEL.js"')]),t._v("\nrecvfrom: Auto-generated handler at "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/Users/lxf/Desktop/LXF/reverse/Test/__handlers__/libsystem_kernel.dylib/recvfrom.js"')]),t._v("\nrecv: Auto-generated handler at "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/Users/lxf/Desktop/LXF/reverse/Test/__handlers__/libsystem_c.dylib/recv.js"')]),t._v("\nrecv"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$NOCANCEL")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Auto-generated handler at "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/Users/lxf/Desktop/LXF/reverse/Test/__handlers__/libsystem_c.dylib/recv_NOCANCEL.js"')]),t._v("\nStarted tracing "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" functions. Press Ctrl+C to stop.\n")])])]),a("p",[t._v("参数说明")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("-i")])]),t._v(" "),a("td",[t._v("包含某个函数，支持模糊匹配")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("-x")])]),t._v(" "),a("td",[t._v("排除某个函数，支持模糊匹配")])])])]),t._v(" "),a("p",[t._v("注：进行模糊匹配时，需要使用双引号进行包裹！")]),t._v(" "),a("p",[t._v("上述命令的意思：跟踪名为 "),a("code",[t._v("compress")]),t._v(" 和以 "),a("code",[t._v("recv")]),t._v(" 开头的函数，且排除以 "),a("code",[t._v("recvmsg")]),t._v(" 开头的函数。")]),t._v(" "),a("p",[t._v("当跟踪的函数被触发时，会输出以下日志：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("           /* TID 0x1bb43 */\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("36078")]),t._v(" ms  recv"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$NOCANCEL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("36078")]),t._v(" ms     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" recvfrom"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$NOCANCEL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("36081")]),t._v(" ms  recv"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$NOCANCEL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("36081")]),t._v(" ms     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" recvfrom"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$NOCANCEL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("36082")]),t._v(" ms  recv"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$NOCANCEL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("36082")]),t._v(" ms     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" recvfrom"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$NOCANCEL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("36083")]),t._v(" ms  recv"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$NOCANCEL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("36083")]),t._v(" ms     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" recvfrom"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$NOCANCEL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("36083")]),t._v(" ms  recv"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$NOCANCEL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("36083")]),t._v(" ms     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" recvfrom"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$NOCANCEL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("命令在执行后会在当前目录下会生成一个名为 "),a("code",[t._v("__handlers__")]),t._v(" 的文件夹，里面存放的是自动生成的脚本文件")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n└── __handlers__\n    ├── libsystem_c.dylib\n    │   ├── recv.js\n    │   └── recv_NOCANCEL.js\n    ├── libsystem_kernel.dylib\n    │   ├── recvfrom.js\n    │   └── recvfrom_NOCANCEL.js\n    └── libz.1.dylib\n        └── compress.js\n")])])]),a("p",[t._v("上述命令是在目标 "),a("code",[t._v("App")]),t._v(" 打开后执行的，如果我们需要强制启动 "),a("code",[t._v("App")]),t._v(" 来进行跟踪，可以使用 "),a("code",[t._v("-f 应用的BundleID")]),t._v(" 参数，如：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("➜  ~ frida-trace "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-U")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v(" compress "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"recv*"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-x")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"recvmsg*"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.atebits.Tweetie2"')]),t._v("\nInstrumenting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\ncompress: Loaded handler at "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/Users/lxf/Desktop/LXF/reverse/Test/__handlers__/libz.1.dylib/compress.js"')]),t._v("\nrecvfrom"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$NOCANCEL")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Loaded handler at "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/Users/lxf/Desktop/LXF/reverse/Test/__handlers__/libsystem_kernel.dylib/recvfrom_NOCANCEL.js"')]),t._v("\nrecvfrom: Loaded handler at "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/Users/lxf/Desktop/LXF/reverse/Test/__handlers__/libsystem_kernel.dylib/recvfrom.js"')]),t._v("\nrecv: Loaded handler at "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/Users/lxf/Desktop/LXF/reverse/Test/__handlers__/libsystem_c.dylib/recv.js"')]),t._v("\nrecv"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$NOCANCEL")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Loaded handler at "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/Users/lxf/Desktop/LXF/reverse/Test/__handlers__/libsystem_c.dylib/recv_NOCANCEL.js"')]),t._v("\nStarted tracing "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" functions. Press Ctrl+C to stop.\n")])])]),a("p",[t._v("注："),a("code",[t._v("frida-trace")]),t._v(" 执行时不会覆盖已有的脚本文件（即 "),a("code",[t._v("__handlers__")]),t._v(" 文件夹下的脚本），所以可以进行任意修改这些 "),a("code",[t._v("JS")]),t._v(" 文件来添加想要的功能。")]),t._v(" "),a("h4",{attrs:{id:"_4-2-跟踪-oc-方法的调用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-跟踪-oc-方法的调用"}},[t._v("#")]),t._v(" 4.2 跟踪 "),a("code",[t._v("OC")]),t._v(" 方法的调用")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("➜  Test frida-trace "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-U")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-[T1HomeTimelineItemsViewController _load*]"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-M")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-[T1HomeTimelineItemsViewController _loadBottomWithSource:]"')]),t._v(" Twitter\nInstrumenting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1HomeTimelineItemsViewController _loadTopWithSource:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Loaded handler at "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/Users/lxf/Desktop/LXF/reverse/Test/__handlers__/T1HomeTimelineItemsViewController/_loadTopWithSource_.js"')]),t._v("\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1HomeTimelineItemsViewController _loadGap:withSource:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Loaded handler at "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/Users/lxf/Desktop/LXF/reverse/Test/__handlers__/T1HomeTimelineItemsViewController/_loadGap_withSource_.js"')]),t._v("\nStarted tracing "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" functions. Press Ctrl+C to stop.\n           /* TID 0x303 */\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15600")]),t._v(" ms  -"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1HomeTimelineItemsViewController _loadTopWithSource:0xc8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("p",[t._v("参数说明")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("-m")])]),t._v(" "),a("td",[t._v("包含某个方法，支持模糊匹配")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("-M")])]),t._v(" "),a("td",[t._v("排除某个方法，支持模糊匹配")])])])]),t._v(" "),a("h4",{attrs:{id:"_4-3-跟踪调用栈"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-跟踪调用栈"}},[t._v("#")]),t._v(" 4.3 跟踪调用栈")]),t._v(" "),a("p",[t._v("只需要在 "),a("code",[t._v("JS")]),t._v(" 文件中添加如下代码片段即可跟踪某个方法的调用栈")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\tBacktrace:\\n\\t'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" Thread"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("backtrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Backtracer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ACCURATE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("DebugSymbol"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fromAddress"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\n\\t'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("想了解详细的接口说明可以在 "),a("code",[t._v("Frida")]),t._v(" 官网链接："),a("a",{attrs:{href:"https://frida.re/docs/javascript-api/#thread",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://frida.re/docs/javascript-api/#thread"),a("OutboundLink")],1),t._v(" 上找到。")]),t._v(" "),a("h3",{attrs:{id:"_5、交互模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、交互模式"}},[t._v("#")]),t._v(" 5、交互模式")]),t._v(" "),a("p",[a("code",[t._v("frida")]),t._v(" 提供了两种进入交互模式的方式")]),t._v(" "),a("h4",{attrs:{id:"_5-1-通过应用名或-pid-附加"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-通过应用名或-pid-附加"}},[t._v("#")]),t._v(" 5.1 通过应用名或 "),a("code",[t._v("PID")]),t._v(" 附加")]),t._v(" "),a("p",[t._v("应用于 "),a("code",[t._v("App")]),t._v(" 已打开的情况下附加的情景")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("frida "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-U")]),t._v(" 应用名\nfrida "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-U")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" PID\n")])])]),a("p",[t._v("当使用 "),a("code",[t._v("PID")]),t._v(" 进行附加时，"),a("code",[t._v("-p")]),t._v(" 可加可不加")]),t._v(" "),a("p",[t._v("举例：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("frida "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-U")]),t._v(" Twitter\nfrida "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-U")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("26984")]),t._v("\nfrida "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-U")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("26984")]),t._v("\n")])])]),a("h4",{attrs:{id:"_5-2-启动应用进入交互模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-启动应用进入交互模式"}},[t._v("#")]),t._v(" 5.2 启动应用进入交互模式")]),t._v(" "),a("p",[t._v("应用于 "),a("code",[t._v("App")]),t._v(" 未打开的情景")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("➜  Test frida "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-U")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" com.atebits.Tweetie2\n     ____\n    / _  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   Frida "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15.1")]),t._v(".17 - A world-class dynamic instrumentation toolkit\n   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" _  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   Commands:\n   /_/ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("_"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v("      -"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Displays the "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v(" system\n   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("       object?   -"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Display information about "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'object'")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("       exit/quit -"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Exit\n   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("   More info at https://frida.re/docs/home/\n   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("   Connected to iPad "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("d007dc58edd70caad950ff01b41ebf73cfa49fbe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nSpawned "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("com.atebits.Tweetie2"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" Use %resume to "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("let")]),t._v(" the main thread start executing"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("iPad::com.atebits.Tweetie2 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("-"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" %resume\n")])])]),a("p",[t._v("注：需要自己额外再输入 "),a("code",[t._v("%resume")]),t._v("，否则目标应用将一直处于暂停的状态。")]),t._v(" "),a("p",[t._v("如果启动应用后被强制退出或不想再额外输入 "),a("code",[t._v("%resume")]),t._v("，可以加上 "),a("code",[t._v("--no-pause")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("frida "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-U")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" com.atebits.Tweetie2 --no-pause\n")])])]),a("h2",{attrs:{id:"四、实战"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、实战"}},[t._v("#")]),t._v(" 四、实战")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20210320170901/image/202203271846280.png",alt:""}})]),t._v(" "),a("blockquote",[a("p",[t._v("针对上图中的【翻译推文】，我们来把这个标题和点击事件给修改掉")])]),t._v(" "),a("p",[t._v("首先我们要做的就是视图组件定位，在这个页面下，使用 "),a("code",[t._v("FLEX")]),t._v(" 工具便可轻松定位到")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20210320170901/image/202203271846973.png",alt:""}})]),t._v(" "),a("p",[t._v("点击右侧的感叹号，可以看到该视图的属性和方法")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20210320170901/image/202203271846745.png",alt:""}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20210320170901/image/202203271847821.png",alt:""}})]),t._v(" "),a("p",[t._v("然后通过如下代码，确认其是否为我们想要 "),a("code",[t._v("hook")]),t._v(" 的方法")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ObjC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("available"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" didTap "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ObjC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("T1TranslateButton"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'- _didTap:forEvent:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" setTitle "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ObjC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("T1TranslateButton"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'- setTitleText:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    Interceptor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("attach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("setTitleOldImp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onEnter")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("args")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"args 0 -- "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ObjC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"args 2 -- "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ObjC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    didTap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("implementation "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ObjC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("implement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("setTitle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("handle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" selector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arg1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arg2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" self "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ObjC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"self -- "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("打开 "),a("code",[t._v("Twitter")]),t._v(" 后，执行如下命令 "),a("code",[t._v("frida -U -l Twitter.js Twitter")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("➜ frida "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-U")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-l")]),t._v(" Twitter.js Twitter\n     ____\n    / _  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   Frida "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15.1")]),t._v(".17 - A world-class dynamic instrumentation toolkit\n   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" _  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   Commands:\n   /_/ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("_"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v("      -"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Displays the "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v(" system\n   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("       object?   -"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Display information about "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'object'")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("       exit/quit -"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Exit\n   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("   More info at https://frida.re/docs/home/\n   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("   Connected to iPad "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("d007dc58edd70caad950ff01b41ebf73cfa49fbe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("iPad::Twitter "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("-"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[a("code",[t._v("Twitter")]),t._v(" 进入到指定页面后输出：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("args "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" --  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("T1TranslateButton: 0x122e46f80"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" baseClass "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" UIButton"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" frame "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("66")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" opaque "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" NO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" layer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("CALayer: 0x28372a76"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("0")]),t._v(">>")]),t._v("\nargs "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" --  翻译推文\n")])])]),a("p",[t._v("点一下【翻译推文】按钮输出：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("iPad::Twitter "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("-"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" self --  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("T1TranslateButton: 0x122e46f80"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" baseClass "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" UIButton"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" frame "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("66")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" opaque "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" NO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" layer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("CALayer: 0x28372a76"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("0")]),t._v(">>")]),t._v("\n")])])]),a("p",[t._v("看来是没错了，那接下来，我们把标题和点击事件进行修改，完整代码如下：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ObjC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("available"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" NSString "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ObjC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" UIAlertController "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ObjC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("UIAlertController"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" UIAlertAction "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ObjC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("UIAlertAction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" UIApplication "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ObjC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("UIApplication"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 弹窗")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("showAlert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" alertHandler "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ObjC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Block")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("retType")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'void'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("argTypes")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'object'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("implementation")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n      ObjC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("schedule")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ObjC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mainQueue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" alert "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" UIAlertController"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alertControllerWithTitle_message_preferredStyle_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'LinXunFeng'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'欢迎关注公众号：FSA全栈行动\\n博客：https://fullstackaction.com'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" defaultAction "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" UIAlertAction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("actionWithTitle_style_handler_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'OK'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" alertHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        alert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addAction_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("defaultAction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        UIApplication"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sharedApplication")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("keyWindow")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rootViewController")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("presentViewController_animated_completion_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("alert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 播放系统声音")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("playSystemSound")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" playSound "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NativeFunction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findExportByName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AudioToolbox'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AudioServicesPlaySystemSound'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'void'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'int'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("playSound")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1111")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" didTap "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ObjC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("T1TranslateButton"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'- _didTap:forEvent:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" setTitle "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ObjC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("T1TranslateButton"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'- setTitleText:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 保留旧实现")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" didTapOldImp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" didTap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("implementation\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// hook")]),t._v("\n    Interceptor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("attach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("setTitleOldImp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onEnter")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("args")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ptr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("NSString"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringWithString_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello LinXunFeng，点击我来弹个窗和听个曲吧"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 覆盖实现")]),t._v("\n    didTap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("implementation "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ObjC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("implement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("setTitle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("handle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" selector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arg1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arg2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调用旧实现")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// didTapOldImp(handle, selector, arg1, arg2)")]),t._v("\n      \n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("playSystemSound")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("showAlert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20210320170901/image/202203271848750.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"五、进阶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、进阶"}},[t._v("#")]),t._v(" 五、进阶")]),t._v(" "),a("h3",{attrs:{id:"_1、python-交互"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、python-交互"}},[t._v("#")]),t._v(" 1、"),a("code",[t._v("Python")]),t._v(" 交互")]),t._v(" "),a("p",[a("code",[t._v("Frida")]),t._v(" 提供了 "),a("code",[t._v("Python")]),t._v(" 和 "),a("code",[t._v("JS")]),t._v(" 脚本的交互")]),t._v(" "),a("h4",{attrs:{id:"_1-1、获取设备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1、获取设备"}},[t._v("#")]),t._v(" 1.1、获取设备")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" frida\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'__main__'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n    deviceManager "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" frida"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_device_manager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 枚举所有连接的设备")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deviceManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("enumerate_devices"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 根据 UDID 获取设备")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deviceManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"d007dc58edd70caad950ff01b41ebf73cfa49fbe"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取当前 USB 连接的设备")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("frida"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_usb_device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("运行结果：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"local"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Local System"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'local'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", Device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"socket"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Local Socket"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'remote'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", Device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"d007dc58edd70caad950ff01b41ebf73cfa49fbe"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"iPad"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'usb'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nDevice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"d007dc58edd70caad950ff01b41ebf73cfa49fbe"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"iPad"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'usb'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nDevice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"d007dc58edd70caad950ff01b41ebf73cfa49fbe"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"iPad"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'usb'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h4",{attrs:{id:"_1-2、附加进程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2、附加进程"}},[t._v("#")]),t._v(" 1.2、附加进程")]),t._v(" "),a("p",[t._v("使用 "),a("code",[t._v("attach()")]),t._v(" 附加进程，得到 "),a("code",[t._v("Session")]),t._v(" 实例")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'__main__'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    device "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" frida"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_usb_device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    session "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attach"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Twitter"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进程名")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# session = device.attach(27489)  # PID")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("输出内容：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("Session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pid"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27489")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h4",{attrs:{id:"_1-3、启动进程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3、启动进程"}},[t._v("#")]),t._v(" 1.3、启动进程")]),t._v(" "),a("p",[t._v("使用 "),a("code",[t._v("spawn")]),t._v(" 可以启动进程，不过会进入挂起状态，需要配合 "),a("code",[t._v("resume()")]),t._v(" 方法才能唤醒")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'__main__'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    device "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" frida"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_usb_device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    pid "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("spawn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.atebits.Tweetie2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# session = device.attach(pid)")]),t._v("\n    device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("resume"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("code",[t._v("spawn")]),t._v(" 可携带参数运行")]),t._v(" "),a("p",[t._v("如下方代码所示，运行 "),a("code",[t._v("Safari")]),t._v(" 并打开 "),a("code",[t._v("FSA全栈行动")]),t._v(" 博客： "),a("code",[t._v("https://fullstackaction.com")])]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("pid "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("spawn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.apple.mobilesafari"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://fullstackaction.com/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndevice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("resume"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h4",{attrs:{id:"_1-4、脱离进程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4、脱离进程"}},[t._v("#")]),t._v(" 1.4、脱离进程")]),t._v(" "),a("p",[t._v("得到 "),a("code",[t._v("Session")]),t._v(" 并完成所有操作后，需要使用 "),a("code",[t._v("detach()")]),t._v(" 脱离进程")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'__main__'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    device "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" frida"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_usb_device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    pid "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("spawn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.atebits.Tweetie2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    session "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attach"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("resume"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("detach"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 脱离进程")]),t._v("\n")])])]),a("h4",{attrs:{id:"_1-5、注入-js-脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-5、注入-js-脚本"}},[t._v("#")]),t._v(" 1.5、注入 "),a("code",[t._v("JS")]),t._v(" 脚本")]),t._v(" "),a("p",[t._v("得到 "),a("code",[t._v("Session")]),t._v(" 实例后，就可以调用其 "),a("code",[t._v("create_script")]),t._v(" 方法创建一个脚本对象，再调用该脚本对象的 "),a("code",[t._v("load")]),t._v(" 方法进行脚本注入")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'__main__'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    device "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" frida"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_usb_device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    pid "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("spawn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.atebits.Tweetie2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    session "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attach"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("resume"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    script "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""\n    if (ObjC.available) {\n        var NSHomeDirectory = new NativeFunction(ptr(Module.findExportByName("Foundation", "NSHomeDirectory")), \'pointer\', []);\n        var path = new ObjC.Object(NSHomeDirectory());\n        console.log(path);\n    }\n    """')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("load"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("detach"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("code",[t._v("JS")]),t._v(" 脚本可以保存到本地文件中再进行读取：")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" codecs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./xxx.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'r'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    source "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("read"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nscript "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h4",{attrs:{id:"_1-6、python-与-js-交互"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-6、python-与-js-交互"}},[t._v("#")]),t._v(" 1.6、"),a("code",[t._v("Python")]),t._v(" 与 "),a("code",[t._v("JS")]),t._v(" 交互")]),t._v(" "),a("p",[t._v("向 "),a("code",[t._v("JS")]),t._v(" 端传递参数，"),a("code",[t._v("JS")]),t._v(" 端处理完成后将结果返回给 "),a("code",[t._v("Python")]),t._v(" 端，这种场景还是很常见的，那应该怎么做呢？")]),t._v(" "),a("p",[t._v("示例代码如下：")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" frida\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" threading\n\ng_event "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" threading"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 同步")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("payload_message")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("payload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# print("payload_message -- ", payload)')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"msg"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" payload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("payload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"msg"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'status'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" payload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" payload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'status'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'success'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            g_event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("on_message")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# print("on_message message -- ", message)')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'send'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        payload_message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'payload'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("elif")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stack'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\nSCRIPT_JS "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v("\"\"\"\n    function handleMessage(message) {\n        var cmd = message['cmd'] \n        if (cmd == 'GetDirectory') {\n            var name = message['name']\n            var path;\n            switch (name) {\n            case 'home':\n                var NSHomeDirectory = new NativeFunction(ptr(Module.findExportByName(\"Foundation\", \"NSHomeDirectory\")), 'pointer', []);\n                path = new ObjC.Object(NSHomeDirectory());\n                break;\n            case 'tmp':\n                var NSTemporaryDirectory = new NativeFunction(ptr(Module.findExportByName(\"Foundation\", \"NSTemporaryDirectory\")), 'pointer', []);\n                path = new ObjC.Object(NSTemporaryDirectory());\n                break;\n            default:\n                path = \"写的啥呀\"\n            }\n            if (path) send({msg: path.toString()});\n        }   \n        send({status: 'success'});\n    }\n    recv(handleMessage);\n\"\"\"")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 根据名字获取对应的沙盒路径")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDirectory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target_process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    device "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" frida"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_usb_device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    session "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attach"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target_process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    script "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("SCRIPT_JS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'message'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" on_message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("load"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("post"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'cmd'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GetDirectory'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    g_event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("wait"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("detach"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'__main__'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# getDirectory('Twitter', 'home')")]),t._v("\n    getDirectory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Twitter'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tmp'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ol",[a("li",[a("code",[t._v("g_event")]),t._v(" 是为了保证同步")]),t._v(" "),a("li",[a("code",[t._v("JS")]),t._v(" 端可以设置 "),a("code",[t._v("recv()")]),t._v(" 的回调接收 "),a("code",[t._v("Python")]),t._v(" 端的消息")]),t._v(" "),a("li",[a("code",[t._v("Python")]),t._v(" 端通过 "),a("code",[t._v("script.on()")]),t._v(" 设置回调，再使用 "),a("code",[t._v("script.post()")]),t._v(" 将参数传递给 "),a("code",[t._v("JS")]),t._v(" 端，然后调用 "),a("code",[t._v("g_event.wait()")]),t._v(" 进入等待状态")]),t._v(" "),a("li",[a("code",[t._v("JS")]),t._v(" 端内部处理完成后，使用 "),a("code",[t._v("send()")]),t._v(" 将 "),a("code",[t._v("{status: 'success'}")]),t._v(" 传递给 "),a("code",[t._v("Python")]),t._v(" 端")]),t._v(" "),a("li",[t._v("在 "),a("code",[t._v("on_message")]),t._v(" 回调中取到 "),a("code",[t._v("JS")]),t._v(" 端返回的数据，当识别到 "),a("code",[t._v("status")]),t._v(" 为 "),a("code",[t._v("success")]),t._v(" 后，调用 "),a("code",[t._v("g_event.set()")]),t._v(" 使主线程继续执行")])]),t._v(" "),a("h3",{attrs:{id:"_2、拦截某个类的所有方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、拦截某个类的所有方法"}},[t._v("#")]),t._v(" 2、拦截某个类的所有方法")]),t._v(" "),a("p",[t._v("如果想对某个类的所有方法进行批量拦截，可以使用 "),a("code",[t._v("ApiResolver")]),t._v(" 接口，它可以根据正则表达式获取符合条件的所有方法")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" resolver "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ApiResolver")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'objc'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nresolver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("enumerateMatches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*[T1TranslateButton *]'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onMatch")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("match"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('":"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" match"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'address'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onComplete")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("输出结果：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("+"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton tfn_defaultShouldFlipForRightToLeftTransform"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be4014\n+"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton button"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be2774\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton tapActionBlock"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be4280\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton setTapActionBlock:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be4290\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton translationSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be4250\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton setLogoTapActionBlock:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be42ac\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton setShowingTranslation:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be2c10\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton setOriginalLanguage:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be2b58\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton setTranslationSource:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be2cec\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton _didTap:forEvent:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be296c\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton _t1_didHover:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be4140\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton setSelectionPadding:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be42d8\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton touchRect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be42f8\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton _t1_isTouchingLogo:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be2a8c\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton touchLogoRect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be4328\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton _t1_buttonTitle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be2f28\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton autoTranslationExpanded"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be4270\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton _t1_imageHeightOffsetForLogo:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be3164\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton _t1_titleRectWithTitleString:origin:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be32b8\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton _t1_imageRectWithOrigin:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be3394\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton _t1_drawRectFor:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be3f94\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton setTouchRect:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be4310\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton _t1_drawHighlightWithContext:andRect:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be401c\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton setTouchLogoRect:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be4340\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton setAutoTranslationExpanded:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be2cc4\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton originalLanguage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be4240\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton showingTranslation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be4260\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton logoTapActionBlock"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be429c\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton selectionPadding"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be42c8\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton _dynamicColorsDidReload:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be3ed0\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton titleText"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be42b8\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton _titleColor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be2ea8\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton logoImage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be42e8\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton _logoImage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be2d14\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton dealloc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be28e4\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton .cxx_destruct"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be4358\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton initWithFrame:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be27dc\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton sizeThatFits:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be3408\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton setHighlighted:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be2b08\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton drawRect:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be3798\n-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("T1TranslateButton setTitleText:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":0x101be2c38\n")])])]),a("h3",{attrs:{id:"_3、替换原方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、替换原方法"}},[t._v("#")]),t._v(" 3、替换原方法")]),t._v(" "),a("p",[a("code",[t._v("Interceptor.attach()")]),t._v(" 可以在拦截目标后，打印参数，修改返回值，但无法阻止原方法的执行")]),t._v(" "),a("p",[t._v("我们可以给原方法的 "),a("code",[t._v("implementation")]),t._v(" 进行赋值，从而覆盖其实现")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("var didTap = ObjC.classes.T1TranslateButton['- _didTap:forEvent:']\n\nvar didTapOldImp = didTap.implementation\n\n// 覆盖实现\ndidTap.implementation = ObjC.implement(setTitle, function(handle, selector, arg1, arg2) {\n\n  var self = ObjC.Object(handle)\n  console.log(\"self -- \", self) \n\n  // 调用旧实现\n  // didTapOldImp(handle, selector, arg1, arg2)\n})\n")])])]),a("p",[t._v("这里需要注意的是，像 "),a("code",[t._v("_didTap:forEvent:")]),t._v(" 这里需要传递两个参数，则 "),a("code",[t._v("ObjC.implement")]),t._v(" 的回调中也需要写明两个参数（"),a("code",[t._v("arg1")]),t._v("、"),a("code",[t._v("arg2")]),t._v("），即需要多少参数就写多少，没有则不用写")]),t._v(" "),a("h3",{attrs:{id:"_4、rpc-调用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、rpc-调用"}},[t._v("#")]),t._v(" 4、"),a("code",[t._v("RPC")]),t._v(" 调用")]),t._v(" "),a("p",[a("code",[t._v("RPC")]),t._v("：即 "),a("code",[t._v("Remote Procedure Call")]),t._v("，远程过程调用，开发人员可以将封装好的任意函数指定为 "),a("code",[t._v("RPC")]),t._v(" 函数，以提供给 "),a("code",[t._v("Python")]),t._v(" 使用。")]),t._v(" "),a("p",[t._v("利用 "),a("code",[t._v("rpc.exports = {}")]),t._v(" 导出 "),a("code",[t._v("RPC")]),t._v(" 函数，多个函数以逗号分隔，注意：方法名需要全小写！")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHomeDirectory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" NSHomeDirectory "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NativeFunction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ptr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findExportByName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Foundation"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"NSHomeDirectory"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pointer'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ObjC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("NSHomeDirectory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("openUrl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" UIApplication "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ObjC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("UIApplication"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sharedApplication")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" toOpen "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ObjC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NSURL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("URLWithString_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" UIApplication"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("openURL_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("toOpen"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("playSystemSound")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" playSound "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NativeFunction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findExportByName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AudioToolbox'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AudioServicesPlaySystemSound'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'void'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'int'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("playSound")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1111")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 导出 RPC 函数")]),t._v("\nrpc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("openurl")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("openUrl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("sound")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("playSystemSound")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("showAlert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("homedirectory")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// homedirectory 必须小写")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHomeDirectory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("code",[t._v("Python")]),t._v(" 端使用 "),a("code",[t._v("rpc.js")])]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" codecs\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" frida\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'__main__'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    device "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" frida"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_usb_device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    session "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" device"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attach"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Twitter'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 读取 JS 脚本 ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" codecs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./rpc.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'r'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        source "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("read"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    script "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("load"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    rpc "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports\n    rpc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("openurl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://fullstackaction.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    rpc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sound"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rpc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("homeDirectory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# print(rpc)")]),t._v("\n\n    session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("detach"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"六、最后"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#六、最后"}},[t._v("#")]),t._v(" 六、最后")]),t._v(" "),a("p",[t._v("以上代码已经上传至："),a("a",{attrs:{href:"https://github.com/LinXunFeng/frida_study",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/LinXunFeng/frida_study"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("code",[t._v("Frida")]),t._v(" 提供的 "),a("code",[t._v("API")]),t._v(" 接口十分丰富，这里只提到了常用的内容，更多内容还是需要我们一起去阅读官方文档："),a("a",{attrs:{href:"https://frida.re/docs/javascript-api",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://frida.re/docs/javascript-api"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("除此之外，"),a("a",{attrs:{href:"https://codeshare.frida.re/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://codeshare.frida.re"),a("OutboundLink")],1),t._v(" 上提供很多共享脚本，大家可以用来学习和引入使用")])])}),[],!1,null,null,null);a.default=e.exports}}]);