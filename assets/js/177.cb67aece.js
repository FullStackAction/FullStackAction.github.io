(window.webpackJsonp=window.webpackJsonp||[]).push([[177],{523:function(t,a,s){"use strict";s.r(a);var n=s(15),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"一、概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、概述"}},[t._v("#")]),t._v(" 一、概述")]),t._v(" "),a("h3",{attrs:{id:"_1、响应内容的分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、响应内容的分类"}},[t._v("#")]),t._v(" 1、响应内容的分类")]),t._v(" "),a("ul",[a("li",[t._v("结构化的响应内容\n"),a("ul",[a("li",[t._v("json 字符串：可以使用 re、json、jsonpath 等模块来提取特定数据")]),t._v(" "),a("li",[t._v("xml 字符串：可以使用 re、lxml 等模块来提取特定数据")])])]),t._v(" "),a("li",[t._v("非结构化的响应内容\n"),a("ul",[a("li",[t._v("html 字符串：可以使用 re、lxml、Beautiful Soup、pyquery 等模块来提取特定数据")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("注意：re 模块需要掌握正则语法，lxml 模块需要掌握 xpath 语法。")])]),t._v(" "),a("h3",{attrs:{id:"_2、xml-与-html-的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、xml-与-html-的区别"}},[t._v("#")]),t._v(" 2、xml 与 html 的区别")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("数据格式")]),t._v(" "),a("th",[t._v("描述")]),t._v(" "),a("th",[t._v("设计目标")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("XML")]),t._v(" "),a("td",[t._v("EXtensible Markup Language（可扩展标记语言）")]),t._v(" "),a("td",[t._v("被设计为传输和存储数据，其焦点是数据的结构")])]),t._v(" "),a("tr",[a("td",[t._v("HTML")]),t._v(" "),a("td",[t._v("HyperText Markup Language（超文本标记语言）")]),t._v(" "),a("td",[t._v("显示数据以及如何更好显示数据")])])])]),t._v(" "),a("h2",{attrs:{id:"二、jsonpath-模块【了解】"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、jsonpath-模块【了解】"}},[t._v("#")]),t._v(" 二、jsonpath 模块【了解】")]),t._v(" "),a("h3",{attrs:{id:"_1、介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、介绍"}},[t._v("#")]),t._v(" 1、介绍")]),t._v(" "),a("ul",[a("li",[t._v("场景：多层嵌套的复杂字典直接提取数据")]),t._v(" "),a("li",[t._v("安装："),a("code",[t._v("pip install jsonpath")])]),t._v(" "),a("li",[t._v("使用：")])]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" jsonpath "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" jsonpath\nret "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" jsonpath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'jsonpath语法规则字符串'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("注意："),a("code",[t._v("data")]),t._v(" 类型是字典，"),a("code",[t._v("ret")]),t._v(" 类型是列表")])]),t._v(" "),a("h3",{attrs:{id:"_2、jsonpath-语法规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、jsonpath-语法规则"}},[t._v("#")]),t._v(" 2、jsonpath 语法规则")]),t._v(" "),a("p",[t._v("常用核心语法")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("JSONPath")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("$")]),t._v(" "),a("td",[t._v("根节点")])]),t._v(" "),a("tr",[a("td",[t._v(". or []")]),t._v(" "),a("td",[t._v("取子节点")])]),t._v(" "),a("tr",[a("td",[t._v("..")]),t._v(" "),a("td",[t._v("内部任意位置，取子孙节点")])])])]),t._v(" "),a("p",[t._v("完整语法说明："),a("a",{attrs:{href:"https://kubernetes.io/zh/docs/reference/kubectl/jsonpath/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://kubernetes.io/zh/docs/reference/kubectl/jsonpath/"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" jsonpath "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" jsonpath\n\ndata "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'key1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'key2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'key3'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'key4'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'key5'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'key6'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lqr'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# print(data['key1']['key2']['key3']['key4']['key5']['key6'])")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# jsonpath的结果为列表，获取数据需要索引")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jsonpath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'$.key1.key2.key3.key4.key5.key6'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jsonpath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'$..key6'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"三、lxml-模块【重点】"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、lxml-模块【重点】"}},[t._v("#")]),t._v(" 三、lxml 模块【重点】")]),t._v(" "),a("h3",{attrs:{id:"_1、介绍-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、介绍-2"}},[t._v("#")]),t._v(" 1、介绍")]),t._v(" "),a("ul",[a("li",[t._v("lxml 模块：可以利用 XPath 规则语法，快速定位 HTML/XML 文档中的元素以及获取节点信息（文本内容、属性值）")]),t._v(" "),a("li",[t._v("XPath：是一门对 HTML/XML 文档中查找信息的语言，可用来在 HTML/XML 文档中对元素和属性进行遍历")]),t._v(" "),a("li",[t._v("关系：提取 xml、html 中的数据需要 lxml 模块和 xpath 语法配合使用")])]),t._v(" "),a("h3",{attrs:{id:"_2、xpath-语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、xpath-语法"}},[t._v("#")]),t._v(" 2、xpath 语法")]),t._v(" "),a("p",[t._v("完整语法说明："),a("a",{attrs:{href:"https://www.w3school.com.cn/xpath/index.asp",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.w3school.com.cn/xpath/index.asp"),a("OutboundLink")],1)]),t._v(" "),a("h4",{attrs:{id:"_1-xpath-定位节点以及提取属性或文本内容语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-xpath-定位节点以及提取属性或文本内容语法"}},[t._v("#")]),t._v(" 1）xpath 定位节点以及提取属性或文本内容语法")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("nodename")]),t._v(" "),a("th",[t._v("选取此节点的所有子节点。")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("/")]),t._v(" "),a("td",[t._v("从根节点选取。")])]),t._v(" "),a("tr",[a("td",[t._v("//")]),t._v(" "),a("td",[t._v("从匹配选择的当前节点选择文档中的节点，而不考虑它们的位置。")])]),t._v(" "),a("tr",[a("td",[t._v(".")]),t._v(" "),a("td",[t._v("选取当前节点。")])]),t._v(" "),a("tr",[a("td",[t._v("..")]),t._v(" "),a("td",[t._v("选取当前节点的父节点。")])]),t._v(" "),a("tr",[a("td",[t._v("@")]),t._v(" "),a("td",[t._v("选取属性。")])]),t._v(" "),a("tr",[a("td",[t._v("text()")]),t._v(" "),a("td",[t._v("选取文本。")])])])]),t._v(" "),a("p",[t._v("举例：")]),t._v(" "),a("div",{staticClass:"language-xquery extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xquery"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-------选取title标签--------\x3e")]),t._v("\nhtml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("head"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("title\t绝对路径\nhtml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("title\t\t相对路径\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("title\t\t\t相对于整个html文档\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("title"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),t._v("\t\t当前节点\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("title"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("..")]),t._v("\t父节点\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-------从开闭标签之间取文本内容--------\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("title"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("text")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-------从选中的节点标签中获取指定属性的值--------\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("link"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("@")]),t._v("href\n")])])]),a("blockquote",[a("p",[t._v("安利：Chrome 插件【xmlpath-helper】："),a("a",{attrs:{href:"https://chrome.google.com/webstore/detail/xpath-helper/hgimnogjllphhhkhlmebbmlgjoejdpjl/related?hl=zh-CN",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://chrome.google.com/webstore/detail/xpath-helper/hgimnogjllphhhkhlmebbmlgjoejdpjl/related?hl=zh-CN"),a("OutboundLink")],1)])]),t._v(" "),a("h4",{attrs:{id:"_2-xpath-选取特定节点语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-xpath-选取特定节点语法"}},[t._v("#")]),t._v(" 2）xpath 选取特定节点语法")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("路径表达式")]),t._v(" "),a("th",[t._v("结果")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v('//title[@lang="eng"]')]),t._v(" "),a("td",[t._v("选择 lang 属性值为 eng 的所有 title 元素")])]),t._v(" "),a("tr",[a("td",[t._v("/bookstore/book[1]")]),t._v(" "),a("td",[t._v("选取属于 bookstore 子元素的第一个 book 元素")])]),t._v(" "),a("tr",[a("td",[t._v("/bookstore/book[last]")]),t._v(" "),a("td",[t._v("选取属于 bookstore 子元素的最后一个 book 元素")])]),t._v(" "),a("tr",[a("td",[t._v("/bookstore/book[last()-1]")]),t._v(" "),a("td",[t._v("选取属于 bookstore 子元素的倒数第二个 book 元素")])]),t._v(" "),a("tr",[a("td",[t._v("/bookstore/book[position()>1]")]),t._v(" "),a("td",[t._v("选择 bookstore 下面的 book 元素，从第二个开始选择")])]),t._v(" "),a("tr",[a("td",[t._v("//book/title[text()='Harry Potter']")]),t._v(" "),a("td",[t._v("选择所有 book 下的 title 元素，仅仅选择文本为 Harry Potter 的 title 元素")])]),t._v(" "),a("tr",[a("td",[t._v("/bookstore/book[price>35.00]/title")]),t._v(" "),a("td",[t._v("选取 bookstore 元素中的 book 元素的所有 title 元素，且其中的 price 子元素的值须大于 35.00")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("注意：在 xpath 中，第一个元素的位置是 1；最后一个元素的位置是 last()；倒数第二个是 last()-1。")])]),t._v(" "),a("p",[t._v("举例：")]),t._v(" "),a("div",{staticClass:"language-xquery extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xquery"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-------通过索引修饰节点--------\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("last")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\t\t选中最后一个\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("last")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("-"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\t\t选中倒数第二个\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("position")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" 范围选择\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-------通过属性修饰节点--------\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("@")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"content-left"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("@")]),t._v("id\t出现在"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("中的"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("@")]),t._v("是使用标签属性名和属性值修饰节点，出现在结尾的"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("@")]),t._v("是取属性值\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-------通过子节点修饰节点--------\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("span"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("span"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9.4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-------通过包含修饰节点--------\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword-operator operator"}},[t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("contains")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("@")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"qiushi_tag_"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("h4",{attrs:{id:"_3-xpath-选取未知节点语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-xpath-选取未知节点语法"}},[t._v("#")]),t._v(" 3）xpath 选取未知节点语法")]),t._v(" "),a("p",[t._v("可以通过通配符来选取未知的 html、xml 的元素")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("通配符")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("*")]),t._v(" "),a("td",[t._v("匹配任何元素节点。")])]),t._v(" "),a("tr",[a("td",[t._v("@*")]),t._v(" "),a("td",[t._v("匹配任何属性节点。")])]),t._v(" "),a("tr",[a("td",[t._v("node()")]),t._v(" "),a("td",[t._v("匹配任何类型的节点。")])])])]),t._v(" "),a("blockquote",[a("p",[t._v('补充：通过在路径表达式中使用"|"运算符，可以选取若干个路径。')])]),t._v(" "),a("p",[t._v("举例：")]),t._v(" "),a("div",{staticClass:"language-xquery extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xquery"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("bookstore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("\t选取 bookstore 元素的所有子元素。\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("\t\t\t\t选取文档中的所有元素。\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("title"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("@")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\t\t选取所有带有属性的 title 元素\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("h2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("td"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v("a\txpath复合使用语法\n")])])]),a("h3",{attrs:{id:"_3、lxml-模块的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、lxml-模块的使用"}},[t._v("#")]),t._v(" 3、lxml 模块的使用")]),t._v(" "),a("h4",{attrs:{id:"_1-导入-lxml-的-etree-库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-导入-lxml-的-etree-库"}},[t._v("#")]),t._v(" 1）导入 lxml 的 etree 库")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" lxml "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" etree\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果上面导入代码报错，可以改用下面的导入代码")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" lxml "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" html\netree "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("etree\n")])])]),a("blockquote",[a("p",[t._v("注意："),a("code",[t._v("from lxml import etree")]),t._v(" 提示报错的话，其实不会影响代码的运行，只是看着有点别扭。")])]),t._v(" "),a("h4",{attrs:{id:"_2-使用-etree-html-转化-element-对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用-etree-html-转化-element-对象"}},[t._v("#")]),t._v(" 2）使用 "),a("code",[t._v("etree.HTML")]),t._v(" 转化 Element 对象")]),t._v(" "),a("p",[t._v("利用 "),a("code",[t._v("etree.HTML")]),t._v(" 将 html 字符串（bytes 类型或 str 类型）转化为 Element 对象，Element 对象具有 xpath 方法，返回结果的列表：")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("html "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" etree"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HTML"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nret_list "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xpath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xpath语法规则字符串'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h4",{attrs:{id:"_3-xpath-方法返回列表的三种情况"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-xpath-方法返回列表的三种情况"}},[t._v("#")]),t._v(" 3）xpath 方法返回列表的三种情况")]),t._v(" "),a("ul",[a("li",[t._v("空列表：没有定位到任何元素")]),t._v(" "),a("li",[t._v("字符串列表：匹配到了文本内容或某属性的值")]),t._v(" "),a("li",[t._v("Element 列表：匹配到符合条件的标签，列表中的 Element 对象可以继续进行 xpath")])]),t._v(" "),a("p",[t._v("举例：")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" lxml "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" etree\n\ntext "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""\n<div>\n    <ul>\n        <li class="item-1"><a href="link1.html">first item</a></li>\n        <li class="item-1"><a href="link2.html">second item</a></li>\n        <li class="item-inactive"><a href="link3.html">third item</a></li>\n        <li class="item-1"><a href="link4.html">fourth item</a></li>\n        <li class="item-0"><a href="link5.html">fifth item</a></li>\n    </ul>\n</div>\n"""')]),t._v("\n\nhtml "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" etree"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HTML"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#print(html)")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xpath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//a[@href=\"link1.html\"]/text()'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xpath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//a[@href=\"link1.html\"]/text()'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 字符串列表")]),t._v("\ntext_list "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xpath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//a/text()'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlink_list "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xpath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//a/@href'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# for text in text_list:")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     myindex = text_list.index(text)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     link = link_list[myindex]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     print(text, link)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" link "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("zip")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text_list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" link_list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" link"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Element列表")]),t._v("\nel_list "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xpath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//a'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" el "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" el_list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xpath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//text()'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ×：//开头是相对整个文档的")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xpath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./text()'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# √")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xpath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.//text()'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# √")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("xpath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text()'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# √")]),t._v("\n")])])]),a("h4",{attrs:{id:"_4-etree-tostring-函数的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-etree-tostring-函数的使用"}},[t._v("#")]),t._v(" 4）"),a("code",[t._v("etree.tostring")]),t._v(" 函数的使用")]),t._v(" "),a("p",[a("code",[t._v("etree.tostring")]),t._v(" 函数可以将 Element 对象转化回 html 字符串：")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" lxml "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" etree\n\ntext "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""\n<div>\n    <ul>\n        <li class="item-1"><a href="link1.html">first item</a></li>\n        <li class="item-1"><a href="link2.html">second item</a></li>\n        <li class="item-inactive"><a href="link3.html">third item</a></li>\n        <li class="item-1"><a href="link4.html">fourth item</a></li>\n        <li class="item-0"><a href="link5.html">fifth item</a></li>\n    </ul>\n</div>\n"""')]),t._v("\n\nhtml "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" etree"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HTML"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nhtml_str "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" etree"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tostring"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("decode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html_str"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("注意：转化后，可能会多出来一些标签，比如原本没有的"),a("code",[t._v("<body>")]),t._v("、"),a("code",[t._v("<html>")]),t._v("，这是因为 "),a("code",[t._v("etree.HTML(text)")]),t._v(" 会自动补全原 html 中的语法错误。")])])])}),[],!1,null,null,null);a.default=e.exports}}]);