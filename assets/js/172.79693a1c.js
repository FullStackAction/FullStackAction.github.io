(window.webpackJsonp=window.webpackJsonp||[]).push([[172],{582:function(a,t,s){"use strict";s.r(t);var e=s(21),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210131150136.jpeg",alt:""}})]),a._v(" "),t("blockquote",[t("p",[a._v("默认情况下，容器和宿主机之间网络是隔离的")])]),a._v(" "),t("p",[a._v("现在启动了一个 "),t("code",[a._v("nginx")]),a._v(" 容器\n"),t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210131143943.png",alt:""}}),a._v("\n如图所示 "),t("code",[a._v("nginx")]),a._v(" 使用了 "),t("code",[a._v("80")]),a._v(" 端口，但是我们去浏览器里访问 "),t("code",[a._v("localhost:80")]),a._v(" 是无法访问到 "),t("code",[a._v("nginx")]),a._v(" 服务的\n"),t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210131143955.png",alt:""}}),a._v("\n这个时候可以通过端口映射的方式，将容器中的端口，映射到宿主机的某个端口上，从而使我们能够通过宿主机的 "),t("code",[a._v("ip+端口")]),a._v(" 的方式来访问容器里的内容")]),a._v(" "),t("h2",{attrs:{id:"随机端口映射"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#随机端口映射"}},[a._v("#")]),a._v(" 随机端口映射")]),a._v(" "),t("blockquote",[t("p",[t("code",[a._v("-P")]),a._v(" ：自动绑定所有对外提供服务的容器端口，映射的端口会从没有使用的端口池中自动随机选择，如果连续启动多个容器的话，则下一个容器的端口默认是当前容器的端口号+1")])]),a._v(" "),t("p",[a._v("命令")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-P")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("镜像名称"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("p",[a._v("在刚才的命令基本上加 "),t("code",[a._v("-P")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-dit")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-P")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" lxfnginx nginx\n")])])]),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210131144009.png",alt:""}}),a._v("\n这样宿主机的 "),t("code",[a._v("55000")]),a._v(" 端口就映射到了窗口的 "),t("code",[a._v("80")]),a._v(" 端口，访问也是成功的。\n"),t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210131144026.png",alt:""}})]),a._v(" "),t("h2",{attrs:{id:"指定端口映射"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#指定端口映射"}},[a._v("#")]),a._v(" 指定端口映射")]),a._v(" "),t("p",[a._v("命令")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("宿主机ip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("宿主机端口"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("容器端口"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("容器名称"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("镜像名称"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("p",[a._v("将宿主机上的 "),t("code",[a._v("8000")]),a._v(" 端口映射到 "),t("code",[a._v("nginx")]),a._v(" 容器的 "),t("code",[a._v("80")]),a._v(" 端口")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-dit")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8000")]),a._v(":80 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" lxfnginx nginx\n")])])]),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210131144045.png",alt:""}}),a._v("\n再去访问 "),t("code",[a._v("localhost:8000")]),a._v(" 时也是可以正常访问到的\n"),t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210131144059.png",alt:""}})]),a._v(" "),t("p",[t("code",[a._v("0.0.0.0")]),a._v(" 表示地址全匹配，即 "),t("code",[a._v("127.0.0.1")]),a._v(" 或者宿主机的局域网IP "),t("code",[a._v("192.168.1.x")]),a._v(" 这种都可以访问到 "),t("code",[a._v("nginx")]),a._v(" 服务，如果我们想指定绑定的 "),t("code",[a._v("IP")]),a._v(" ，可以在映射端口前加上 "),t("code",[a._v("IP")]),a._v(" 即可")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-dit")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".1.234:8000:80 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" lxfnginx nginx\n")])])]),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210131144117.png",alt:""}}),a._v("\n虽然图中显示的是 "),t("code",[a._v("127.0.0.1:55000->80")]),a._v(" ，但是经过测试")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("192.168.1.234:8000")]),a._v(" 是可以正常访问")]),a._v(" "),t("li",[t("code",[a._v("127.0.0.1:55000")]),a._v(" 和 "),t("code",[a._v("127.0.0.1:8000")]),a._v(" 无法访问")])]),a._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210131144134.png",alt:""}})]),a._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210131144148.png",alt:""}})]),a._v(" "),t("h2",{attrs:{id:"多端口映射"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多端口映射"}},[a._v("#")]),a._v(" 多端口映射")]),a._v(" "),t("p",[a._v("命令")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("宿主机端口1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("容器端口1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("宿主机端口2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(":"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("容器端口2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("容器名称"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("镜像名称"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" \n")])])]),t("p",[a._v("如下命令所示")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("7000")]),a._v(":443 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8000")]),a._v(":80 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" lxfnginx nginx\n")])])]),t("h2",{attrs:{id:"共享网络"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#共享网络"}},[a._v("#")]),a._v(" 共享网络")]),a._v(" "),t("blockquote",[t("p",[a._v("共享网络: 容器与宿主机共享网络信息")])]),a._v(" "),t("p",[a._v("默认情况下，容器的网络信息与宿主机是相互独立的，这样会有什么问题呢？")]),a._v(" "),t("p",[a._v("假如运行一个提供了 "),t("code",[a._v("django")]),a._v(" 服务的容器，宿主机本地提供了 "),t("code",[a._v("MySql")]),a._v(" 服务，此时容器想访问宿主机的数据库，是无法访问到的，这个时候容器就需要共享宿主机的网络")]),a._v(" "),t("p",[a._v("在启动容器时，加上 "),t("code",[a._v("--network=host")]),a._v(" 即可共享网络，命令如下")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-dit")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--network")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("host lxf_django\n")])])]),t("p",[a._v("这样，容器与宿主机的网络就是共享的状态，此时的容器也就可以访问到宿主机的数据库了")])])}),[],!1,null,null,null);t.default=r.exports}}]);