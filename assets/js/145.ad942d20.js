(window.webpackJsonp=window.webpackJsonp||[]).push([[145],{554:function(t,a,s){"use strict";s.r(a);var n=s(21),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"ä¸€ã€æ¦‚è¿°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€æ¦‚è¿°"}},[t._v("#")]),t._v(" ä¸€ã€æ¦‚è¿°")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬çš„ "),a("code",[t._v("App")]),t._v(" æ˜¯é›†æˆäº† "),a("code",[t._v("Sentry")]),t._v(" è¿›è¡Œé”™è¯¯è·Ÿè¸ªå’Œæ€§èƒ½ç›‘æ§ï¼Œåœ¨æœ€è¿‘å‡ ä¸ªæœˆé‡Œç»å¸¸çœ‹åˆ°å¦‚ä¸‹é”™è¯¯")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ClientException: Connection closed before full header was received, uri=https://xxx.png\n")])])]),a("p",[t._v("åŠ è½½å›¾ç‰‡çš„æ—¶å€™æŠ¥é”™äº†ï¼Œä½†æ˜¯å°è¯•äº†å¾ˆå¤šæ¬¡ï¼Œè‡ªå·±å§‹ç»ˆæ— æ³•å¤ç°å‡ºæ¥~")]),t._v(" "),a("h2",{attrs:{id:"äºŒã€æ‘¸ç´¢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€æ‘¸ç´¢"}},[t._v("#")]),t._v(" äºŒã€æ‘¸ç´¢")]),t._v(" "),a("p",[t._v("åé¢è¿›è¡Œæœç´¢æ‰¾åˆ°äº† "),a("code",[t._v("2019")]),t._v(" å¹´ "),a("code",[t._v("12")]),t._v(" æœˆçš„ä¸€ä¸ª "),a("code",[t._v("issue")])]),t._v(" "),a("ul",[a("li",[t._v("https://github.com/flutter/flutter/issues/41573")])]),t._v(" "),a("p",[t._v("ä¸å¤ªä¸€æ ·çš„æ˜¯äººå®¶æ˜¯è¯·æ±‚æ¥å£çš„æ—¶å€™å‡ºç°çš„æŠ¥é”™ã€‚")]),t._v(" "),a("p",[t._v("æå‡º "),a("code",[t._v("issue")]),t._v(" çš„ä½œè€…å½“æ—¶æ˜¯é€šè¿‡ "),a("code",[t._v("Method Channel")]),t._v(" çš„æ–¹å¼ç”±åŸç”Ÿç«¯å»è¯·æ±‚æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå³é¿å¼€äº†ä½¿ç”¨ "),a("code",[t._v("http")]),t._v(" è¿™ä¸ªåŒ…ã€‚")]),t._v(" "),a("p",[t._v("æœ‰äººè¯´è¿™ç§æƒ…å†µï¼Œæ”¹ç”¨ "),a("code",[t._v("dio")]),t._v(" å³å¯~")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20230813121546/image/202406042253062.png",alt:""}})]),t._v(" "),a("p",[t._v("ä¹Ÿæœ‰äººè¯´è¿™ç§æƒ…å†µï¼ŒåŠ ä¸ªå»¶è¿Ÿå°±å¯ä»¥è§£å†³~")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20230813121546/image/202406042253818.png",alt:""}})]),t._v(" "),a("p",[t._v("ä½†æˆ‘ä»¬è¿™ç§åŠ è½½å›¾ç‰‡åœºæ™¯å“ªæœ‰æœºä¼šåŠ å»¶è¿Ÿå‘¢ï¼Œå½“ç„¶ç”¨è¿™ç§æ–¹å¼ä¹Ÿä¸é è°±~")]),t._v(" "),a("p",[t._v("æ—¶éš”ä¸¤å¹´åï¼ˆ"),a("code",[t._v("2021")]),t._v(" å¹´ "),a("code",[t._v("12")]),t._v(" æœˆï¼‰ï¼Œæ ¹æ® "),a("code",[t._v("issue")]),t._v(" çš„ç§ç§æè¿°ï¼Œæœ‰äººç¡®å®šäº†é—®é¢˜ï¼Œå¹¶æäº†ä¸€ä¸ª "),a("code",[t._v("Dart")]),t._v(" çš„ "),a("code",[t._v("issue")])]),t._v(" "),a("ul",[a("li",[t._v("https://github.com/dart-lang/sdk/issues/47841")])]),t._v(" "),a("p",[t._v("å¤§è‡´ä¸Šå°±æ˜¯è¯´ "),a("code",[t._v("Dart")]),t._v(" ç«¯æ‹’ç»äº†æœåŠ¡å™¨å‘èµ·çš„ "),a("code",[t._v("TLS")]),t._v(" é‡åå•†å¯¼è‡´ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("é‡åå•†æ˜¯æŒ‡åœ¨å·²ç»åå•†å¥½çš„SSL/TLS TCPè¿æ¥ä¸Šé‡æ–°åå•†, ç”¨ä»¥æ›´æ¢ç®—æ³•ã€æ›´æ¢æ•°å­—è¯ä¹¦ã€é‡æ–°éªŒè¯å¯¹æ–¹èº«ä»½ã€æ›´æ–°å…±äº«å¯†é’¥ç­‰ã€‚ --æ‘˜è‡ªã€Š"),a("a",{attrs:{href:"https://www.cnblogs.com/blacksunny/articles/12185108.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("SSL/TLSæ”»å‡»ä»‹ç»--é‡åå•†æ¼æ´æ”»å‡»"),a("OutboundLink")],1),t._v("ã€‹")])]),t._v(" "),a("p",[t._v("æˆ‘æƒ³ "),a("code",[t._v("Dart")]),t._v(" ä¸å…è®¸ "),a("code",[t._v("TLS")]),t._v(" é‡åå•†åº”è¯¥ä¹Ÿæ˜¯å‡ºäºå®‰å…¨è€ƒè™‘å§~")]),t._v(" "),a("h2",{attrs:{id:"ä¸‰ã€è§£å†³"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰ã€è§£å†³"}},[t._v("#")]),t._v(" ä¸‰ã€è§£å†³")]),t._v(" "),a("p",[t._v("æ "),a("code",[t._v("issue")]),t._v(" çš„ä½œè€…ä¹Ÿä¸ºæ­¤ï¼Œäº "),a("code",[t._v("2022")]),t._v(" å¹´ "),a("code",[t._v("2")]),t._v(" æœˆä»½æäº† "),a("code",[t._v("PR")]),t._v("ï¼Œç»™ "),a("code",[t._v("SecurityContext")]),t._v(" æ·»åŠ äº† "),a("code",[t._v("allowLegacyUnsafeRenegotiation")]),t._v(" å±æ€§ä»¥å…è®¸é‡åå•†ï¼Œåœ¨åŒå¹´ "),a("code",[t._v("4")]),t._v(" æœˆä»½å¾—åˆ°åˆå¹¶äº†ï¼Œä½†ä¾æ—§å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œé»˜è®¤ä¸ºå…³é—­çŠ¶æ€ï¼Œæ˜¯å¦å¼€å¯ç”±å¼€å‘è€…è‡ªå·±å†³å®šã€‚")]),t._v(" "),a("p",[t._v("é™„ä¸Šè¯¥å±æ€§çš„ç›¸å…³è¯´æ˜ï¼šhttps://api.flutter.dev/flutter/dart-io/SecurityContext/allowLegacyUnsafeRenegotiation.html")]),t._v(" "),a("p",[t._v("ä»¥åŠç›¸å…³ä¿®å¤ï¼š"),a("a",{attrs:{href:"https://github.com/dart-lang/sdk/commit/c286b76c2db394b72bd8ae79b32d024c2d25c52b#diff-6e59fb0cec49044e49bde0cd8d7a9d3614fa47575bb58c36db6b714b90edf559",target:"_blank",rel:"noopener noreferrer"}},[t._v("Allow sockets to enable TLS renegotiation. Â· dart-lang/sdk@c286b76 (github.com)"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("æ³¨ï¼šè¯¥å±æ€§ä» "),a("code",[t._v("Dart 2.17.0")]),t._v(" å¼€å§‹å­˜åœ¨ï¼Œå¯¹åº”çš„ "),a("code",[t._v("Flutter")]),t._v(" ç‰ˆæœ¬æ˜¯ "),a("code",[t._v("3.0.0")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("åŠ äº† "),a("code",[t._v("allowLegacyUnsafeRenegotiation")]),t._v(" å±æ€§ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰å¦‚ä¸‹ä»£ç å»ä½¿ç”¨")]),t._v(" "),a("div",{staticClass:"language-dart extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dart"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" context "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SecurityContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("defaultContext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("allowLegacyUnsafeRenegotiation "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" httpClient "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpClient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" client "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOClient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("httpClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://your_uri.net'")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("ä»£ç å–è‡ªï¼šhttps://stackoverflow.com/a/73287131/8577739")]),t._v(" "),a("h2",{attrs:{id:"å››ã€è°ƒæ•´-cachednetworkimage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å››ã€è°ƒæ•´-cachednetworkimage"}},[t._v("#")]),t._v(" å››ã€è°ƒæ•´ CachedNetworkImage")]),t._v(" "),a("p",[t._v("åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œæ‰€ä½¿ç”¨çš„å›¾ç‰‡åŠ è½½åº“ä¸º "),a("code",[t._v("cached_network_image")]),t._v("ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±ä¸€èµ·æ¥çœ‹çœ‹å¦‚ä½•è°ƒæ•´ä»¥å¼€å¯ "),a("code",[t._v("TLS")]),t._v(" é‡åå•†åŠŸèƒ½ã€‚")]),t._v(" "),a("p",[t._v("åœ¨ "),a("code",[t._v("CachedNetworkImage")]),t._v(" ç±»ä¸­æœ‰ä¸€ä¸ª "),a("code",[t._v("cacheManager")]),t._v(" å±æ€§ï¼Œå¦‚æœæˆ‘ä»¬ä¸è®¾ç½®çš„è¯åˆ™åç»­é»˜è®¤ä½¿ç”¨çš„æ˜¯ "),a("code",[t._v("DefaultCacheManager")]),t._v(" å®ä¾‹")]),t._v(" "),a("div",{staticClass:"language-dart extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dart"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultCacheManager")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CacheManager")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ImageCacheManager")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" key "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'libCachedImageData'")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultCacheManager")]),t._v(" _instance "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultCacheManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("factory")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultCacheManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" _instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultCacheManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("å¯ä»¥çœ‹åˆ°å…¶ç»§æ‰¿äº "),a("code",[t._v("CacheManager")])]),t._v(" "),a("div",{staticClass:"language-dart extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dart"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CacheManager")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BaseCacheManager")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CacheManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Config")]),t._v(" config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" _config "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        _store "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CacheStore")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    _webHelper "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebHelper")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fileService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("code",[t._v("CacheManager")]),t._v(" æ¥æ”¶ä¸€ä¸ª "),a("code",[t._v("Config")]),t._v(" å¯¹è±¡")]),t._v(" "),a("div",{staticClass:"language-dart extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dart"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Config")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// [fileService] defines where files are fetched, for example online.")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("factory")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" cacheKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),t._v(" stalePeriod"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    int maxNrOfCacheObjects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CacheInfoRepository")]),t._v(" repo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileSystem")]),t._v(" fileSystem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileService")]),t._v(" fileService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("impl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),t._v("Config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" fileService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨ "),a("code",[t._v("fileService")]),t._v(" æ¥æŒ‡å®š "),a("code",[t._v("httpClient")]),t._v("ï¼Œä»¥æ­¤å¸®æˆ‘ä»¬è§£å†³ä¸Šè¿°æŠ¥é”™é—®é¢˜")]),t._v(" "),a("div",{staticClass:"language-dart extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dart"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpClient")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("httpClient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" context "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SecurityContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("defaultContext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("allowLegacyUnsafeRenegotiation "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpClient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‡ªå®šä¹‰ CacheManager")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" _LXFCachedNetworkImageManager "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CacheManager")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ImageCacheManager")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸ºäº†ä¸å½±å“ä¹‹å‰çš„ç¼“å­˜ï¼Œä¿æŒä½¿ç”¨ç›¸åŒçš„ key")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" key "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultCacheManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" _LXFCachedNetworkImageManager _instance "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n      _LXFCachedNetworkImageManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("factory")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_LXFCachedNetworkImageManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" _instance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  _LXFCachedNetworkImageManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŒ‡å®š httpClient")]),t._v("\n            fileService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpFileService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n              httpClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOClient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("httpClient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("ä½¿ç”¨æ—¶é…ç½®ä¸Š "),a("code",[t._v("cacheManager")]),t._v(" å³å¯ï¼Œå¦‚ä¸‹æ‰€ç¤º")]),t._v(" "),a("div",{staticClass:"language-dart extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dart"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CachedNetworkImage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  imageUrl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  cacheManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_LXFCachedNetworkImageManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("ä½†æ¯ä¸ªåœ°æ–¹éƒ½è¿™æ ·å†™å®åœ¨æ˜¯å¤ªä¸ä¼˜é›…äº†ï¼Œæ‰€ä»¥å¤§å®¶è‡ªè¡Œè¿›è¡Œå°è£…å§~")]),t._v(" "),a("p",[t._v("æœ¬ç¯‡åˆ°æ­¤ç»“æŸï¼Œæ„Ÿè°¢å¤§å®¶çš„æ”¯æŒï¼Œæˆ‘ä»¬ä¸‹æ¬¡å†è§ï¼ ğŸ‘‹")])])}),[],!1,null,null,null);a.default=e.exports}}]);