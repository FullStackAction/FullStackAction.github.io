(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{451:function(t,s,a){"use strict";a.r(s);var n=a(21),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"初识gradle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初识gradle"}},[t._v("#")]),t._v(" 初识Gradle")]),t._v(" "),s("h3",{attrs:{id:"一、gradle的基本概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、gradle的基本概念"}},[t._v("#")]),t._v(" 一、Gradle的基本概念")]),t._v(" "),s("p",[t._v("一个开源的项目自动化构建工具，建立在Apache Ant和Apache Maven概念的基础上，并引入了基于Groovy的特定领域语言（DSL）,而不再使用XML形式管理构建脚本。同时，gradle还是一个编程框架，可以让开发者使用编程的思想来实现应用构建。gradle的组成：")]),t._v(" "),s("ol",[s("li",[t._v("groovy核心语法")]),t._v(" "),s("li",[t._v("build script block")]),t._v(" "),s("li",[t._v("gradle api")])]),t._v(" "),s("h3",{attrs:{id:"二、gradle的执行流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、gradle的执行流程"}},[t._v("#")]),t._v(" 二、Gradle的执行流程")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("生命周期")]),t._v(" "),s("th",[t._v("作用")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Initialzation初始化阶段")]),t._v(" "),s("td",[t._v("解析整个工程中所有project（读取setting.gradle文件），构建所有的project对应的Project对象")])]),t._v(" "),s("tr",[s("td",[t._v("Configuration配置阶段")]),t._v(" "),s("td",[t._v("解析所有的project对象中的task，构建好所有task的拓扑图")])]),t._v(" "),s("tr",[s("td",[t._v("Execution执行阶段")]),t._v(" "),s("td",[t._v("执行具体的task及其依赖的task")])])])]),t._v(" "),s("p",[t._v("生命周期监听：")]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 配置阶段开始前的监听回调（即：在Initialzation与Configuration之间）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("beforeEvaluate "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 配置阶段完成后的监听回调（即：在Configuration与Execution之间）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("afterEvaluate "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// gradle执行完毕后的回调监听（即：在Execution之后）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gradle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("buildFinished "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 与 this.beforeEvaluate {} 一样")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gradle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("beforeProject "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 与 this.afterEvaluate {} 一样")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gradle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("afterProject "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"gradle中的project"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gradle中的project"}},[t._v("#")]),t._v(" Gradle中的Project")]),t._v(" "),s("h3",{attrs:{id:"一、idea与gradle-对于project概念的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、idea与gradle-对于project概念的区别"}},[t._v("#")]),t._v(" 一、Idea与Gradle 对于project概念的区别")]),t._v(" "),s("p",[t._v("在Idea中，一个项目就是Project，一个Project下可以包含多个模块（Module），一个Module下，又可以有多个Module，其树状结构如下：")]),t._v(" "),s("blockquote",[s("p",[t._v("虽然可以在Module中继续创建子Module，但一般情况下，我们不会这么做，最多就两层。")])]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("Project\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("Module\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("Module\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("Module\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("Module\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("Module\n")])])]),s("p",[t._v("而对于Gradle而言，Idea中的无论是Project还是Module，都是project，故树状结构如下：")]),t._v(" "),s("blockquote",[s("p",[t._v("每个project下，都一定会有一个build.gradle")])]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("project        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rootProject")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("project      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// subProject")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("project\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("project\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("project\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("project\n")])])]),s("h3",{attrs:{id:"二、project相关api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、project相关api"}},[t._v("#")]),t._v(" 二、project相关api")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("api")]),t._v(" "),s("th",[t._v("作用")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("getAllprojects()")]),t._v(" "),s("td",[t._v("获取工程中所有的project（包括根project与子project）")])]),t._v(" "),s("tr",[s("td",[t._v("getSubProjects()")]),t._v(" "),s("td",[t._v("获取当前project下，所有的子project（在不同的project下调用，结果会不一样，可能返回null）")])]),t._v(" "),s("tr",[s("td",[t._v("getParent()")]),t._v(" "),s("td",[t._v("获取当前project的父project（若在rooProject的build.gradle调用，则返回null）")])]),t._v(" "),s("tr",[s("td",[t._v("getRootProject()")]),t._v(" "),s("td",[t._v("获取项目的根project（一定不会为null）")])]),t._v(" "),s("tr",[s("td",[t._v("project(String path, Closure configureClosure)")]),t._v(" "),s("td",[t._v("根据path找到project，通过闭包进行配置（闭包的参数是path对应的Project对象）")])]),t._v(" "),s("tr",[s("td",[t._v("allprojects(Closure configureClosure)")]),t._v(" "),s("td",[t._v("配置当前project和其子project的所有project")])]),t._v(" "),s("tr",[s("td",[t._v("subprojects(Closure configureClosure)")]),t._v(" "),s("td",[t._v("配置子project的所有project（不包含当前project）")])])])]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rootProject build.gradle下配置：")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1、Project project(String path, Closure configureClosure);")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("project")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Project project "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 一个参数时，可以省略不写，这里只是为了明确参数的类型")]),t._v("\n  apply plugin "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'com.android.application'")]),t._v("\n  group "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'com.lqr'")]),t._v("\n  version "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.0.0-release'")]),t._v("\n  dependencies "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  android "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2、allprojects(Closure configureClosure)")]),t._v("\nallprojects "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  group "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'com.lqr'")]),t._v("\n  version "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.0.0-release'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3、subprojects(Closure configureClosure)")]),t._v("\nsubprojects "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Project project "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" \n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("project"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plugins"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'com.android.library'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    apply from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../publishToMaven.gradle'")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"三、属性相关api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、属性相关api"}},[t._v("#")]),t._v(" 三、属性相关api")]),t._v(" "),s("h4",{attrs:{id:"_1、在gradle脚本文件中使用ext块扩展属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、在gradle脚本文件中使用ext块扩展属性"}},[t._v("#")]),t._v(" 1、在gradle脚本文件中使用ext块扩展属性")]),t._v(" "),s("blockquote",[s("p",[t._v("父project中通过ext块定义的属性，子project可以直接访问使用")])]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rootProject : build.gradle")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定义扩展属性")]),t._v("\next "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  compileSdkVersion "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),t._v("\n  libAndroidDesign "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'com.android.support:design:25.0.0'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// app : build.gradle")]),t._v("\nandroid "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  compileSdkVersion "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("compileSdkVersion "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 父project中的属性，子project可以直接访问使用")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\ndependencies "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  compile "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("libAndroidDesign "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 也可以使用：this.rootproject.libAndroidDesign")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("h4",{attrs:{id:"_2、在gradle-properties文件中扩展属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、在gradle-properties文件中扩展属性"}},[t._v("#")]),t._v(" 2、在gradle.properties文件中扩展属性")]),t._v(" "),s("blockquote",[s("p",[t._v("hasProperty('xxx')：判断是否有在gradle.properties文件定义xxx属性。\n在gradle.properties中定义的属性，可以直接访问，但得到的类型为Object，一般需要通过toXXX()方法转型。")])]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// gradle.properties")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定义扩展属性")]),t._v("\nisLoadTest"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\nmCompileSdkVersion"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// setting.gradle")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 判断是否需要引入Test这个Module")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasProperty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'isLoadTest'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" isLoadTest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toBoolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  include "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("':Test'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// app : build.gradle")]),t._v("\nandroid "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  compileSdkVersion "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mCompileSdkVersion"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toInteger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"四、文件相关api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、文件相关api"}},[t._v("#")]),t._v(" 四、文件相关api")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("api")]),t._v(" "),s("th",[t._v("作用")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("getRootDir()")]),t._v(" "),s("td",[t._v("获取rootProject目录")])]),t._v(" "),s("tr",[s("td",[t._v("getBuildDir()")]),t._v(" "),s("td",[t._v("获取当前project的build目录（每个project都有自己的build目录）")])]),t._v(" "),s("tr",[s("td",[t._v("getProjectDir()")]),t._v(" "),s("td",[t._v("获取当前project目录")])]),t._v(" "),s("tr",[s("td",[t._v("File file(Object path)")]),t._v(" "),s("td",[t._v("定位一个文件，相对于当前project开始查找")])]),t._v(" "),s("tr",[s("td",[t._v("ConfigurableFileCollection files(Object... paths)")]),t._v(" "),s("td",[t._v("定位多个文件，与file类似")])]),t._v(" "),s("tr",[s("td",[t._v("copy(Closure closure)")]),t._v(" "),s("td",[t._v("拷贝文件")])]),t._v(" "),s("tr",[s("td",[t._v("fileTree(Object baseDir, Closure configureClosure)")]),t._v(" "),s("td",[t._v("定位一个文件树（目录+文件），可对文件树进行遍历")])])])]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打印common.gradle文件内容")]),t._v("\nprintln "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getContent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'common.gradle'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getContent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" file "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("GradleException e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    println "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'file not found..'")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" null\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 拷贝文件、文件夹")]),t._v("\ncopy "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  from "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'build/outputs/apk/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  into "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRootProject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBuildDir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/apk/'")]),t._v("\n  exclude "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 排除文件")]),t._v("\n  rename "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 文件重命名")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对文件树进行遍历并拷贝")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fileTree")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'build/outputs/apk/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" FileTree fileTree "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("\n    fileTree"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("visit "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" FileTreeElement element "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("\n        println "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'the file name is: '")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("element"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name\n        copy "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            from element"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("file\n            into "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRootProject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBuildDir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/test/'")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"五、依赖相关api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#五、依赖相关api"}},[t._v("#")]),t._v(" 五、依赖相关api")]),t._v(" "),s("p",[t._v("配置工程仓库及gradle插件依赖")]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rootProject : build.gradle")]),t._v("\nbuildscript "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ScriptHandler scriptHandler "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 配置工程仓库地址")]),t._v("\n    scriptHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("repositories "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" RepositoryHandler repositoryHandler "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("\n        repositoryHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("jcenter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        repositoryHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mavenCentral")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        repositoryHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mavenLocal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        repositoryHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ivy "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        repositoryHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("maven "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" MavenArtifactRepository mavenArtifactRepository "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("\n            mavenArtifactRepository"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'personal'")]),t._v("\n            mavenArtifactRepository"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:8081/nexus/repositories/'")]),t._v("\n            mavenArtifactRepository"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("credentials "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                username "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'admin'")]),t._v("\n                password "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'admin123'")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 配置工程的"插件"（编写gradle脚本使用的第三方库）依赖地址')]),t._v("\n    scriptHandler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dependencies "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        classpath "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'com.android.tools.build:gradle:2.2.2'")]),t._v("\n        classpath "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'com.tencent.tinker-patch-gradle-plugin:1.7.7'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ============ 上述脚本简化后 ============")]),t._v("\n\nbuildscript "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 配置工程仓库地址")]),t._v("\n    repositories "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("jcenter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mavenCentral")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mavenLocal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        ivy "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        maven "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            name "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'personal'")]),t._v("\n            url "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:8081/nexus/repositories/'")]),t._v("\n            credentials "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                username "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'admin'")]),t._v("\n                password "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'admin123'")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 配置工程的"插件"（编写gradle脚本使用的第三方库）依赖地址')]),t._v("\n    dependencies "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        classpath "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'com.android.tools.build:gradle:2.2.2'")]),t._v("\n        classpath "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'com.tencent.tinker-patch-gradle-plugin:1.7.7'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("配置应用程序第三方库依赖")]),t._v(" "),s("blockquote",[s("p",[t._v("compile: 编译依赖包并将依赖包中的类打包进apk。\nprovided: 只提供编译支持，但打包时依赖包中的类不会写入apk。")])]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// app : build.gradle")]),t._v("\ndependencies "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    compile "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fileTree")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dir"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'libs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" include"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*.jar'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 依赖文件树")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// compile file() // 依赖单个文件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// compile files() // 依赖多个文件")]),t._v("\n    compile "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'com.android.support:appcompat-v7:26.1.0'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 依赖仓库中的第三方库（即：远程库）")]),t._v("\n    compile "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("project")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mySDK'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 依赖工程下其他Module（即：源码库工程）")]),t._v("\n      exclude module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'support-v4'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 排除依赖：排除指定module")]),t._v("\n      exclude group"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'com.android.support'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 排除依赖：排除指定group下所有的module")]),t._v("\n      transitive "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 禁止传递依赖，默认值为false")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 栈内编译")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("provided")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'com.tencent.tinker:tinker-android-anno:1.9.1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("provided的使用场景：")]),t._v(" "),s("ol",[s("li",[t._v("依赖包只在编译期起作用。（如：tinker的tinker-android-anno只用于在编译期生成Application，并不需要把该库中类打包进apk，这样可以减小apk包体积）")]),t._v(" "),s("li",[t._v("被依赖的工程中已经有了相同版本的第三方库，为了避免重复引用，可以使用provided。")])]),t._v(" "),s("h3",{attrs:{id:"六、外部命令api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#六、外部命令api"}},[t._v("#")]),t._v(" 六、外部命令api")]),t._v(" "),s("div",{staticClass:"language-groovy extra-class"},[s("pre",{pre:!0,attrs:{class:"language-groovy"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// copyApk任务：用于将app工程生成出来apk目录及文件拷贝到本机下载目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("task")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'copyApk'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    doLast "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// gradle的执行阶段去执行")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" sourcePath "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("buildDir"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/outputs/apk'")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" destinationPath "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/Users/lqr/Downloads'")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" command "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token interpolation-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mv -f ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token expression"}},[t._v("sourcePath")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token expression"}},[t._v("destinationPath")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// exec块代码基本是固定的")]),t._v("\n        exec "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                executable "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bash'")]),t._v("\n                args "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-c'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" command\n                println "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'the command is executed success.'")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("GradleException e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                println "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'the command is executed failed.'")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);