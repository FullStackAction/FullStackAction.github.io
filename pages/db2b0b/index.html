<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>手撸一个简易Android数据库框架 | FSA全栈行动</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/favicon.ico">
    <script data-ad-client="ca-pub-3568502583266202" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script src="/js/global.js"></script>
    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?885476c2eae58d4aee1ab7fcfb548adb";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
      </script>
    <meta name="description" content="分享Android、iOS、Python、Vue等技术资讯、学习笔记，成功有梦想的全栈工程师，欢迎关注。">
    <meta name="keywords" content="FSA全栈行动,LinXunFeng,GitLqr,全栈技术博客,移动端,web前端,后端开发,前端框架,web前端,Android框架,iOS框架,Flutter框架,Python框架,Vue框架,技术文档,学习,面试,Java,Kotlin,object-c,Swift,Kotlin,Dart,JavaScript,js,ES6,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="code-Cyx4xlZmzI">
    <meta name="google-site-verification" content="_0KO4KbxdSwB-TPRQ8bRqmML8dnrx5G82GhQNZlR4HU">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.f24a96ee.css" as="style"><link rel="preload" href="/assets/js/app.11b78866.js" as="script"><link rel="preload" href="/assets/js/2.d8b68cf2.js" as="script"><link rel="preload" href="/assets/js/37.28a9ac42.js" as="script"><link rel="prefetch" href="/assets/js/10.d73c7d01.js"><link rel="prefetch" href="/assets/js/100.dce28da0.js"><link rel="prefetch" href="/assets/js/101.692c940a.js"><link rel="prefetch" href="/assets/js/102.e2f371dd.js"><link rel="prefetch" href="/assets/js/103.915d0f88.js"><link rel="prefetch" href="/assets/js/104.28cfb05a.js"><link rel="prefetch" href="/assets/js/105.093417ac.js"><link rel="prefetch" href="/assets/js/106.3cbd2542.js"><link rel="prefetch" href="/assets/js/107.64783dba.js"><link rel="prefetch" href="/assets/js/108.743f1185.js"><link rel="prefetch" href="/assets/js/109.73af1cec.js"><link rel="prefetch" href="/assets/js/11.1bcda3a0.js"><link rel="prefetch" href="/assets/js/110.b4de5b94.js"><link rel="prefetch" href="/assets/js/111.1d6bb0e7.js"><link rel="prefetch" href="/assets/js/112.516958d7.js"><link rel="prefetch" href="/assets/js/113.0701a68e.js"><link rel="prefetch" href="/assets/js/114.8048ac7f.js"><link rel="prefetch" href="/assets/js/115.5c490b1f.js"><link rel="prefetch" href="/assets/js/116.d400f75b.js"><link rel="prefetch" href="/assets/js/117.33c3b92f.js"><link rel="prefetch" href="/assets/js/118.df140fae.js"><link rel="prefetch" href="/assets/js/119.33296c42.js"><link rel="prefetch" href="/assets/js/12.9d9f5ba0.js"><link rel="prefetch" href="/assets/js/120.93d74e02.js"><link rel="prefetch" href="/assets/js/121.d5a2cac0.js"><link rel="prefetch" href="/assets/js/122.efe277e1.js"><link rel="prefetch" href="/assets/js/123.c4934bcf.js"><link rel="prefetch" href="/assets/js/124.45af2a3a.js"><link rel="prefetch" href="/assets/js/125.cbe867be.js"><link rel="prefetch" href="/assets/js/126.5c1160c9.js"><link rel="prefetch" href="/assets/js/127.cda7bc77.js"><link rel="prefetch" href="/assets/js/128.693e08d4.js"><link rel="prefetch" href="/assets/js/129.e6b34ba6.js"><link rel="prefetch" href="/assets/js/13.2af8a90e.js"><link rel="prefetch" href="/assets/js/130.a5c99ad8.js"><link rel="prefetch" href="/assets/js/131.dbfdcf15.js"><link rel="prefetch" href="/assets/js/132.57bd8a77.js"><link rel="prefetch" href="/assets/js/133.d8849bbf.js"><link rel="prefetch" href="/assets/js/134.97755c83.js"><link rel="prefetch" href="/assets/js/135.106ce0b9.js"><link rel="prefetch" href="/assets/js/136.52554b90.js"><link rel="prefetch" href="/assets/js/137.923c97a5.js"><link rel="prefetch" href="/assets/js/138.ee2729e3.js"><link rel="prefetch" href="/assets/js/139.be1e1a33.js"><link rel="prefetch" href="/assets/js/14.dfac8018.js"><link rel="prefetch" href="/assets/js/140.64289c17.js"><link rel="prefetch" href="/assets/js/141.8ebeb156.js"><link rel="prefetch" href="/assets/js/142.0000c560.js"><link rel="prefetch" href="/assets/js/143.858e714b.js"><link rel="prefetch" href="/assets/js/144.d700de53.js"><link rel="prefetch" href="/assets/js/145.ad942d20.js"><link rel="prefetch" href="/assets/js/146.73bd0120.js"><link rel="prefetch" href="/assets/js/147.7bb47f16.js"><link rel="prefetch" href="/assets/js/148.e68ebbae.js"><link rel="prefetch" href="/assets/js/149.79e591ff.js"><link rel="prefetch" href="/assets/js/15.525d5dfe.js"><link rel="prefetch" href="/assets/js/150.2b741bbb.js"><link rel="prefetch" href="/assets/js/151.266b6326.js"><link rel="prefetch" href="/assets/js/152.81a4a354.js"><link rel="prefetch" href="/assets/js/153.e362f89c.js"><link rel="prefetch" href="/assets/js/154.6df1be6e.js"><link rel="prefetch" href="/assets/js/155.51be41cc.js"><link rel="prefetch" href="/assets/js/156.670b7225.js"><link rel="prefetch" href="/assets/js/157.b681038c.js"><link rel="prefetch" href="/assets/js/158.a6d1e8ba.js"><link rel="prefetch" href="/assets/js/159.c5a782f6.js"><link rel="prefetch" href="/assets/js/16.d8737ba6.js"><link rel="prefetch" href="/assets/js/160.bb039e23.js"><link rel="prefetch" href="/assets/js/161.da942061.js"><link rel="prefetch" href="/assets/js/162.618df4c0.js"><link rel="prefetch" href="/assets/js/163.3a247ae7.js"><link rel="prefetch" href="/assets/js/164.761201af.js"><link rel="prefetch" href="/assets/js/165.8eddcdaf.js"><link rel="prefetch" href="/assets/js/166.089e99d4.js"><link rel="prefetch" href="/assets/js/167.1487e574.js"><link rel="prefetch" href="/assets/js/168.c9ae240e.js"><link rel="prefetch" href="/assets/js/169.bf08ee6b.js"><link rel="prefetch" href="/assets/js/17.a33331a9.js"><link rel="prefetch" href="/assets/js/170.223d9bbd.js"><link rel="prefetch" href="/assets/js/171.028394ba.js"><link rel="prefetch" href="/assets/js/172.e6077a3d.js"><link rel="prefetch" href="/assets/js/173.cc8e4c7c.js"><link rel="prefetch" href="/assets/js/174.36ea17a3.js"><link rel="prefetch" href="/assets/js/175.1675a440.js"><link rel="prefetch" href="/assets/js/176.e7bdc5f0.js"><link rel="prefetch" href="/assets/js/177.8e38fc81.js"><link rel="prefetch" href="/assets/js/178.ee033734.js"><link rel="prefetch" href="/assets/js/179.0ba32a94.js"><link rel="prefetch" href="/assets/js/18.33037d59.js"><link rel="prefetch" href="/assets/js/180.1c7ea6dd.js"><link rel="prefetch" href="/assets/js/181.486a3d4b.js"><link rel="prefetch" href="/assets/js/182.ba9db161.js"><link rel="prefetch" href="/assets/js/183.8ec06373.js"><link rel="prefetch" href="/assets/js/184.23c2d802.js"><link rel="prefetch" href="/assets/js/185.63826fec.js"><link rel="prefetch" href="/assets/js/186.9f92092e.js"><link rel="prefetch" href="/assets/js/187.2d308919.js"><link rel="prefetch" href="/assets/js/188.1b869cff.js"><link rel="prefetch" href="/assets/js/189.3f2e2a4b.js"><link rel="prefetch" href="/assets/js/19.c55f5d6a.js"><link rel="prefetch" href="/assets/js/190.ca56f7ca.js"><link rel="prefetch" href="/assets/js/191.4362e877.js"><link rel="prefetch" href="/assets/js/192.9f37cec8.js"><link rel="prefetch" href="/assets/js/193.691ade2c.js"><link rel="prefetch" href="/assets/js/194.eff461b1.js"><link rel="prefetch" href="/assets/js/195.e0ec73dd.js"><link rel="prefetch" href="/assets/js/196.9d661bd5.js"><link rel="prefetch" href="/assets/js/197.253725a2.js"><link rel="prefetch" href="/assets/js/198.1bb22918.js"><link rel="prefetch" href="/assets/js/199.5c3e397c.js"><link rel="prefetch" href="/assets/js/20.33fe86db.js"><link rel="prefetch" href="/assets/js/200.6bb5e186.js"><link rel="prefetch" href="/assets/js/201.44df6630.js"><link rel="prefetch" href="/assets/js/202.53eb7fe1.js"><link rel="prefetch" href="/assets/js/203.e31a7cda.js"><link rel="prefetch" href="/assets/js/204.27b1de1a.js"><link rel="prefetch" href="/assets/js/205.4fdf6ebd.js"><link rel="prefetch" href="/assets/js/206.691bcc3e.js"><link rel="prefetch" href="/assets/js/207.00560862.js"><link rel="prefetch" href="/assets/js/208.4e8744f8.js"><link rel="prefetch" href="/assets/js/209.f831b05d.js"><link rel="prefetch" href="/assets/js/21.ab5e7303.js"><link rel="prefetch" href="/assets/js/210.e6fa4551.js"><link rel="prefetch" href="/assets/js/211.76c19296.js"><link rel="prefetch" href="/assets/js/212.50ab9aaf.js"><link rel="prefetch" href="/assets/js/213.07360a2c.js"><link rel="prefetch" href="/assets/js/214.b2829d21.js"><link rel="prefetch" href="/assets/js/215.913ae9cf.js"><link rel="prefetch" href="/assets/js/216.4a45f69b.js"><link rel="prefetch" href="/assets/js/217.c31f50d9.js"><link rel="prefetch" href="/assets/js/218.e3640a49.js"><link rel="prefetch" href="/assets/js/219.a96f7f75.js"><link rel="prefetch" href="/assets/js/22.ec455aec.js"><link rel="prefetch" href="/assets/js/220.775dbfa6.js"><link rel="prefetch" href="/assets/js/221.c6fcda99.js"><link rel="prefetch" href="/assets/js/222.6d34b7e4.js"><link rel="prefetch" href="/assets/js/223.b044be36.js"><link rel="prefetch" href="/assets/js/224.cb80f080.js"><link rel="prefetch" href="/assets/js/225.147ce9aa.js"><link rel="prefetch" href="/assets/js/226.809989e8.js"><link rel="prefetch" href="/assets/js/227.f629406e.js"><link rel="prefetch" href="/assets/js/228.fbd3e64f.js"><link rel="prefetch" href="/assets/js/229.47d90bf2.js"><link rel="prefetch" href="/assets/js/23.d3a842bc.js"><link rel="prefetch" href="/assets/js/230.b791dc94.js"><link rel="prefetch" href="/assets/js/231.0f834520.js"><link rel="prefetch" href="/assets/js/232.308eb812.js"><link rel="prefetch" href="/assets/js/233.c7231183.js"><link rel="prefetch" href="/assets/js/234.9fe1b046.js"><link rel="prefetch" href="/assets/js/235.2c67689d.js"><link rel="prefetch" href="/assets/js/236.ad8e92ad.js"><link rel="prefetch" href="/assets/js/237.a7dfa894.js"><link rel="prefetch" href="/assets/js/238.e203146a.js"><link rel="prefetch" href="/assets/js/239.03006a0d.js"><link rel="prefetch" href="/assets/js/24.39bed4a8.js"><link rel="prefetch" href="/assets/js/240.33fec57b.js"><link rel="prefetch" href="/assets/js/241.055ad51b.js"><link rel="prefetch" href="/assets/js/242.d8e0c765.js"><link rel="prefetch" href="/assets/js/243.3865426b.js"><link rel="prefetch" href="/assets/js/244.1d374d92.js"><link rel="prefetch" href="/assets/js/245.e25c2299.js"><link rel="prefetch" href="/assets/js/246.b10b5a98.js"><link rel="prefetch" href="/assets/js/247.8ffa7714.js"><link rel="prefetch" href="/assets/js/248.f182932b.js"><link rel="prefetch" href="/assets/js/249.e6130c43.js"><link rel="prefetch" href="/assets/js/25.ffefd3d8.js"><link rel="prefetch" href="/assets/js/250.f073997c.js"><link rel="prefetch" href="/assets/js/251.bc03818f.js"><link rel="prefetch" href="/assets/js/252.2f3e1e1a.js"><link rel="prefetch" href="/assets/js/253.29650a7c.js"><link rel="prefetch" href="/assets/js/254.a391536a.js"><link rel="prefetch" href="/assets/js/255.67ba52a2.js"><link rel="prefetch" href="/assets/js/256.471bc91d.js"><link rel="prefetch" href="/assets/js/257.534eb30c.js"><link rel="prefetch" href="/assets/js/258.ea1754e6.js"><link rel="prefetch" href="/assets/js/26.ad30bb86.js"><link rel="prefetch" href="/assets/js/27.dbb4126e.js"><link rel="prefetch" href="/assets/js/28.8bd9d307.js"><link rel="prefetch" href="/assets/js/29.1a71e08e.js"><link rel="prefetch" href="/assets/js/3.9953073e.js"><link rel="prefetch" href="/assets/js/30.42d97bb2.js"><link rel="prefetch" href="/assets/js/31.30f900c9.js"><link rel="prefetch" href="/assets/js/32.a5df6c36.js"><link rel="prefetch" href="/assets/js/33.1d2d90c4.js"><link rel="prefetch" href="/assets/js/34.6df3a0a1.js"><link rel="prefetch" href="/assets/js/35.e5a1aa99.js"><link rel="prefetch" href="/assets/js/36.7156e7f7.js"><link rel="prefetch" href="/assets/js/38.746d9db3.js"><link rel="prefetch" href="/assets/js/39.147f4a84.js"><link rel="prefetch" href="/assets/js/4.f21084fd.js"><link rel="prefetch" href="/assets/js/40.975b3dc6.js"><link rel="prefetch" href="/assets/js/41.72637e70.js"><link rel="prefetch" href="/assets/js/42.f99b3098.js"><link rel="prefetch" href="/assets/js/43.db77c7a5.js"><link rel="prefetch" href="/assets/js/44.8620cf19.js"><link rel="prefetch" href="/assets/js/45.5f6a052b.js"><link rel="prefetch" href="/assets/js/46.e92d277b.js"><link rel="prefetch" href="/assets/js/47.692c8c2f.js"><link rel="prefetch" href="/assets/js/48.6021bd70.js"><link rel="prefetch" href="/assets/js/49.01f4c638.js"><link rel="prefetch" href="/assets/js/5.fb735bd1.js"><link rel="prefetch" href="/assets/js/50.30b4bfec.js"><link rel="prefetch" href="/assets/js/51.e955e801.js"><link rel="prefetch" href="/assets/js/52.3e4c5bd5.js"><link rel="prefetch" href="/assets/js/53.10b4da3e.js"><link rel="prefetch" href="/assets/js/54.bcf53f23.js"><link rel="prefetch" href="/assets/js/55.7dc849e2.js"><link rel="prefetch" href="/assets/js/56.106c02f7.js"><link rel="prefetch" href="/assets/js/57.024e57ae.js"><link rel="prefetch" href="/assets/js/58.14f76c64.js"><link rel="prefetch" href="/assets/js/59.0b24f777.js"><link rel="prefetch" href="/assets/js/6.95ba2307.js"><link rel="prefetch" href="/assets/js/60.ac9296c1.js"><link rel="prefetch" href="/assets/js/61.ecdd48ba.js"><link rel="prefetch" href="/assets/js/62.db6f90d9.js"><link rel="prefetch" href="/assets/js/63.f15fa795.js"><link rel="prefetch" href="/assets/js/64.ba793491.js"><link rel="prefetch" href="/assets/js/65.d00ddf25.js"><link rel="prefetch" href="/assets/js/66.41247740.js"><link rel="prefetch" href="/assets/js/67.1a858f2e.js"><link rel="prefetch" href="/assets/js/68.f0fb2148.js"><link rel="prefetch" href="/assets/js/69.960af925.js"><link rel="prefetch" href="/assets/js/7.4ea2a7cb.js"><link rel="prefetch" href="/assets/js/70.a7fd9f5e.js"><link rel="prefetch" href="/assets/js/71.797b9ba2.js"><link rel="prefetch" href="/assets/js/72.544b7f42.js"><link rel="prefetch" href="/assets/js/73.233ea30b.js"><link rel="prefetch" href="/assets/js/74.74193aec.js"><link rel="prefetch" href="/assets/js/75.58090f19.js"><link rel="prefetch" href="/assets/js/76.70d46d82.js"><link rel="prefetch" href="/assets/js/77.06718df4.js"><link rel="prefetch" href="/assets/js/78.def8bcd8.js"><link rel="prefetch" href="/assets/js/79.4a480023.js"><link rel="prefetch" href="/assets/js/8.ade06460.js"><link rel="prefetch" href="/assets/js/80.396cf990.js"><link rel="prefetch" href="/assets/js/81.86cbef81.js"><link rel="prefetch" href="/assets/js/82.70b41659.js"><link rel="prefetch" href="/assets/js/83.88dd9ea9.js"><link rel="prefetch" href="/assets/js/84.8141702f.js"><link rel="prefetch" href="/assets/js/85.132eb564.js"><link rel="prefetch" href="/assets/js/86.6d6d3f06.js"><link rel="prefetch" href="/assets/js/87.3c287970.js"><link rel="prefetch" href="/assets/js/88.ab381cae.js"><link rel="prefetch" href="/assets/js/89.3fc1949f.js"><link rel="prefetch" href="/assets/js/9.e286e9f3.js"><link rel="prefetch" href="/assets/js/90.95e4cac8.js"><link rel="prefetch" href="/assets/js/91.7848be84.js"><link rel="prefetch" href="/assets/js/92.8256d7bf.js"><link rel="prefetch" href="/assets/js/93.0a36ee68.js"><link rel="prefetch" href="/assets/js/94.71a7723b.js"><link rel="prefetch" href="/assets/js/95.48f02b92.js"><link rel="prefetch" href="/assets/js/96.6f336fcd.js"><link rel="prefetch" href="/assets/js/97.d6a61a44.js"><link rel="prefetch" href="/assets/js/98.8f3aeef7.js"><link rel="prefetch" href="/assets/js/99.00c90d24.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f24a96ee.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210131112211.jpg" alt="FSA全栈行动" class="logo"> <span class="site-name can-hide">FSA全栈行动</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="移动端" class="dropdown-title"><a href="/mobile/" class="link-title">移动端</a> <span class="title" style="display:none;">移动端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>移动端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/61d6a8/" class="nav-link">Android</a></li><li class="dropdown-subitem"><a href="/pages/cb27eb/" class="nav-link">iOS</a></li><li class="dropdown-subitem"><a href="/pages/61cc74/" class="nav-link">Flutter</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/kotlin/" class="nav-link">《Kotlin快速入门进阶》笔记</a></li><li class="dropdown-subitem"><a href="/note/flutter/" class="nav-link">《Flutter从入门到实战》笔记</a></li><li class="dropdown-subitem"><a href="/note/flutter/lxf/review/" class="nav-link">《Flutter复习》笔记</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/web/" class="nav-link">前端</a></div><div class="nav-item"><a href="/backend/" class="nav-link">后端</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="内功心法" class="dropdown-title"><a href="/power/" class="link-title">内功心法</a> <span class="title" style="display:none;">内功心法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/designpattern/" class="nav-link">《深入浅出设计模式Java版》笔记</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/ea5b48/" class="nav-link">逆向</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="About" class="dropdown-title"><!----> <span class="title" style="display:;">About</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about/LinXunFeng/" class="nav-link">LinXunFeng</a></li><li class="dropdown-item"><!----> <a href="/about/GitLqr/" class="nav-link">GitLqr</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210131111432.png"> <div class="blogger-info"><h3>公众号：FSA全栈行动</h3> <span>记录学习过程中的知识</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="移动端" class="dropdown-title"><a href="/mobile/" class="link-title">移动端</a> <span class="title" style="display:none;">移动端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>移动端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/61d6a8/" class="nav-link">Android</a></li><li class="dropdown-subitem"><a href="/pages/cb27eb/" class="nav-link">iOS</a></li><li class="dropdown-subitem"><a href="/pages/61cc74/" class="nav-link">Flutter</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/kotlin/" class="nav-link">《Kotlin快速入门进阶》笔记</a></li><li class="dropdown-subitem"><a href="/note/flutter/" class="nav-link">《Flutter从入门到实战》笔记</a></li><li class="dropdown-subitem"><a href="/note/flutter/lxf/review/" class="nav-link">《Flutter复习》笔记</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/web/" class="nav-link">前端</a></div><div class="nav-item"><a href="/backend/" class="nav-link">后端</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="内功心法" class="dropdown-title"><a href="/power/" class="link-title">内功心法</a> <span class="title" style="display:none;">内功心法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/designpattern/" class="nav-link">《深入浅出设计模式Java版》笔记</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/ea5b48/" class="nav-link">逆向</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="About" class="dropdown-title"><!----> <span class="title" style="display:;">About</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about/LinXunFeng/" class="nav-link">LinXunFeng</a></li><li class="dropdown-item"><!----> <a href="/about/GitLqr/" class="nav-link">GitLqr</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AndroidUI</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android第三方SDK</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android混淆</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android仓库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android新闻</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android系统开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android源码</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Android注解AOP</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/294865/" class="sidebar-link">Android面向切面编程（AOP）</a></li><li><a href="/pages/db2b0b/" aria-current="page" class="active sidebar-link">手撸一个简易Android数据库框架</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/db2b0b/#一、简述" class="sidebar-link">一、简述</a></li><li class="sidebar-sub-header level2"><a href="/pages/db2b0b/#二、数据库常用操作" class="sidebar-link">二、数据库常用操作</a></li><li class="sidebar-sub-header level2"><a href="/pages/db2b0b/#三、dao类工厂" class="sidebar-link">三、Dao类工厂</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/db2b0b/#_1、数据库位置" class="sidebar-link">1、数据库位置</a></li><li class="sidebar-sub-header level3"><a href="/pages/db2b0b/#_2、工厂单例" class="sidebar-link">2、工厂单例</a></li><li class="sidebar-sub-header level3"><a href="/pages/db2b0b/#_3、生产dao类" class="sidebar-link">3、生产Dao类</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/db2b0b/#四、数据库操作封装" class="sidebar-link">四、数据库操作封装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/db2b0b/#_1、自定义注解-tbname和tbfield" class="sidebar-link">1、自定义注解：TbName和TbField</a></li><li class="sidebar-sub-header level3"><a href="/pages/db2b0b/#_2、dao类初始化" class="sidebar-link">2、Dao类初始化</a></li><li class="sidebar-sub-header level3"><a href="/pages/db2b0b/#_3、增" class="sidebar-link">3、增</a></li><li class="sidebar-sub-header level3"><a href="/pages/db2b0b/#_4、删" class="sidebar-link">4、删</a></li><li class="sidebar-sub-header level3"><a href="/pages/db2b0b/#_5、改" class="sidebar-link">5、改</a></li><li class="sidebar-sub-header level3"><a href="/pages/db2b0b/#_6、查" class="sidebar-link">6、查</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/db2b0b/#五、测试" class="sidebar-link">五、测试</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/db2b0b/#_1、测试前准备" class="sidebar-link">1、测试前准备</a></li><li class="sidebar-sub-header level3"><a href="/pages/db2b0b/#_2、功能测试" class="sidebar-link">2、功能测试</a></li><li class="sidebar-sub-header level3"><a href="/pages/db2b0b/#最后贴下demo地址" class="sidebar-link">最后贴下Demo地址：</a></li></ul></li></ul></li><li><a href="/pages/688a6b/" class="sidebar-link">使用注解打造自己的IOC框架</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android脚本</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AndroidTv开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AndroidNDK</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android音视频</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android热修复</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android性能优化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android云游戏</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android插件化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>iOSUI</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>iOS工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>iOS底层原理与应用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>iOS组件化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>iOS音视频</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>iOS疑难杂症</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>iOS之Swift</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>iOS之RxSwift</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>iOS开源项目</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>iOS逆向</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Flutter开发</span> <span class="arrow right"></span></p> <!----></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/mobile/#移动端" data-v-06225672>移动端</a></li><li data-v-06225672><a href="/mobile/#Android注解AOP" data-v-06225672>Android注解AOP</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/GitLqr" target="_blank" title="作者" class="beLink" data-v-06225672>GitLqr</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2017-11-27</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">手撸一个简易Android数据库框架<!----></h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <center>欢迎关注微信公众号：<a href="https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/FSA_QR_bottom.png">[FSA全栈行动 👋]</a><center>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><h2 id="一、简述"><a href="#一、简述" class="header-anchor">#</a> 一、简述</h2> <p>众所周知，移动端（不管是Android还是iOS）使用的数据库是Sqlite，这种小型的数据库很适合移动端存储大量的数据，使用上也跟mysql基本无差，但官方提供的API在操作性方面真不咋的，你必须掌握一定程度的sql语句，否则将很难驾驭。所以，有很多第三方的数据库框架就开始流行，如：GreenDao、Litepal等。这些ORM数据库框架，可以帮助开发者节省大量编写数据库操作代码的时间，只需对对象进行赋值操作，便能作用到数据库上，方便我们开发更加复杂的业务逻辑。本篇的主题就是做一个简易的数据库框架，使用设计模式、泛型、注解、反射这些高级技巧来实现。</p> <h2 id="二、数据库常用操作"><a href="#二、数据库常用操作" class="header-anchor">#</a> 二、数据库常用操作</h2> <p>数据库操作无非就是增删改查（CRUD），而且一般操作数据库表的类称为Dao类，所以可以为这些Dao类抽取一个共同的接口：</p> <div class="language- extra-class"><pre><code>public interface IBaseDao&lt;M&gt; {

    Long insert(M entity);

    Integer delete(M where);

    Integer update(M entitiy, M where);

    List&lt;M&gt; query(M where);

    List&lt;M&gt; query(M where, String orderBy);

    List&lt;M&gt; query(M where, String orderBy, Integer page, Integer pageCount);

}
</code></pre></div><p>我们要做的数据库框架也是一个ORM框架，表现层不涉及任何sql语句，直接操作的是数据对象，但具体的数据类型在这个接口中并不清楚，所以使用泛型来表示。</p> <h2 id="三、dao类工厂"><a href="#三、dao类工厂" class="header-anchor">#</a> 三、Dao类工厂</h2> <p>一个程序，一般只有一个数据库，一个数据库中会包含多张表，例如用户表，权限表等，这就意味着，项目中，Dao类会有多个，因为数据库操作无非是CRUD，所以可以确定它们的结构相同，只是具体操作的表与字段不同（即数据类型不同），所以，使用“泛型+工厂”来生产这些Dao类最合适不过。下面先贴出Dao类工厂代码，再一一分析：</p> <div class="language- extra-class"><pre><code>public class BaseDaoFactory {

    private static String mDbPath;
    private SQLiteDatabase mDatabase;

    private static class Instance {
        public static BaseDaoFactory INSTANCE = new BaseDaoFactory();
    }

    public static BaseDaoFactory getInstance() {
        return Instance.INSTANCE;
    }

    // 初始化数据库位置
    public static void init(String dbPath) {
        mDbPath = dbPath;
    }

    public BaseDaoFactory() {
        if (TextUtils.isEmpty(mDbPath)) {
            throw new RuntimeException(&quot;在使用BaseDaoFactory之前，请调用BaseDaoFactory.init()初始化好数据库路径。&quot;);
        }
        // 打开数据库，得到数据库对象
        mDatabase = SQLiteDatabase.openOrCreateDatabase(mDbPath, null);
    }

    public &lt;T extends BaseDao&lt;M&gt;, M&gt; T getDataHelper(Class&lt;T&gt; clazz, Class&lt;M&gt; entity) {
        T baseDao = null;
        try {
            baseDao = clazz.newInstance();
            baseDao.init(mDatabase, entity);
        } catch (InstantiationException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        }
        return baseDao;
    }
}
</code></pre></div><h3 id="_1、数据库位置"><a href="#_1、数据库位置" class="header-anchor">#</a> 1、数据库位置</h3> <p>使用SQLiteDatabase，可以在任意位置创建或打开一个数据库，这样的好处是：如果，用SQLiteOpenHelper来创建数据库，默认会将数据库文件创建到/data/data/包名/databases目录下，当应用被删除时，数据库也将同应用一起被删除，有时我们会有这样的需求，在用户重装安装App时，可以使用之前的数据库信息，例如：UC浏览器的书签本地恢复功能。</p> <div class="language- extra-class"><pre><code>// 初始化数据库位置
public static void init(String dbPath) {
    mDbPath = dbPath;
}

public BaseDaoFactory() {
    if (TextUtils.isEmpty(mDbPath)) {
        throw new RuntimeException(&quot;在使用BaseDaoFactory之前，请调用BaseDaoFactory.init()初始化好数据库路径。&quot;);
    }
    // 打开数据库，得到数据库对象
    mDatabase = SQLiteDatabase.openOrCreateDatabase(mDbPath, null);
}
</code></pre></div><p>本框架可以让开发者自定义数据库的存放位置，因为在构造函数中会使用到该路径对数据库进行创建，所以这里使用静态方法的方式，在Dao工厂实例化之前先对其（mDbPath）进行赋值。这种方式在很多第三方框架的源码中很是常见，一般在自定义的Application中对通过调用框架的init()方法对框架中必需的变量进行赋值。</p> <h3 id="_2、工厂单例"><a href="#_2、工厂单例" class="header-anchor">#</a> 2、工厂单例</h3> <p>该框架中的Dao类工厂只要一个就够了，所以需要用到单例模式，常见的单例模式有饿汉式和懒汉式，这里选用静态内部类单例模式，原因是什么呢？</p> <h4 id="_1-饿汉式"><a href="#_1-饿汉式" class="header-anchor">#</a> 1）饿汉式</h4> <p>饿汉式在类加载时就已经初始化好了，不管项目中是否使用，都会占用内存，虽然效率高，但开发中一般不用。</p> <div class="language- extra-class"><pre><code>public class BaseDaoFactory {
	private static BaseDaoFactory Instance = new BaseDaoFactory();
    public static BaseDaoFactory getInstance() {
        return Instance;
    }
}
</code></pre></div><h4 id="_2-懒汉式"><a href="#_2-懒汉式" class="header-anchor">#</a> 2）懒汉式</h4> <p>懒汉式虽然解决了饿汉式的弊端，实现调用时创建单例，但线程不安全，当然我们可以使用双重检测机制来解决，但这样也降低了效率（至少第一次初始化时需要同步，降低了效率），是开发中最常见的单例实现方式。</p> <div class="language- extra-class"><pre><code>public class BaseDaoFactory {
	private static BaseDaoFactory mInstance;
    public static BaseDaoFactory getInstance() {
        if (mInstance == null) {
            synchronized (BaseDaoFactory.class) {
                if (mInstance == null) {
                    mInstance = new BaseDaoFactory();
                }
            }
        }
        return mInstance;
    }
}
</code></pre></div><h4 id="_3-静态内部类单例"><a href="#_3-静态内部类单例" class="header-anchor">#</a> 3）静态内部类单例</h4> <p>静态内部类单例综合了前面两者的优点，即调用时创建单例，效率高且没有线程安全问题。当在调用getInstance()方法创建工厂单例时，静态内部类Instance才会被加载，同时初始化内部类属性INSTANCE，即初始化外部类BaseDaoFactory对象（Dao工厂），因为该静态内部类只会加载一次，所以该INSTANCE对象也只会被创建一次。</p> <div class="language- extra-class"><pre><code>private static class Instance {
    public static BaseDaoFactory INSTANCE = new BaseDaoFactory();
}

public static BaseDaoFactory getInstance() {
    return Instance.INSTANCE;
}

// 单例模式，一般会将构造函数私有化，以保证不会被外界初始化。
private BaseDaoFactory() {
   ...
}
</code></pre></div><h3 id="_3、生产dao类"><a href="#_3、生产dao类" class="header-anchor">#</a> 3、生产Dao类</h3> <p>Dao工厂会提供一个public方法来供外界获取需要的Dao类，而外界只需要传入具体Dao类和数据实体类对应的class即可。</p> <div class="language- extra-class"><pre><code>public &lt;T extends BaseDao&lt;M&gt;, M&gt; T getDataHelper(Class&lt;T&gt; clazz, Class&lt;M&gt; entity) {
    T baseDao = null;
    try {
        baseDao = clazz.newInstance();
        baseDao.init(mDatabase, entity);
    } catch (InstantiationException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    }
    return baseDao;
}
</code></pre></div><p>可能这部分代码比较迷的地方就是<code>&lt;T extends BaseDao&lt;M&gt;, M&gt;</code>了（先抛开方法体中的具体实现），其实这只是方法声明泛型的方式而已。我们知道，类上声明泛型很简单，只需要在类后面加上<code>&lt;T\&gt;</code>（字母随意）即可，如：</p> <div class="language- extra-class"><pre><code>// 类上泛型可以声明多个
public class Person&lt;M,T&gt; {
    ...
}
</code></pre></div><p>而方法上声明泛型跟类上声明泛型有些区别——泛型声明的位置不同，方法上的泛型需要在修饰符（public等）与返回值之间声明，如：</p> <div class="language- extra-class"><pre><code>public &lt;T&gt; void eat(){
    ...
}
</code></pre></div><p>上面的代码不会报错，但一点意义都没有，因为泛型没被使用到，一般方法上声明的泛型可作为方法参数类型和返回值类型，如：</p> <div class="language- extra-class"><pre><code>// 同样，方法泛型也可以声明多个
public &lt;T,M&gt; T eat(T t, M m){
    ...
}
</code></pre></div><p>可以这样认为，默认泛型表示的是Object（编码时），有时我们需要更加精确泛型的类型，这可以通过extends办到，如：</p> <div class="language- extra-class"><pre><code>public &lt;T extends Person&gt; void doSomething(T t){
    ...
}
</code></pre></div><p>这时，传入doSomething()的参数必须是Person的子类（Boy或Girl），且在编码时，可以在方法体中使用t调用Person中声明的方法，如eat()，如果不使用extends来指定泛型T的具体类型，那么在编码时，t会被认为是Object类型，也就没法调用eat()这类自定义的方法了。到这里，回头再看上面的代码，应该就不会迷了。</p> <h2 id="四、数据库操作封装"><a href="#四、数据库操作封装" class="header-anchor">#</a> 四、数据库操作封装</h2> <p>前面一开始的时候就已经为Dao类抽取了一个共同的接口，规范了Dao类的基本操作，而且，我们不想在具体的Dao类中直接操作数据库，所以，在这两者中间必须有一层来完成数据库操作，并对各操作方法进行封装，它就是BaseDao，以下是该类中可供外界调用的方法：</p> <div class="language- extra-class"><pre><code>public abstract class BaseDao&lt;M&gt; implements IBaseDao&lt;M&gt; {
    protected boolean init(SQLiteDatabase database, Class&lt;M&gt; entity) {
        ...
    }
    @Override
    public Long insert(M entity) {
        ...
    }
    @Override
    public Integer delete(M where) {
        ...
    }

    @Override
    public Integer update(M entitiy, M where) {
        ...
    }

    @Override
    public List&lt;M&gt; query(M where) {
        ...
    }

    @Override
    public List&lt;M&gt; query(M where, String orderBy) {
        ...
    }

    @Override
    public List&lt;M&gt; query(M where, String orderBy, Integer page, Integer pageCount) {
        ...
    }
}
</code></pre></div><blockquote><p>在框架设计中，要切记，不需要被外界（表现层）所知的方法或属性请尽量私有化，一来对框架安全，二来避免团队开发中不必要的冲突。因为BaseDao的init()方法只被DaoFactory调用，且两者均在同包下，故使用protected修饰。</p></blockquote> <h3 id="_1、自定义注解-tbname和tbfield"><a href="#_1、自定义注解-tbname和tbfield" class="header-anchor">#</a> 1、自定义注解：TbName和TbField</h3> <p>在对BaseDao进行解析前，先来说说两个十分重要的注解——TbName和TbField。几乎市面上所有的ORM数据库框架，都会用到自定义注解来对一个数据实体进行描述，比如User类的类名对应表的表名，有可能是user，也有可能是t_user，那开发者就可以使用框架提供的注解（TbName）来进行自定义表名了，同理，类中的属性名对应表的字段名也是如此，不过对于表的初始化还需要知道表字段的长度，所以表字段注解（TbField）还多了一个length属性。</p> <div class="language- extra-class"><pre><code>/**
 * 表名注解
 */
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
public @interface TbName {
    String value();
}

/**
 * 表字段注解
 */
@Target(ElementType.FIELD)
@Retention(RetentionPolicy.RUNTIME)
public @interface TbField {
    String value();
    int length();
}
</code></pre></div><blockquote><p>一方面，BaseDao对TbName和TbField的解析是处于程序运行阶段，所以这2个注解必须是运行时可见，即Retention的值必须是RetentionPolicy.RUNTIME。
另一方面，TbName是要注解在类上的，所以其Target的值是ElementType.TYPE；而TbField则是注解在类属性上的，所以其Target的值是ElementType.FIELD。</p></blockquote> <h3 id="_2、dao类初始化"><a href="#_2、dao类初始化" class="header-anchor">#</a> 2、Dao类初始化</h3> <p>在Dao工厂中就已经使用了这个BaseDao的init()方法，来对Dao类进行一些通用的初始化工作，下面就来看看它都初始化了什么：</p> <div class="language- extra-class"><pre><code>/**
 * 初始化表操作对象，一般包括：创建表、获取表字段与类字段的映射关系
 */
protected boolean init(SQLiteDatabase database, Class&lt;M&gt; entity) {
    mDatabase = database;
    mEntityClass = entity;
    
    // 往后的操作必须是基于数据库已经打开的前提下
    if (!database.isOpen()) {
        return false;
    }

    // 获取表名
    TbName tbName = entity.getAnnotation(TbName.class);
    mTbName = tbName == null ? entity.getSimpleName() : tbName.value();

    // 获取表映射字段
    if (!genFieldMap()) {
        return false;
    }

    // 创建数据库
    if (!createTable(database)) {
        return false;
    }

    return true;
}
</code></pre></div><p>在这个init()方法中，可以看到，注解TbName率先被该框架使用到了，当开发者有使用该注解时，表名以TbName注解中的值为表名，否则以类名作为表名。</p> <blockquote><p>注解是“静态的”，在类加载时就已经固定了，也就是说运行时无法修改其值（javassist方式除外），所以，可以利用类的class对象，通过 getAnnotation(注解.class).注解属性() 这种方法也获取注解的属性值。</p></blockquote> <h4 id="_1-获取表字段与类字段的映射关系"><a href="#_1-获取表字段与类字段的映射关系" class="header-anchor">#</a> 1）获取表字段与类字段的映射关系</h4> <p>我们知道，类的属性名可能会与表的字段名不同，而BaseDao中的很多后续操作都会跟这两者打交道，所以，在BaseDao的初始化过程中将这两者的关系使用Map进行保存，方便后续的各种操作。</p> <div class="language- extra-class"><pre><code>private boolean genFieldMap() {
    mFieldMap = new HashMap&lt;&gt;();
    Field[] fields = mEntityClass.getFields();
    if (fields == null || fields.length == 0) {
        Log.e(TAG, &quot;获取不到类中字段&quot;);
        return false;
    }
    for (Field field : fields) {
        field.setAccessible(true);
        TbField tbField = field.getAnnotation(TbField.class);
        mFieldMap.put(tbField == null ? field.getName() : tbField.value(), field);
    }
    return true;
}    
</code></pre></div><p>反射中的几个小知识点：</p> <ul><li>Field[] fields = mEntityClass.getFields();// 得到类中的public字段，包括父类。</li> <li>Field[] fields = mEntityClass.getDeclaredFields();// 得到类中声明的字段（不管是public、protected、private），不包括父类。</li> <li>field.setAccessible(true);// 将私有属性或final属性可以被访问</li></ul> <p>考虑到数据实体类可能会使用继承的方式来拓展父类，即会用到父类的属性值，所以使用getFields()方法，但代价就是实体类中的属性必须是public的。</p> <h4 id="_2-创建表"><a href="#_2-创建表" class="header-anchor">#</a> 2）创建表</h4> <p>Dao类的初始化工作也包括了表的创建。一方面，因为不能在每次创建并初始化Dao类时都去重新创建一次表，所以这里就用到了sql语句中的 if not exists 关键字来避免重复创建表的问题。另一方面，其实创建表的sql语句是一种模板，两个不同的表在使用sql创建时，无非就是表名、字段名、字段类型和字段长度不同，而恰好，这些不同的元素可以使用反射+TbField注解来获取，从而实现sql语句的动态拼接，结合上一步得到的表字段与类字段的映射关系（mFieldMap），代码可以这么写：</p> <div class="language- extra-class"><pre><code>/**
 * 创建表（可以被子类重写，方便灵活扩展）
 */
protected boolean createTable(SQLiteDatabase database) {
    StringBuilder sb = new StringBuilder();
    for (Map.Entry&lt;String, Field&gt; entry : mFieldMap.entrySet()) {
        String columnName = entry.getKey();
        Field field = entry.getValue();
        TbField tbField = field.getAnnotation(TbField.class);
        int length = tbField == null ? 255 : tbField.length();
        String type = &quot;&quot;;
        Class&lt;?&gt; fieldType = field.getType();
        if (fieldType == String.class) {
            type = &quot;varchar&quot;;
        } else if (fieldType == int.class || fieldType == Integer.class) {
            type = &quot;int&quot;;
        } else if (fieldType == double.class || fieldType == Double.class) {
            type = &quot;double&quot;;
        } else if (fieldType == float.class || fieldType == Float.class) {
            type = &quot;float&quot;;
        }
        if (TextUtils.isEmpty(type)) {
            Log.e(TAG, type.getClass().getName() + &quot;是不支持的字段&quot;);
        } else {
            sb.append(columnName + &quot; &quot; + type + &quot;(&quot; + length + &quot;),&quot;);
        }
    }
    sb.deleteCharAt(sb.lastIndexOf(&quot;,&quot;));
    String s = sb.toString();
    if (TextUtils.isEmpty(s)) {
        Log.e(TAG, &quot;获取不到表字段信息&quot;);
        return false;
    }
    String sql = &quot;create table if not exists &quot; + mTbName + &quot; (&quot; + s + &quot;) &quot;;
    Log.e(TAG, sql);
    database.execSQL(sql);
    return true;
}
</code></pre></div><p>到这里，Dao类的初始化工作就完了，下面进行CRUD的封装。</p> <h3 id="_3、增"><a href="#_3、增" class="header-anchor">#</a> 3、增</h3> <p>我们知道，若使用原生的SQLiteDatabase将数据插入到表中，需要将数据先封装成ContentValues对象，再调用其insert()方法来执行数据插入操作。那么，现在我们拥有了一个数据实体，要做的，就是将这个数据实体转成ContentValues对象，再使用SQLiteDatabase的insert()方法来执行插入，可以说我们就是对SQLiteDatabase进行封装，总结上面的理论，代码分如下三步：</p> <ol><li>将对象中的属性转成键值对values。</li> <li>将键值对values转成ContentValues对象。</li> <li>使用SQLiteDatabase的insert()方法进行数据插入。</li></ol> <p>结合mFieldMap，实现表数据插入的代码可以这么写：</p> <div class="language- extra-class"><pre><code>@Override
public Long insert(M entity) {
    try {
        Map&lt;String, String&gt; values = getValues(entity);
        ContentValues cv = getContentValues(values);
        return mDatabase.insert(mTbName, null, cv);
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    }
    return 0L;
}

/**
 * 将对象中的属性转成键值对（列名--值）
 */
private Map&lt;String, String&gt; getValues(M entity) throws IllegalAccessException {
    Map&lt;String, String&gt; result = new HashMap&lt;&gt;();
    for (Map.Entry&lt;String, Field&gt; entry : mFieldMap.entrySet()) {
        Object value = entry.getValue().get(entity);
        result.put(entry.getKey(), value == null ? &quot;&quot; : value.toString());
    }
    return result;
}

/**
 * 将键值对转成ContentValues
 */
private ContentValues getContentValues(Map&lt;String, String&gt; values) {
    ContentValues cv = new ContentValues();
    for (Map.Entry&lt;String, String&gt; val : values.entrySet()) {
        cv.put(val.getKey(), val.getValue());
    }
    return cv;
}
</code></pre></div><h3 id="_4、删"><a href="#_4、删" class="header-anchor">#</a> 4、删</h3> <p>要实现删除表数据功能，需要使用到SQLiteDatabase的delete()方法，其中whereClause和whereArgs是关键。又因为该框架是一个ORM框架，在表现层需要将删除条件使用数据实体进行封装，而框架内部则是对传入的数据实体进行解析，将对象中属性值不为null的属性拿出来作为删除的条件（这也意味着常见的数据类型不能用了，如int，但可以使用Integer来替换），可分为两步：</p> <ol><li>将对象中的属性转成键值对whereMap。</li> <li>使用Condition类的构造函数对whereMap中value不为null的键值对取出来拼接。</li></ol> <p>综上所述，BaseDao的表数据删除实现代码如下：</p> <div class="language- extra-class"><pre><code>@Override
public Integer delete(M where) {
    try {
        Map&lt;String, String&gt; whereMap = getValues(where);
        Condition condition = new Condition(whereMap);
        return mDatabase.delete(mTbName, condition.whereClause, condition.whereArgs);
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    }
    return 0;
}

class Condition {
    public Condition(Map&lt;String, String&gt; whereMap) {

        StringBuilder sb = new StringBuilder();
        List&lt;String&gt; list = new ArrayList&lt;&gt;();

        for (Map.Entry&lt;String, String&gt; entry : whereMap.entrySet()) {
            if (!TextUtils.isEmpty(entry.getValue())) {
                sb.append(&quot;and &quot; + entry.getKey() + &quot;=? &quot;);
                list.add(entry.getValue());
            }
        }
        this.whereClause = sb.delete(0, 4).toString();
        this.whereArgs = list.toArray(new String[list.size()]);
    }

    String whereClause;
    String[] whereArgs;
}
</code></pre></div><blockquote><p>whereClause是删除条件，是个字符串，需要使用?来作为占位符，多个条件需要使用and关键字连接，如：<strong>name=? and password=?</strong>。<br>
whereArgs则是对whereClause中占位符进行数值替换的字体串数组，如：<strong>new String[]{&quot;LQR&quot;,&quot;123456&quot;}</strong>。</p></blockquote> <h3 id="_5、改"><a href="#_5、改" class="header-anchor">#</a> 5、改</h3> <p>通过前面对表数据增和删的代码实现，更新数据部分就比较好理解了，因为SQLiteDatabase的update()方法需要用到的参数有ContentValues对象，whereClause和whereArgs，其实就是将增和删的代码实现相加起来而已，这就不多废话，实现的代码如下：</p> <div class="language- extra-class"><pre><code>@Override
public Integer update(M entitiy, M where) {
    try {
        Map&lt;String, String&gt; values = getValues(entitiy);
        ContentValues cv = getContentValues(values);

        Map&lt;String, String&gt; whereMap = getValues(where);
        Condition condition = new Condition(whereMap);

        return mDatabase.update(mTbName, cv, condition.whereClause, condition.whereArgs);
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    }
    return 0;
}
</code></pre></div><h3 id="_6、查"><a href="#_6、查" class="header-anchor">#</a> 6、查</h3> <p>终于到了CRUD的最后一步：数据查询(Retrieve)。可以说这是数据库操作中最重要且使用频率最高的一部分了，同样的，表数据查询还是用到了SQLiteDatabase，使用其query()方法来进行表数据查询，它的参数也比较多，这里就只封装三种查询：</p> <ol><li>将符合条件的表数据全部查询出来。</li> <li>将符合条件的表数据查询出来，并可以排序。</li> <li>将符合条件的表数据查询出来，除了可以排序，还可以分页查询。</li></ol> <p>需要注意的就是分页查询，因为SQLiteDatabase的第一页是从0开始的，而我希望的是表现层从1开始，所以框架代码中会对其进行自减处理。这三个方法的代码具体实现如下：</p> <div class="language- extra-class"><pre><code>@Override
public List&lt;M&gt; query(M where) {
    return query(where, null);
}

@Override
public List&lt;M&gt; query(M where, String orderBy) {
    return query(where, orderBy, null, null);
}

@Override
public List&lt;M&gt; query(M where, String orderBy, Integer page, Integer pageCount) {
    List&lt;M&gt; list = null;
    Cursor cursor = null;
    try {
        String limit = null;
        if (page != null &amp;&amp; pageCount != null) {
            int startIndex = --page;
            limit = (startIndex &lt; 0 ? 0 : startIndex) + &quot;,&quot; + pageCount;
        }

        if (where != null) {
            Map&lt;String, String&gt; whereMap = getValues(where);
            Condition condition = new Condition(whereMap);
            cursor = mDatabase.query(mTbName, null, condition.whereClause, condition.whereArgs, null, null, orderBy, limit);
        } else {
            cursor = mDatabase.query(mTbName, null, null, null, null, null, orderBy, limit);
        }

		// 将查询出来的表数据转成对象集合
        list = getDataList(cursor);
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    } catch (InstantiationException e) {
        e.printStackTrace();
    } finally {
        if (cursor != null) {
            cursor.close();
            cursor = null;
        }
    }
    return list;
}

/**
 * 通过游标，将表中数据转成对象集合
 */
private List&lt;M&gt; getDataList(Cursor cursor) throws IllegalAccessException, InstantiationException {
    if (cursor != null) {
        List&lt;M&gt; result = new ArrayList&lt;&gt;();
        // 遍历游标，获取表中一行行的数据
        while (cursor.moveToNext()) {

            // 创建对象
            ParameterizedType pt = (ParameterizedType) this.getClass().getGenericSuperclass();// 获取当前new的对象的 泛型的父类 类型
            Class&lt;M&gt; clazz = (Class&lt;M&gt;) pt.getActualTypeArguments()[0];// 获取第一个类型参数的真实类型
            M item = clazz.newInstance();

            // 遍历表字段，使用游标一个个取值，赋值给新创建的对象。
            Iterator&lt;String&gt; iterator = mFieldMap.keySet().iterator();
            while (iterator.hasNext()) {
                // 找到表字段
                String columnName = iterator.next();
                // 找到表字段对应的类属性
                Field field = mFieldMap.get(columnName);

                // 根据类属性类型，使用游标获取表中的值
                Object val = null;
                Class&lt;?&gt; fieldType = field.getType();
                if (fieldType == String.class) {
                    val = cursor.getString(cursor.getColumnIndex(columnName));
                } else if (fieldType == int.class || fieldType == Integer.class) {
                    val = cursor.getInt(cursor.getColumnIndex(columnName));
                } else if (fieldType == double.class || fieldType == Double.class) {
                    val = cursor.getDouble(cursor.getColumnIndex(columnName));
                } else if (fieldType == float.class || fieldType == Float.class) {
                    val = cursor.getFloat(cursor.getColumnIndex(columnName));
                }

                // 反射给对象属性赋值
                field.set(item, val);
            }
            // 将对象添加到集合中
            result.add(item);
        }
        return result;
    }
    return null;
}
</code></pre></div><p>至此，这个简易的数据库框架就写好了，下面来测试一下。</p> <h2 id="五、测试"><a href="#五、测试" class="header-anchor">#</a> 五、测试</h2> <p>Activity的布局很简单，我就不贴了，就是几个简单的按钮而已。</p> <h3 id="_1、测试前准备"><a href="#_1、测试前准备" class="header-anchor">#</a> 1、测试前准备</h3> <h4 id="_1-user"><a href="#_1-user" class="header-anchor">#</a> 1）User</h4> <p>一个简单的数据实体类，没什么好说的，看代码。</p> <div class="language- extra-class"><pre><code>@TbName(&quot;tb_user&quot;)
public class User {

    @TbField(value = &quot;tb_name&quot;, length = 30)
    public String username;

    @TbField(value = &quot;tb_password&quot;, length = 20)
    public String password;

    @TbField(value = &quot;tb_age&quot;, length = 11)
    public Integer age;

    public User() {
    }

    public User(String username, String password) {
        this.username = username;
        this.password = password;
    }

    public User(String username, String password, int age) {
        this.username = username;
        this.password = password;
        this.age = age;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public Integer getAge() {
        return age;
    }

    public void setAge(Integer age) {
        this.age = age;
    }

    @Override
    public String toString() {
        return &quot;[username:&quot; + this.username + &quot;, password:&quot; + this.getPassword() + &quot;, age:&quot; + this.getAge() + &quot;]&quot;;
    }
}
</code></pre></div><h4 id="_2-userdao"><a href="#_2-userdao" class="header-anchor">#</a> 2）UserDao</h4> <p>可以看到这个UserDao中其实没什么代码，但它可以通过重写父类createTable()方法来更灵活的创建表，或自定义一些其它的方法来扩展其父类的功能。</p> <div class="language- extra-class"><pre><code>public class UserDao extends BaseDao&lt;User&gt; {
    // @Override
    // protected boolean createTable(SQLiteDatabase database) {
    // database.execSQL(&quot;create table if not exists t_user(tb_name varchar(30),tb_password varchar(10))&quot;);
    // return super.createTable(database);
    // }
}
</code></pre></div><h3 id="_2、功能测试"><a href="#_2、功能测试" class="header-anchor">#</a> 2、功能测试</h3> <h4 id="_1-初始化"><a href="#_1-初始化" class="header-anchor">#</a> 1）初始化</h4> <p>这个框架需要指定一个数据库位置，我们在Activity的onCreate()方法中调用框架的init()方法来指定，建议最好放到自定义的Application中。</p> <div class="language- extra-class"><pre><code>@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_customer_db_frame);
    BaseDaoFactory.init(new File(getFilesDir(), &quot;csdn_lqr.db&quot;).getAbsolutePath());
    mUserDao = BaseDaoFactory.getInstance().getDataHelper(UserDao.class, User.class);
    mUser = new User(&quot;CSDN_LQR&quot;, &quot;123456&quot;, 10);
}
</code></pre></div><h4 id="_2-增"><a href="#_2-增" class="header-anchor">#</a> 2）增</h4> <p>往user表中插入一条username为&quot;CSDN_LQR&quot;，password为&quot;123456&quot;的数据：</p> <div class="language- extra-class"><pre><code>public void insert(View view) {
    Long insert = mUserDao.insert(mUser);
    Toast.makeText(getApplicationContext(), &quot;添加了&quot; + (insert != -1 ? 1 : 0) + &quot;条数据&quot;, Toast.LENGTH_SHORT).show();
}
</code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210106001554.gif" alt=""></p> <h4 id="_3-删"><a href="#_3-删" class="header-anchor">#</a> 3）删</h4> <p>从user表中删除一条username为&quot;CSDN_LQR&quot;的数据：</p> <div class="language- extra-class"><pre><code>public void delete(View view) {
    User where = new User();
    where.setUsername(&quot;CSDN_LQR&quot;);
    Integer delete = mUserDao.delete(where);
    Toast.makeText(getApplicationContext(), &quot;删除了&quot; + delete + &quot;条数据&quot;, Toast.LENGTH_SHORT).show();
}
</code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210106001610.gif" alt=""></p> <h4 id="_4-改"><a href="#_4-改" class="header-anchor">#</a> 4）改</h4> <p>将user表中username为&quot;CSDN_LQR&quot;的数据进行修改：</p> <div class="language- extra-class"><pre><code>public void update(View view) {
    User user = new User(&quot;LQR_CSDN&quot;, &quot;654321&quot;, 9);

    User where = new User();
    where.setUsername(&quot;CSDN_LQR&quot;);

    Integer update = mUserDao.update(user, where);
    Toast.makeText(getApplicationContext(), &quot;修改了&quot; + update + &quot;条数据&quot;, Toast.LENGTH_SHORT).show();
}
</code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210106001633.gif" alt=""></p> <h4 id="_5-查"><a href="#_5-查" class="header-anchor">#</a> 5）查</h4> <h5 id="a-将符合条件的表数据全部查询出来"><a href="#a-将符合条件的表数据全部查询出来" class="header-anchor">#</a> a. 将符合条件的表数据全部查询出来</h5> <p>将user表中所有username为&quot;CSDN_LQR&quot;的数据全部查询出来：</p> <div class="language- extra-class"><pre><code>public void query1(View view) {
    User where = new User();
    where.setUsername(&quot;CSDN_LQR&quot;);

    List&lt;User&gt; list = mUserDao.query(where);
    int query = list == null ? 0 : list.size();
    Toast.makeText(getApplicationContext(), &quot;查出了&quot; + query + &quot;条数据&quot;, Toast.LENGTH_SHORT).show();
    for (User user : list) {
        System.out.println(user);
    }
}
</code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210106001653.gif" alt=""></p> <h5 id="b-将符合条件的表数据查询出来-并排序"><a href="#b-将符合条件的表数据查询出来-并排序" class="header-anchor">#</a> b. 将符合条件的表数据查询出来，并排序</h5> <p>将user表中的数据按age的正反序分别查询出来：</p> <div class="language- extra-class"><pre><code>public void query2(View view) {
    List&lt;User&gt; list = mUserDao.query(null, &quot;tb_age asc&quot;);
    int query = list == null ? 0 : list.size();
    Toast.makeText(getApplicationContext(), &quot;查出了&quot; + query + &quot;条数据&quot;, Toast.LENGTH_SHORT).show();
    for (User user : list) {
        System.out.println(user);
    }
}

public void query3(View view) {
    List&lt;User&gt; list = mUserDao.query(null, &quot;tb_age desc&quot;);
    int query = list == null ? 0 : list.size();
    Toast.makeText(getApplicationContext(), &quot;查出了&quot; + query + &quot;条数据&quot;, Toast.LENGTH_SHORT).show();
    for (User user : list) {
        System.out.println(user);
    }
}
</code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210106001710.gif" alt=""></p> <h5 id="c-将符合条件的表数据查询出来-并分页。"><a href="#c-将符合条件的表数据查询出来-并分页。" class="header-anchor">#</a> c. 将符合条件的表数据查询出来，并分页。</h5> <p>只查询user表中的前2条数据：</p> <div class="language- extra-class"><pre><code>public void query4(View view) {
    User where = new User();

    List&lt;User&gt; list = mUserDao.query(where, null, 1, 2);
    int query = list == null ? 0 : list.size();
    Toast.makeText(getApplicationContext(), &quot;查出了&quot; + query + &quot;条数据&quot;, Toast.LENGTH_SHORT).show();
    for (User user : list) {
        System.out.println(user);
    }
}
</code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/20210106001730.gif" alt=""></p> <p>大成功，撒花。</p> <h3 id="最后贴下demo地址"><a href="#最后贴下demo地址" class="header-anchor">#</a> 最后贴下Demo地址：</h3> <p><a href="https://github.com/GitLqr/SimpleDbFrame" target="_blank" rel="noopener noreferrer">https://github.com/GitLqr/SimpleDbFrame<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <center><img style="width:100%;" src="https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource/image/FSA_QR_bottom.png"/></center>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=%E6%B3%A8%E8%A7%A3" title="标签">#注解</a><a href="/tags/?tag=%E6%95%B0%E6%8D%AE%E5%BA%93" title="标签">#数据库</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2025/08/10, 11:22:26</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/294865/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Android面向切面编程（AOP）</div></a> <a href="/pages/688a6b/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">使用注解打造自己的IOC框架</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/294865/" class="prev">Android面向切面编程（AOP）</a></span> <span class="next"><a href="/pages/688a6b/">使用注解打造自己的IOC框架</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/bf0a83/"><div>
            Flutter - 使用本地 DevTools 验证 SVG加载优化
            <!----></div></a> <span class="date">08-07</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/cfaaca/"><div>
            AI - Gemini CLI 摆脱终端限制
            <!----></div></a> <span class="date">07-27</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/305cd9/"><div>
            Flutter - 聊天面板库动画生硬？这次让你丝滑个够
            <!----></div></a> <span class="date">07-20</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/LinXunFeng" title="GitHub for LinXunFeng" target="_blank" class="iconfont icon-githubsquare"></a><a href="mailto:linxunfeng@yeah.net" title="email for LinXunFeng" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/GitLqr" title="GitHub for GitLqr" target="_blank" class="iconfont icon-github-circle"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2020-2025
    <span><a href="/about" target="_blank">FSA全栈行动</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><span class="close-but">×</span> <div><!-- 固定160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.11b78866.js" defer></script><script src="/assets/js/2.d8b68cf2.js" defer></script><script src="/assets/js/37.28a9ac42.js" defer></script>
  </body>
</html>
