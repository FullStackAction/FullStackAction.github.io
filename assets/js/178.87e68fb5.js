(window.webpackJsonp=window.webpackJsonp||[]).push([[178],{522:function(t,s,a){"use strict";a.r(s);var n=a(15),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"一、selenium-的介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、selenium-的介绍"}},[t._v("#")]),t._v(" 一、Selenium 的介绍")]),t._v(" "),s("p",[t._v("Selenium 是一个 Web 自动化测试工具，最初是为网站自动化测试而开发，Selenium 可以直接调用浏览器，它支持所有主流的浏览器（包括 PhantomJS 这些无界面的浏览器），可以接收指令，让浏览器自动加载页面，获取需要的数据，甚至页面截屏等。")]),t._v(" "),s("h3",{attrs:{id:"_1、selenium-启动-chrome"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、selenium-启动-chrome"}},[t._v("#")]),t._v(" 1、Selenium 启动 Chrome")]),t._v(" "),s("p",[t._v("在下载好 chromedriver 以及安装好 selenium 模块后，执行下列代码：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果driver没有添加到环境变量，则需要将driver的绝对路径赋值给executable_path参数")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# driver = webdriver.Chrome(executable_path='/home/worker/Desktop/driver/chromedriver')")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果driver添加了环境变量，则不需要设置executable_path")]),t._v("\ndriver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 向一个url发起请求")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://www.baidu.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 把网页保存为图片，69版本以上的谷歌浏览器将无法使用截图功能")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("save_screenshot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"screenshot.png"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 打印页面标题")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 退出模拟浏览器")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("quit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 一定要退出！不退出会有残留进程！")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2、selenium-启动-phantomjs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、selenium-启动-phantomjs"}},[t._v("#")]),t._v(" 2、Selenium 启动 PhantomJS")]),t._v(" "),s("p",[t._v('PhantomJS 是一个基于 Webkit 的"无界面"(headless)浏览器，它会把网站加载到内存并执行页面上的 JavaScript。下载地址：'),s("a",{attrs:{href:"https://phantomjs.org/download",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://phantomjs.org/download"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n\ndriver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PhantomJS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# driver = webdriver.PhantomJS(executable_path='/home/worker/Desktop/driver/phantomjs')")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 向一个url发起请求")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://www.baidu.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 把网页保存为图片")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("save_screenshot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'screenshot.png'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 退出模拟浏览器")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("quit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 一定要退出！不退出会有残留进程！")]),t._v("\n")])])]),s("h4",{attrs:{id:"无头浏览器与有头浏览器的使用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#无头浏览器与有头浏览器的使用场景"}},[t._v("#")]),t._v(" 无头浏览器与有头浏览器的使用场景")]),t._v(" "),s("ul",[s("li",[t._v("通常开发过程中需要查看运行过程中的各种情况所以通常使用有头浏览器")]),t._v(" "),s("li",[t._v("在项目完成进行部署的时候，通常平台采用的系统都是服务器版的操作系统，服务器版的操作系统必须使用无头浏览器才能正常运行")])]),t._v(" "),s("h3",{attrs:{id:"_3、selenium-的工作原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、selenium-的工作原理"}},[t._v("#")]),t._v(" 3、Selenium 的工作原理")]),t._v(" "),s("p",[t._v("利用浏览器原生 API，封装成一套更加面向对象的 Selenium WebDriver API，直接操作浏览器页面里的元素，甚至操作浏览器本身（截屏、窗口大小、启动、关闭、安装插件、配置证书...）")]),t._v(" "),s("ul",[s("li",[t._v("webdriver 本质是一个 web-server，对外提供 webapi，其中封装了浏览器的各种功能")]),t._v(" "),s("li",[t._v("不同的浏览器使用各自不同的 webdriver（由浏览器厂商提供）")])]),t._v(" "),s("h2",{attrs:{id:"二、selenium-安装及简单使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、selenium-安装及简单使用"}},[t._v("#")]),t._v(" 二、Selenium 安装及简单使用")]),t._v(" "),s("h3",{attrs:{id:"_1、安装-selenium"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、安装-selenium"}},[t._v("#")]),t._v(" 1、安装 selenium")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("pip"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("pip3 install selenium\npip"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("pip3 install selenium"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v("版本号\n")])])]),s("h3",{attrs:{id:"_2、安装-driver"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、安装-driver"}},[t._v("#")]),t._v(" 2、安装 driver")]),t._v(" "),s("p",[t._v("以 Chrome 浏览器为例：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("查看浏览器版本号")]),t._v(" "),s("ul",[s("li",[t._v("方式一：帮助 --\x3e 关于 Google Chrome")]),t._v(" "),s("li",[t._v("方式二：输入栏访问 "),s("a",{attrs:{href:"chrome://settings/help"}},[t._v("chrome://settings/help")])])])]),t._v(" "),s("li",[s("p",[t._v("下载对应版本的驱动")]),t._v(" "),s("ul",[s("li",[t._v("驱动镜像站 "),s("a",{attrs:{href:"https://npm.taobao.org/mirrors/chromedriver/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://npm.taobao.org/mirrors/chromedriver/"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("下载解压后得到 "),s("code",[t._v("chromedriver")])])])]),t._v(" "),s("li",[s("p",[t._v("配置环境变量【可选】")]),t._v(" "),s("ul",[s("li",[t._v("Mac/Linux：\n"),s("ul",[s("li",[t._v("执行 "),s("code",[t._v("echo $PATH")]),t._v(" 查看已经配置的环境变量路径")]),t._v(" "),s("li",[t._v("选择其中一个目录（比如："),s("code",[t._v("/usr/local/bin")]),t._v("），把 "),s("code",[t._v("chromedriver")]),t._v(" 拷贝过去即可")])])]),t._v(" "),s("li",[t._v("Windows：\n"),s("ul",[s("li",[t._v("右击此电脑 -> 属性 --\x3e 高级系统设置 --\x3e 环境变量")]),t._v(" "),s("li",[t._v("把 "),s("code",[t._v("chromedriver")]),t._v(" 所在目录，追加到 Path 变量下即可")])])])])])]),t._v(" "),s("blockquote",[s("p",[t._v("注意：不同版本浏览器对应的 driver 是不一样的，尽量使用与浏览器版本号一致的 driver（一般大版本号一致是可以兼容的，例如 浏览器 91.0.4472.124，驱动 91.0.4472.19）。否则会报错，比如："),s("code",[t._v("This version of ChromeDriver only supports Chrome version 92 Current browser version is 91.0.4472.124")])])]),t._v(" "),s("h3",{attrs:{id:"_3、selenium-的简单使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、selenium-的简单使用"}},[t._v("#")]),t._v(" 3、Selenium 的简单使用")]),t._v(" "),s("p",[t._v("使用 Selenium 启动 Chrome 浏览器，打开百度网页，在搜索框中输入文字后，点击搜索按钮：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" time\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# chromedriver已经添加到环境变量")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# driver = webdriver.Chrome()")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 通过指定chromedriver的路径来实例化driver对象")]),t._v("\ndriver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("executable_path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../selenium_drivers/chromedriver'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 控制浏览器访问url地址")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://www.baidu.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在百度搜索框中搜索 'python'")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kw'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send_keys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'python'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# 点击 "百度搜索"')]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'su'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("click"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ntime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sleep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 退出浏览器")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("quit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("ul",[s("li",[s("code",[t._v("webdriver.Chrome(executable_path='./chromedriver')")]),t._v(" 中 executable 参数指定的是下载好的 chromedriver 文件路径")]),t._v(" "),s("li",[s("code",[t._v("driver.find_element_by_id('kw').send_keys('python')")]),t._v(" 定位 id 属性值是 'kw' 的标签，并向其中输入字符串 'python'")]),t._v(" "),s("li",[s("code",[t._v("driver.find_element_by_id('su').click()")]),t._v(" 定位 id 属性值是 'su' 的标签，并点击\n"),s("ul",[s("li",[t._v("click 函数作用：触发标签的 js 的 click 事件")])])])]),t._v(" "),s("h2",{attrs:{id:"三、selenium-提取数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、selenium-提取数据"}},[t._v("#")]),t._v(" 三、Selenium 提取数据")]),t._v(" "),s("h3",{attrs:{id:"_1、driver-对象的常用属性和方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、driver-对象的常用属性和方法"}},[t._v("#")]),t._v(" 1、driver 对象的常用属性和方法")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("driver.page_source")]),t._v("：当前标签页浏览器渲染之后的网页源代码")]),t._v(" "),s("li",[s("code",[t._v("driver.current_url")]),t._v("：当前标签页的 url（可能是重写向后的 url）")]),t._v(" "),s("li",[s("code",[t._v("driver.close()")]),t._v("：关闭当前标签页，如果只有一个标签页则关闭整个浏览器")]),t._v(" "),s("li",[s("code",[t._v("driver.quit()")]),t._v("：关闭浏览器")]),t._v(" "),s("li",[s("code",[t._v("driver.forward()")]),t._v("：页面前进")]),t._v(" "),s("li",[s("code",[t._v("driver.back()")]),t._v("：页面后退")]),t._v(" "),s("li",[s("code",[t._v("driver.screen_shot(img_name)")]),t._v("：页面截图")])]),t._v(" "),s("p",[t._v("举例：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" time\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建一个浏览器对象")]),t._v("\ndriver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("executable_path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../selenium_drivers/chromedriver'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 访问指定的url地址")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://www.baidu.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示源码")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("page_source"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示响应对应的url")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current_url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# https://www.baidu.com/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 标签页标题")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 百度一下，你就知道")]),t._v("\n\ntime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sleep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://www.douban.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ntime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sleep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("back"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ntime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sleep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("forward"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 保存网页快照，常用于验证是否运行或者验证码截图")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("save_screenshot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'douban.png'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ntime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sleep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 关闭标签页")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# driver.close()")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 关闭浏览器")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("quit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2、driver-对象定位标签元素获取标签对象的方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、driver-对象定位标签元素获取标签对象的方法"}},[t._v("#")]),t._v(" 2、driver 对象定位标签元素获取标签对象的方法")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("find_element_by_id")]),t._v("：返回一个元素")]),t._v(" "),s("li",[s("code",[t._v("find_element(s)_by_class_name")]),t._v("：根据类名获取元素列表")]),t._v(" "),s("li",[s("code",[t._v("find_element(s)_by_name")]),t._v("：根据标签的 name 属性值返回包含标签对象元素的列表")]),t._v(" "),s("li",[s("code",[t._v("find_element(s)_by_xpath")]),t._v("：返回一 列表")]),t._v(" "),s("li",[s("code",[t._v("find_element(s)_by_link_text")]),t._v("：根据链接文本获取元素列表")]),t._v(" "),s("li",[s("code",[t._v("find_element(s)_by_partial_link_text")]),t._v("：根据部分链接文本获取元素列表")]),t._v(" "),s("li",[s("code",[t._v("find_element(s)_by_tag_name")]),t._v("：根据标签名获取元素列表")]),t._v(" "),s("li",[s("code",[t._v("find_element(s)_by_css_selector")]),t._v("：根据 css 选择器来获取元素列表")])]),t._v(" "),s("p",[t._v("注意：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("find_element")]),t._v(" 和 "),s("code",[t._v("find_elements")]),t._v(" 的区别：\n"),s("ul",[s("li",[s("code",[t._v("find_element")]),t._v(" 返回匹配的第一个标签对象，匹配不到就抛出异常")]),t._v(" "),s("li",[s("code",[t._v("find_elements")]),t._v(" 返回标签对象列表，匹配不到就返回空列表")])])]),t._v(" "),s("li",[s("code",[t._v("by_link_text")]),t._v(" 和 "),s("code",[t._v("by_partial_link_text")]),t._v(" 的区别：\n"),s("ul",[s("li",[s("code",[t._v("by_link_text")]),t._v("：匹配全部文本")]),t._v(" "),s("li",[s("code",[t._v("by_partial_link_text")]),t._v("：匹配包含某个文本")])])])]),t._v(" "),s("p",[t._v("举例：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n\ndriver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("executable_path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../selenium_drivers/chromedriver'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://www.baidu.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 根据xpath进行元素定位")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# driver.find_element_by_xpath('//*[@id=\"kw\"]').send_keys('python3')")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 根据css选择器进行元素定位")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# driver.find_element_by_css_selector('#kw').send_keys('python3')")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 根据name属性值进行元素定位")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# driver.find_element_by_name('wd').send_keys('python3')")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 根据class属性值进行元素定位")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# driver.find_element_by_class_name('s_ipt').send_keys('python3')")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 根据id属性值进行元素定位")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# driver.find_element_by_id('su').click()")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 根据链接文本进行元素定位")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# driver.find_element_by_link_text('hao123').click()")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 根据部分链接文本进行元素定位")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# driver.find_element_by_partial_link_text('hao').click()")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 根据标签名进行元素定位")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 限制：目标元素在当前html中是唯一标签的时候或者是众多定位出来的标签中的第一个的时候才能使用")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_tag_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'title'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"_3、标签对象提取文本内容和属性值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、标签对象提取文本内容和属性值"}},[t._v("#")]),t._v(" 3、标签对象提取文本内容和属性值")]),t._v(" "),s("p",[s("code",[t._v("find_element")]),t._v(" 只能获取元素，不能直接获取其中的数据，如果需要获取数据需要使用以下方法：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("element.text")]),t._v("：通过定位获取的标签对象的 "),s("code",[t._v("text")]),t._v(" 属性，获取文本内容")]),t._v(" "),s("li",[s("code",[t._v('element.get_attribute("属性名")')]),t._v("：通过定位获取的标签对象的 "),s("code",[t._v("get_attribute")]),t._v(" 函数，传入属性名，来获取标签属性值")])]),t._v(" "),s("p",[t._v("举例：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n\ndriver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("executable_path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../selenium_drivers/chromedriver'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://sz.58.com/chuzu/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nel_list "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_elements_by_xpath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'//li[@class="house-cell realverify"]//a[@class="strongbox"]\'')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" el "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" el_list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_attribute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'href'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# el.click()  # el必须是可点击的，否则会报错")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# el.send_keys(data)  # el必须是 text input 这类可输入的标签")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# el.clear()  # 对输入框做清空操作")]),t._v("\n")])])]),s("h2",{attrs:{id:"四、selenium-的其它使用方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、selenium-的其它使用方法"}},[t._v("#")]),t._v(" 四、Selenium 的其它使用方法")]),t._v(" "),s("h3",{attrs:{id:"_1、标签页切换"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、标签页切换"}},[t._v("#")]),t._v(" 1、标签页切换")]),t._v(" "),s("p",[t._v("当 selenium 控制浏览器打开多个标签时，就需要进行标签页切换了，操作步骤如下：")]),t._v(" "),s("ul",[s("li",[t._v("获取所有标签页的窗口句柄")]),t._v(" "),s("li",[t._v("利用窗口句柄切换到句柄指向的标签页")])]),t._v(" "),s("blockquote",[s("p",[t._v("窗口句柄：指向标签页对象的标识")])]),t._v(" "),s("p",[t._v("方法：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1. 获取当前所有的标签页的句柄构成的列表")]),t._v("\ncurrent_windows "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("window_handles\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2. 根据标签页句柄列表索引下标进行切换")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("switch_to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("current_window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("举例：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n\ndriver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("executable_path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../selenium_drivers/chromedriver'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://jn.58.com/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current_url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# https://jn.58.com/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("window_handles"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ['CDwindow-C612EA61989BAA']")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定位到“租房”a标签")]),t._v("\nel "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_xpath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'//span[@class="contentAdTilRt"]/a[text()="租房"]\'')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("click"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("window_handles"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ['CDwindow-C612EA61989BAA', 'CDwindow-45CEE57C52AAB2FE']")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 切换到最新的标签页面")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("switch_to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("window_handles"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current_url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# https://jn.58.com/chuzu/")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2、switch-to-切换-frame-标签"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、switch-to-切换-frame-标签"}},[t._v("#")]),t._v(" 2、"),s("code",[t._v("switch_to")]),t._v(" 切换 frame 标签")]),t._v(" "),s("p",[t._v("iframe 是 html 中常用的一种技术 ，即一个页面中嵌套了另一个网页，"),s("strong",[t._v("selenium 默认是访问不了 frame 中的内容的")]),t._v("，需要使用代码切换到指定的 frame 中再进行后续的操作。")]),t._v(" "),s("p",[t._v("方法：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 可以传入frame标签的id")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("switch_to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("frame"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("frame_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 当id无法获取到时，也可以传入（通过xpath等方式）定位到的frame标签对象")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("switch_to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("frame"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("frame_element"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("举例：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n\nqq_username "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\nqq_password "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\n\ndriver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("executable_path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../selenium_drivers/chromedriver'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://qzone.qq.com/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 切换到账号登录iframe")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("switch_to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("frame"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'login_frame'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# <iframe id="login_frame" ...></iframe>')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# driver.switch_to.frame(driver.find_element_by_id('login_frame'))")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 点击 账号密码登录")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"switcher_plogin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("click"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 输入账号密码")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'u'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send_keys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("qq_username"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'p'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send_keys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("qq_password"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 点击登录")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'login_button'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("click"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"_3、cookie-操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、cookie-操作"}},[t._v("#")]),t._v(" 3、cookie 操作")]),t._v(" "),s("h4",{attrs:{id:"_1-获取-cookie"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-获取-cookie"}},[t._v("#")]),t._v(" 1）获取 cookie")]),t._v(" "),s("p",[s("code",[t._v("driver.get_cookies()")]),t._v(" 返回列表，其中包含了完整的 cookie 信息，即不光有 name、value，还有 domain 等其他维度的信息，所以如果想把获取的 cookie 信息和 requests 模块配合使用的话，需要转换为 name、value 作为键值对的 cookie 字典。")]),t._v(" "),s("p",[t._v("举例：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 获取当前标签页的全部cookie信息")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_cookies"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将cookie信息转可用于requests使用的cookie字典")]),t._v("\ncookies_dict "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'value'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" data "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_cookies"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"_2-删除-cookie"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-删除-cookie"}},[t._v("#")]),t._v(" 2）删除 cookie")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除一条cookie")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("delete_cookie"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CookieName'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除所有的cookie")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("delete_all_cookies"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"_4、控制浏览器执行-js-代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、控制浏览器执行-js-代码"}},[t._v("#")]),t._v(" 4、控制浏览器执行 js 代码")]),t._v(" "),s("p",[t._v("selenium 可以让浏览器执行我们规定的 js 代码，比如，页面向下滚动等等。")]),t._v(" "),s("p",[t._v("方法：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("execute_script"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("js_script"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("举例：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n\ndriver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("executable_path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../selenium_drivers/chromedriver'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://sz.lianjia.com/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# js代码：向下滚动500像素")]),t._v("\njs_script "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'scrollTo(0, 500)'")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("execute_script"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("js_script"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 点击Android App下载按钮（默认位置超过屏幕高度，不在视野中）")]),t._v("\nel_apk "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_xpath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'//div[@class="hand-app"]/a[@class="android"]\'')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nel_apk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("click"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("注意：如果 Selenium 点击了不在视野内的元素会报错，所以需要等将页面滚动的元素可见。")])]),t._v(" "),s("h3",{attrs:{id:"_5、页面等待【了解】"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5、页面等待【了解】"}},[t._v("#")]),t._v(" 5、页面等待【了解】")]),t._v(" "),s("h4",{attrs:{id:"_1-强制等待-常用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-强制等待-常用"}},[t._v("#")]),t._v(" 1）强制等待（常用）")]),t._v(" "),s("p",[t._v("强制等待很简单，直接使用 time 模块即可。")]),t._v(" "),s("p",[t._v("方法：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" time\n\ntime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sleep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("这种方式的缺点是不智能，设置的时间太短，元素可能还没有加载出来；设置的时间太长，则会浪费时间。")]),t._v(" "),s("h4",{attrs:{id:"_2-隐式等待-常用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-隐式等待-常用"}},[t._v("#")]),t._v(" 2）隐式等待（常用）")]),t._v(" "),s("p",[t._v("隐式等待针对的是元素定位，隐式等待设置了一个时间，在一段时间内判断元素是否定位成功，如果成功，就进行下一步（可能提前，节省时间），如果在设置的时间内没有定位成功，则会报超时异常。")]),t._v(" "),s("p",[t._v("方法：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("implicitly_wait"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timeout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("注意：timeout 的单位是秒")])]),t._v(" "),s("p",[t._v("举例：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n\ndriver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("executable_path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../selenium_drivers/chromedriver'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在这段设置代码之后，所有的元素定位操作都有最大等待时间10s，在10s内会定期进行元素定位，超过设置时间之后将会报错")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("implicitly_wait"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://www.baidu.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定位一个不存在的元素")]),t._v("\nel "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_xpath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//*[@id=\"lg\"]/img[10000]'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h4",{attrs:{id:"_3-显示等待-不常用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-显示等待-不常用"}},[t._v("#")]),t._v(" 3）显示等待（不常用）")]),t._v(" "),s("p",[t._v("每经过多少秒就查看一次等待条件是否达成，如果达成就停止等待，继续执行后续代码；如果没有达成就继续等待，直到超过规定的时间，报超时异常。")]),t._v(" "),s("p",[t._v("区别：")]),t._v(" "),s("ul",[s("li",[t._v("隐式等待：针对之后 "),s("strong",[t._v("所有")]),t._v(" 的元素定位")]),t._v(" "),s("li",[t._v("显示等待：针对 "),s("strong",[t._v("指定")]),t._v(" 的元素定位")])]),t._v(" "),s("p",[t._v("举例：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("support"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("wait "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" WebDriverWait\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("support "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" expected_conditions "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" EC\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("common"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("by "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" By\n\ndriver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("executable_path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../selenium_drivers/chromedriver'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://www.baidu.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 每0.5秒一次检查，通过链接文本内容定位标签是否存在，如果存在就向下继续执行；如果不存在，直到20秒上限就抛超时异常")]),t._v("\nWebDriverWait"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("until"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("EC"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("presence_of_element_located"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("By"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LINK_TEXT"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'好123'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_link_text"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'好123'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_attribute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'href'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("quit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("ul",[s("li",[t._v("参数 20 表示最长等待 20 秒")]),t._v(" "),s("li",[t._v("参数 0.5 表示 0.5 秒检查一次规定的标签是否存在")]),t._v(" "),s("li",[s("code",[t._v("presence_of_element_located((By.LINK_TEXT, '好123'))")]),t._v(" 示通过链接文本内容定位标签")])]),t._v(" "),s("h3",{attrs:{id:"_6、开启无界面模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6、开启无界面模式"}},[t._v("#")]),t._v(" 6、开启无界面模式")]),t._v(" "),s("p",[t._v("绝大多数服务器是没有界面的，所有需要使用 selenium 无头浏览器，有 2 种方式：")]),t._v(" "),s("ul",[s("li",[t._v("PhantomJS：本身就是无界面浏览器，但可能会被识别网站开发者反识别出来。（不推荐）")]),t._v(" "),s("li",[t._v("Chrome：新版 Chrome 支持无界面模式了，不过需要多一些配置。（推荐）")])]),t._v(" "),s("blockquote",[s("p",[t._v("注意：MacOS 中 chrome 浏览器 59+版本，Linux 中 57+版本才能使用无界面模式。")])]),t._v(" "),s("p",[t._v("方法：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建配置对象")]),t._v("\noptions "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ChromeOptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 配置对象添加开启无界面模式的命令")]),t._v("\noptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_argument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'--headless'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 配置对象添加禁用gpu的命令")]),t._v("\noptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_argument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'--disable-gpu'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 实例化带有配置对象的driver对象")]),t._v("\ndriver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chrome_options"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"_7、使用代理-ip"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7、使用代理-ip"}},[t._v("#")]),t._v(" 7、使用代理 ip")]),t._v(" "),s("p",[t._v("selenium 控制浏览器也是可以使用代理 ip 的。")]),t._v(" "),s("p",[t._v("方法：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建配置对象")]),t._v("\noptions "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ChromeOptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 配置代理ip")]),t._v("\noptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_argument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'--proxy-server=http://150.138.253.70:808'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 实例化带有配置对象的driver对象")]),t._v("\ndriver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chrome_options"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("注意：更换 ip 代理，必须重新启动浏览器。")])]),t._v(" "),s("h3",{attrs:{id:"_8、替换-user-agent"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8、替换-user-agent"}},[t._v("#")]),t._v(" 8、替换 user-agent")]),t._v(" "),s("p",[t._v("selenium 控制谷歌浏览器时，User-Agent 默认是谷歌浏览器的，有时候我们可能需要对 User-Agent 进行替换，新版 Chrome 也支持配置 User-Agent。")]),t._v(" "),s("p",[t._v("方法：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建配置对象")]),t._v("\noptions "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ChromeOptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 更换User-Agent")]),t._v("\noptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_argument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'--user-agent=Opera/9.23 (X11; Linux x86_64; U; en)'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 实例化带有配置对象的driver对象")]),t._v("\ndriver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chrome_options"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("安利：在线查看 User-Agent 小工具 "),s("a",{attrs:{href:"http://service.spiritsoft.cn/ua.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://service.spiritsoft.cn/ua.html"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);