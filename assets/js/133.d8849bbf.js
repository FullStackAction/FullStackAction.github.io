(window.webpackJsonp=window.webpackJsonp||[]).push([[133],{543:function(t,s,a){"use strict";a.r(s);var n=a(21),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"ä¸€ã€æ¦‚è¿°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€æ¦‚è¿°"}},[t._v("#")]),t._v(" ä¸€ã€æ¦‚è¿°")]),t._v(" "),s("p",[t._v("åœ¨ "),s("RouterLink",{attrs:{to:"/pages/cd4fd1/"}},[t._v("ã€Flutter - å¿«é€Ÿå®ç°èŠå¤©ä¼šè¯åˆ—è¡¨çš„æ•ˆæœï¼Œå®Œç¾ğŸ’¯ã€‘")]),t._v(" ä¸€æ–‡ä¸­ä»‹ç»äº†å¸¸è§„èŠå¤©åœºæ™¯ä¸‹å¦‚ä½•ä¿æŒæ¶ˆæ¯ä½ç½®åŠå…¶å®ç°åŸç†ï¼Œæœ¬ç¯‡å°†åœ¨æ­¤åŸºç¡€ä¸Šå®Œæˆ "),s("code",[t._v("ChatGPT")]),t._v(" è¿™ç§ç”Ÿæˆå¼æ¶ˆæ¯ä¿æŒä½ç½®çš„åŠŸèƒ½ã€‚")],1),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/FullStackAction/PicBed@resource20220417121922/image/202306181254155.gif",alt:""}})]),t._v(" "),s("p",[t._v("å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ“ä½œä¸ç°è±¡ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("ç‚¹å‡»å³ä¸Šè§’çš„æŒ‰é’®åï¼Œä¼šæ’å…¥ä¸€æ¡æ¶ˆæ¯ï¼Œæ¨¡æ‹Ÿå‘ "),s("code",[t._v("ChatGPT")]),t._v(" å‘å‡ºé—®é¢˜")]),t._v(" "),s("li",[t._v("ç„¶åé—´éš” "),s("code",[t._v("1s")]),t._v(" ä¼šè‡ªåŠ¨æ’å…¥ä¸€æ¡ç”Ÿæˆå¼æ¶ˆæ¯ï¼Œæ¨¡æ‹Ÿ "),s("code",[t._v("ChatGPT")]),t._v(" åœ¨ä¸æ–­å›å¤æˆ‘ä»¬çš„é—®é¢˜")])]),t._v(" "),s("h2",{attrs:{id:"äºŒã€å¸ƒå±€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€å¸ƒå±€"}},[t._v("#")]),t._v(" äºŒã€å¸ƒå±€")]),t._v(" "),s("p",[t._v("å¸ƒå±€éå¸¸ç®€å•ï¼Œå°±ä¸€ä¸ª "),s("code",[t._v("ListView")]),t._v("ï¼Œä¸è¿‡éœ€è¦ç»“åˆ "),s("code",[t._v("ChatObserver")]),t._v(" åšä¸€äº›é…ç½®")]),t._v(" "),s("h3",{attrs:{id:"_1ã€chatobserver-é…ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1ã€chatobserver-é…ç½®"}},[t._v("#")]),t._v(" 1ã€"),s("code",[t._v("ChatObserver")]),t._v(" é…ç½®")]),t._v(" "),s("div",{staticClass:"language-dart extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®ä¾‹åŒ– ListObserverController")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”±äºæ»šåŠ¨è§†å›¾ä½¿ç”¨çš„æ˜¯ ListViewï¼Œæ‰€ä»¥é€‰æ‹© ListObserverController")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦åˆ™è¯·é€‰æ‹©ç›¸åº”çš„ ObserverController")]),t._v("\nobserverController "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ListObserverController")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("controller"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" scrollController"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å…³é—­æ¨¡å—å®šä½çš„åç§»ç¼“å­˜åŠŸèƒ½ï¼Œå› ä¸ºIMç»å¸¸æ·»åŠ æˆ–åˆ é™¤æ¶ˆæ¯ï¼Œåç§»çš„ç¼“å­˜å®¹æ˜“è¿‡æ—¶")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦‚æœä½ ä¸ä¼šä½¿ç”¨åˆ°æ¨¡å—å®šä½åŠŸèƒ½ï¼Œåˆ™å¯ä»¥ä¸ç”¨ç†ä¼š")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cacheJumpIndexOffset "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®ä¾‹åŒ– ChatScrollObserver")]),t._v("\nchatObserver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ChatScrollObserver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("observerController"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ»šåŠ¨è§†å›¾çš„åç§»é‡è¶…è¿‡ 5 æ—¶æ‰ä¼šå¯ç”¨ä¿æŒIMæ¶ˆæ¯ä½ç½®çš„åŠŸèƒ½")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fixedPositionOffset "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å†…éƒ¨åœ¨åˆ‡æ¢ isShrinkWrap çš„å€¼æ—¶ä¼šè§¦å‘è¯¥å›è°ƒï¼Œ")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è§¦å‘æ—¶å±€éƒ¨åˆ·æ–°åˆ—è¡¨è§†å›¾å³å¯ï¼Œè¿™é‡Œå› ä¸ºæ˜¯ Demo çš„ç¼˜æ•…ï¼Œåšæ³•æ¯”è¾ƒç®€å•ç²—æš´")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("toRebuildScrollViewCallback "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2ã€listview-é…ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2ã€listview-é…ç½®"}},[t._v("#")]),t._v(" 2ã€"),s("code",[t._v("ListView")]),t._v(" é…ç½®")]),t._v(" "),s("div",{staticClass:"language-dart extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Widget")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_buildListView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Widget")]),t._v(" resultWidget "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ListView")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å†…å«å¤„ç†ä¿æŒIMæ¶ˆæ¯ä½ç½®çš„æ ¸å¿ƒé€»è¾‘")]),t._v("\n    physics"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ChatObserverClampingScrollPhysics")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("observer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" chatObserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    padding"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EdgeInsets")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("only")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("left"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" top"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bottom"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ‡æ¢æ»šåŠ¨è§†å›¾çš„é«˜åº¦æ¨¡å¼ï¼Œå½“æ¶ˆæ¯ä¸æ»¡ä¸€å±æ—¶ï¼Œè¯¥å€¼ä¸º trueï¼Œä½¿æ¶ˆæ¯åœ¨é¡¶éƒ¨å±•ç¤ºï¼Œ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¶ˆæ¯è¶…ä¸€å±æ—¶ä¸º falseï¼Œæ¶ˆæ¯åœ¨åº•éƒ¨å±•ç¤ºï¼ŒchatObserver å†…éƒ¨ä¼šé€‚æ—¶å˜æ›´è¯¥å€¼")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦‚æœä½ å¸Œæœ›ä¸€ç›´éƒ½æ˜¯åº•éƒ¨å±•ç¤ºï¼Œå¯ä»¥æ³¨é‡Šè¯¥è¡Œ")]),t._v("\n    shrinkWrap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" chatObserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isShrinkWrap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¶ˆæ¯ä»åº•éƒ¨å¾€ä¸Šå¼€å§‹æ’åºï¼Œæ‰€ä»¥æ¥æ–°æ¶ˆæ¯æ—¶åº”è¯¥æ’å…¥åˆ° 0 çš„ä½ç½®")]),t._v("\n    reverse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    controller"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" scrollController"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    itemBuilder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ChatItemWidget")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    itemCount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" chatModels"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯¹æ»šåŠ¨è§†å›¾ç›‘å¬")]),t._v("\n  resultWidget "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ListViewObserver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    controller"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" observerController"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    child"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" resultWidget"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é‡ç‚¹ï¼Œå¦‚æœä½ å¸Œæœ›ä¸æ»¡ä¸€å±æ—¶åœ¨é¡¶éƒ¨å±•ç¤ºæ¶ˆæ¯ï¼Œè€Œåˆä¸ç”Ÿæ•ˆæ—¶ï¼Œ")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®°å¾—å¦‚ä¸‹æ‰€ç¤ºè®¾ç½® alignment ä¸º Alignment.topCenter")]),t._v("\n  resultWidget "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Align")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    child"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" resultWidget"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    alignment"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Alignment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("topCenter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" resultWidget"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("åŸºæœ¬çš„é…ç½®åˆ°è¿™å°±å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹å¦‚ä½•ä¸ºç”Ÿæˆå¼æ¶ˆæ¯ä¿æŒä½ç½®å§")]),t._v(" "),s("h2",{attrs:{id:"ä¸‰ã€å®æˆ˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰ã€å®æˆ˜"}},[t._v("#")]),t._v(" ä¸‰ã€å®æˆ˜")]),t._v(" "),s("p",[s("code",[t._v("AppBar")]),t._v(" å³è¾¹çš„æŒ‰é’®ï¼Œç‚¹å‡»æ—¶æ¨¡æ‹Ÿå‘å‡ºä¸€æ¡é—®é¢˜æ¶ˆæ¯ï¼Œç„¶åç­‰å¾…1så "),s("code",[t._v("ChatGPT")]),t._v(" ä»¥ä¸æ–­æ›´æ–°æ¶ˆæ¯çš„æ–¹å¼å›ç­”é—®é¢˜")]),t._v(" "),s("div",{staticClass:"language-dart extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IconButton")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  onPressed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å…³é—­ä¸Šä¸€æ¡æ›´æ–°ç”Ÿæˆå¼æ¶ˆæ¯")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stopMsgUpdateStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¨¡æ‹Ÿå‘é€ä¸€æ¡é—®é¢˜æ¶ˆæ¯")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_addMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isOwn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç­‰å¾…1s")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Future")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("delayed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("seconds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ’å…¥ç”Ÿæˆå¼æ¶ˆæ¯")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("insertGenerativeMsg")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  icon"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Icon")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Icons")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_comment"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("åœæ­¢æ—§ç”Ÿæˆå¼æ¶ˆæ¯çš„æ›´æ–°ï¼Œæ§åˆ¶åŒä¸€æ—¶é—´åªå…è®¸å­˜åœ¨ä¸€æ¡ç”Ÿæˆå¼æ¶ˆæ¯")]),t._v(" "),s("div",{staticClass:"language-dart extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stopMsgUpdateStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  timer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cancel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  timer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("æ’å…¥ä¸€æ¡æ–°æ¶ˆæ¯æ–¹æ³•")]),t._v(" "),s("div",{staticClass:"language-dart extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_addMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  required bool isOwn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨ç¬¦åˆæ¡ä»¶çš„æƒ…å†µä¸‹ä¿æŒå½“å‰çš„IMæ¶ˆæ¯ä½ç½®")]),t._v("\n  chatObserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("standby")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("changeCount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    chatModels"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ChatDataHelper")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createChatModel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isOwn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" isOwn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("æ’å…¥ç”Ÿæˆå¼æ¶ˆæ¯ï¼Œæ¨¡æ‹Ÿ "),s("code",[t._v("ChatGPT")]),t._v(" æ­£åœ¨å›ç­”é—®é¢˜")]),t._v(" "),s("div",{staticClass:"language-dart extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("insertGenerativeMsg")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœæ­¢ä¹‹å‰çš„ç”Ÿæˆå¼æ¶ˆæ¯")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stopMsgUpdateStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ’å…¥ä¸€æ¡")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_addMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isOwn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¼€å§‹æ¨¡æ‹Ÿæ¥æ”¶æ›´æ–°çš„æ¶ˆæ¯æ•°æ®")]),t._v("\n  int count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  timer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Timer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("periodic")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("milliseconds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¥æ”¶å®Œæ¯•")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stopMsgUpdateStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    count"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å–å‡ºæœ€æ–°çš„ç”Ÿæˆå¼æ¶ˆæ¯")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" model "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" chatModels"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("first"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ›´æ–°æ¶ˆæ¯å†…å®¹")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" newString "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-literal"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token expression"}},[t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("-1+1'")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ›¿æ¢æ¶ˆæ¯")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" newModel "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ChatModel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isOwn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isOwn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" content"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" newString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    chatModels"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newModel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‡†å¤‡ä¿æŒä½ç½®")]),t._v("\n    chatObserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("standby")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é‡ç‚¹ï¼Œä½¿ç”¨ç”Ÿæˆå¼æ¶ˆæ¯çš„å¤„ç†æ¨¡å¼")]),t._v("\n      mode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ChatScrollObserverHandleMode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("generative"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// changeCount: 1,")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åé¢ä¼šè§£é‡Šè¯¥æ¨¡å¼çš„ä½¿ç”¨")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// chatObserver.standby(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   changeCount: 1,")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   mode: ChatScrollObserverHandleMode.specified,")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   refItemRelativeIndex: 2,")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   refItemRelativeIndexAfterUpdate: 2,")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// );")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ·æ–°æ»šåŠ¨è§†å›¾ï¼Œå¯å±€éƒ¨åˆ·æ–°ï¼ŒDemo ç¼˜æ•…ï¼Œåšæ³•æ¯”è¾ƒç®€å•ç²—æš´")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"å››ã€ç”¨æ³•è§£æ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å››ã€ç”¨æ³•è§£æ"}},[t._v("#")]),t._v(" å››ã€ç”¨æ³•è§£æ")]),t._v(" "),s("p",[t._v("å…¶å®ä¸Šé¢é‚£ä¸€å †ä»£ç ä¸­ï¼Œé‡ç‚¹åœ¨äº "),s("code",[t._v("standby")]),t._v(" æ–¹æ³•çš„ä½¿ç”¨")]),t._v(" "),s("div",{staticClass:"language-dart extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("standby")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ»šåŠ¨è§†å›¾çš„ BuildContext")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å½“å¸ƒå±€å¤æ‚ä½¿ scrollview_observer æ— æ³•é¡ºåˆ©è‡ªåŠ¨æ‰¾åˆ°æ»šåŠ¨è§†å›¾çš„ BuildContext æ—¶æ‰éœ€è¦ä¼ å…¥")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦‚ CustomScrollViewï¼Œæˆ– ObserverWidget åŒ…è£¹çš„ child ä¸­æœ‰å¤šä¸ª ListViewã€GridView")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BuildContext")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" sliverContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ˜¯å¦æ˜¯åˆ é™¤æ¶ˆæ¯çš„æ“ä½œï¼Œå®ƒä¸ä¼šå¯ç”¨ä¿æŒä½ç½®åŠŸèƒ½ï¼Œè€Œæ˜¯å¯èƒ½åˆ‡æ¢ isShrinkWrap çš„å€¼")]),t._v("\n  bool isRemove "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å˜æ›´çš„IMæ¶ˆæ¯æ•°")]),t._v("\n  int changeCount "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤„ç†æ¨¡å¼")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ChatScrollObserverHandleMode")]),t._v(" mode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ChatScrollObserverHandleMode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("normal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ·æ–°æ»šåŠ¨è§†å›¾å‰ï¼Œå‚ç…§çš„ç›¸å¯¹itemçš„ä¸‹æ ‡")]),t._v("\n  int refItemRelativeIndex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ·æ–°æ»šåŠ¨è§†å›¾åï¼Œå‚ç…§çš„ç›¸å¯¹itemçš„ä¸‹æ ‡")]),t._v("\n  int refItemRelativeIndexAfterUpdate "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("å¤„ç†æ¨¡å¼çš„å®šä¹‰å¦‚ä¸‹")]),t._v(" "),s("div",{staticClass:"language-dart extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ChatScrollObserverHandleMode")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// å¸¸è§„æ¨¡å¼")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// æ’å…¥æˆ–åˆ é™¤IMæ¶ˆæ¯çš„æ—¶å€™ä½¿ç”¨")]),t._v("\n  normal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// ç”Ÿæˆå¼æ¨¡å¼")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// ä¸“é—¨å¤„ç† ChatGPT è¿™ç§ä¸æ–­æ›´æ–°æ¶ˆæ¯çš„æƒ…å†µ")]),t._v("\n  generative"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// æŒ‡å®šæ¨¡å¼")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// åœ¨è¯¥æ¨¡å¼ä¸‹æˆ‘ä»¬å¯ä»¥æŒ‡å®šå‚ç…§çš„IMæ¶ˆæ¯çš„ç›¸å¯¹ä¸‹æ ‡")]),t._v("\n  specified"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"_1ã€å¸¸è§„æ¨¡å¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1ã€å¸¸è§„æ¨¡å¼"}},[t._v("#")]),t._v(" 1ã€å¸¸è§„æ¨¡å¼")]),t._v(" "),s("p",[t._v("å¸¸è§„æ¨¡å¼ä¸ºé»˜è®¤çš„å¤„ç†æ¨¡å¼ï¼Œåº”ç”¨äºæ—¥å¸¸çš„ "),s("code",[t._v("IM")]),t._v(" æ·»åŠ å’Œåˆ é™¤æ¶ˆæ¯çš„åœºæ™¯ï¼Œæ¯”è¾ƒç®€å•")]),t._v(" "),s("p",[t._v("æ’å…¥å¤šæ¡æ¶ˆæ¯")]),t._v(" "),s("div",{staticClass:"language-dart extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_addMessage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("int count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿›å…¥å¾…å‘½çŠ¶æ€ï¼Œä¿æŒIMæ¶ˆæ¯ä½ç½®")]),t._v("\n  chatObserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("standby")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("changeCount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸€æ¬¡æ€§æ’å…¥å¤šæ¡æ¶ˆæ¯ï¼Œå¹¶åˆ·æ–°æ»šåŠ¨è§†å›¾")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    needIncrementUnreadMsgCount "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      chatModels"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("insert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ChatDataHelper")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createChatModel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("åˆ é™¤æ¶ˆæ¯")]),t._v(" "),s("div",{staticClass:"language-dart extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[t._v("chatObserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("standby")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isRemove"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  chatModels"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeAt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2ã€ç”Ÿæˆå¼æ¨¡å¼-ä»¿chatgpt"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2ã€ç”Ÿæˆå¼æ¨¡å¼-ä»¿chatgpt"}},[t._v("#")]),t._v(" 2ã€ç”Ÿæˆå¼æ¨¡å¼(ä»¿"),s("code",[t._v("ChatGPT")]),t._v(")")]),t._v(" "),s("p",[t._v("ä¸“é—¨å¤„ç† "),s("code",[t._v("ChatGPT")]),t._v(" è¿™ç§ç”Ÿæˆå¼æ¶ˆæ¯çš„åœºæ™¯")]),t._v(" "),s("div",{staticClass:"language-dart extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" model "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" chatModels"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("first"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" newString "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-literal"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token expression"}},[t._v("model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("-1+1'")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" newModel "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ChatModel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isOwn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isOwn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" content"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" newString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ›´æ–°ç”Ÿæˆå¼æ¶ˆæ¯çš„æ•°æ®")]),t._v("\nchatModels"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newModel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿›å…¥å¾…å‘½çŠ¶æ€")]),t._v("\nchatObserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("standby")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  mode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ChatScrollObserverHandleMode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("generative"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// changeCount: 1,")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ·æ–°åˆ—è¡¨")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[t._v("æŒ‡å®šå¤„ç†æ¨¡å¼ "),s("code",[t._v("mode")]),t._v(" ä¸º "),s("code",[t._v(".generative")])]),t._v(" "),s("li",[s("code",[t._v("changeCount")]),t._v(" é»˜è®¤å€¼ä¸º "),s("code",[t._v("1")]),t._v("ï¼Œä¼ ä¸ä¸ä¼ ä¸€æ ·")])]),t._v(" "),s("p",[t._v("å†…éƒ¨ä¼šæ ¹æ® "),s("code",[t._v("changeCount")]),t._v(" æ¥è®¡ç®—å¹¶è®°å½•å‚ç…§æ¶ˆæ¯çš„ç›¸å¯¹ä¸‹æ ‡ï¼ˆå…³äºç›¸å¯¹ä¸‹æ ‡çš„å†…å®¹ä¼šåœ¨ "),s("code",[t._v("æŒ‡å®šæ¨¡å¼")]),t._v(" ä¸€èŠ‚ä¸­è¯´æ˜ï¼‰ï¼Œè¿™æ„å‘³ç€è¯¥æ¨¡å¼æ”¯æŒè¿ç»­çš„å¤šæ¡ç”Ÿæˆå¼æ¶ˆæ¯ä¿æŒä½ç½®ï¼Œæ¯”å¦‚æœ€æ–°çš„ä¸¤æ¡æ¶ˆæ¯éƒ½æ˜¯ç”Ÿæˆå¼çš„æƒ…å†µæ˜¯æ”¯æŒã€‚")]),t._v(" "),s("p",[t._v("è€Œå¦‚æœæœ€æ–°çš„ä¸‰æ¡æ¶ˆæ¯ï¼Œ"),s("code",[t._v("0")]),t._v(" å’Œ "),s("code",[t._v("2")]),t._v(" éƒ½æ˜¯ç”Ÿæˆå¼æ¶ˆæ¯è€Œ "),s("code",[t._v("1")]),t._v(" ä¸æ˜¯ï¼Œåˆæˆ–è€…åŒä¸€æ—¶é—´æ’å…¥æ¶ˆæ¯å’Œæ›´æ–°ç”Ÿæˆå¼æ¶ˆæ¯ï¼Œæ­¤æ—¶è¯¥æ¨¡å¼æ˜¯æ— æ³•å¾ˆå¥½çš„æ”¯æŒä¿æŒæ¶ˆæ¯ä½ç½®è¿™ä¸€åŠŸèƒ½çš„ï¼Œé‚£æœ‰ä»€ä¹ˆåŠæ³•å‘¢ï¼Ÿä½ å¯ä»¥ä½¿ç”¨ "),s("code",[t._v("æŒ‡å®šæ¨¡å¼")])]),t._v(" "),s("h3",{attrs:{id:"_3ã€æŒ‡å®šæ¨¡å¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3ã€æŒ‡å®šæ¨¡å¼"}},[t._v("#")]),t._v(" 3ã€æŒ‡å®šæ¨¡å¼")]),t._v(" "),s("p",[t._v("é¡¾åæ€ä¹‰ï¼Œå¯ä»¥æŒ‡å®šå‚ç…§çš„ "),s("code",[t._v("IM")]),t._v(" æ¶ˆæ¯çš„ç›¸å¯¹ä¸‹æ ‡ï¼Œä»è€Œå¯ä»¥è‡ªç”±çš„ä½¿ç”¨ä¿æŒæ¶ˆæ¯ä½ç½®çš„åŠŸèƒ½ï¼Œå½“ç„¶äº†ï¼Œè‡ªç”±ä¹Ÿæ„å‘³ç€ä¼ å…¥çš„æ•°æ®å’Œéœ€è¦äº†è§£çš„ä¼šæ›´å¤šï¼")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯å‚ç…§çš„ "),s("code",[t._v("IM")]),t._v(" æ¶ˆæ¯çš„ç›¸å¯¹ä¸‹æ ‡ï¼Ÿ")]),t._v(" "),s("blockquote",[s("p",[t._v("æ³¨: æ»šåŠ¨è§†å›¾å†…å·²æ¸²æŸ“çš„ "),s("code",[t._v("item")]),t._v(" ä¸ä¸€å®šä¼šè¢«æ˜¾ç¤ºå‡ºæ¥ï¼Œå¦‚æœä¸‹æ–‡ä¸­æåŠçš„æ»šåŠ¨è§†å›¾æ¸²æŸ“çš„ "),s("code",[t._v("item")]),t._v(" è®©ä½ ä¸å¥½ç†è§£ï¼Œä½ å¯ä»¥ç›´æ¥è®¤ä¸ºæ˜¯å±å¹•ä¸­æ­£åœ¨å±•ç¤ºçš„ "),s("code",[t._v("item")]),t._v("ã€‚")])]),t._v(" "),s("p",[t._v("å‡å¦‚å½“å‰æ˜¯æ­£åœ¨çœ‹æœ€æ–°æ¶ˆæ¯çš„æƒ…å†µï¼Œæ»šåŠ¨è§†å›¾å†…æ¸²æŸ“äº† "),s("code",[t._v("item0")]),t._v(" åˆ° "),s("code",[t._v("item4")]),t._v("ï¼Œå…¶ç›¸å¯¹ä¸‹æ ‡ä¸º "),s("code",[t._v("0")]),t._v(" åˆ° "),s("code",[t._v("4")]),t._v("ã€‚")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("     trailing        relativeIndex\n-----------------  -----------------\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("     item4     "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("     item3     "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("     item2     "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("     item1     "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("     item0     "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" \n-----------------  -----------------\n     leading\n")])])]),s("p",[t._v("å¦‚æœæ­¤æ—¶ä½ åœ¨ç¿»çœ‹å†å²æ¶ˆæ¯ï¼Œæ»šåŠ¨è§†å›¾å†…æ¸²æŸ“äº† "),s("code",[t._v("item10")]),t._v(" åˆ° "),s("code",[t._v("item14")]),t._v("ï¼Œå…¶ç›¸å¯¹ä¸‹æ ‡ä¹Ÿä¸º "),s("code",[t._v("0")]),t._v(" åˆ° "),s("code",[t._v("4")]),t._v("ã€‚")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("     trailing        relativeIndex\n-----------------  -----------------\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("     item14    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("     item13    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("     item12    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("     item11    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("     item10    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" \n-----------------  -----------------\n     leading\n")])])]),s("p",[t._v("è¿™é‡Œ "),s("code",[t._v("0")]),t._v(" åˆ° "),s("code",[t._v("4")]),t._v(" çš„ä¸‹æ ‡å³ä¸ºç›¸å¯¹ä¸‹æ ‡ï¼Œæˆ‘ä»¬æ¥ä½¿ç”¨è¯¥æ¨¡å¼ï¼ˆ"),s("code",[t._v(".specified")]),t._v("ï¼‰æ¥å®Œæˆ "),s("code",[t._v(".generative")]),t._v(" æ¨¡å¼çš„åŠŸèƒ½")]),t._v(" "),s("p",[t._v("åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œç¦»å‘å‡ºé—®é¢˜é—´éš”äº†1ç§’åï¼Œ"),s("code",[t._v("ChatGPT")]),t._v(" ä¼šå¼€å§‹å›ç­”é—®é¢˜ï¼Œæ­¤æ—¶æˆ‘ä»¬æ’å…¥ç”Ÿæˆå¼çš„æ¶ˆæ¯ï¼Œå¹¶ä¸æ–­æ›´æ–°è¯¥æ¶ˆæ¯å†…å®¹ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("æ³¨æ„: æ’å…¥æ¶ˆæ¯çš„æ–¹æ³•å†…å·²ç»åšäº†ä¿æŒæ¶ˆæ¯ä½ç½®çš„å¤„ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„å…³æ³¨ç‚¹åœ¨äºæ›´æ–°æ¶ˆæ¯")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("     trailing        relativeIndex\n-----------------  -----------------\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("     item4     "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("     item3     "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("     item2     "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("     item1     "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("     item0     "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" \n-----------------  -----------------\n     leading\n")])])]),s("p",[t._v("å‡è®¾æ­¤æ—¶ "),s("code",[t._v("item0")]),t._v(" ä¸ºç”Ÿæˆå¼æ¶ˆæ¯ï¼Œå®ƒçš„æ¶ˆæ¯å†…å®¹åœ¨ä¸æ–­å˜å¤šï¼Œå¦‚æœæ”¾ä»»ä¸ç®¡ï¼Œ"),s("code",[t._v("item0")]),t._v(" ä»¥ä¸Šçš„æ¶ˆæ¯ä¼šé€æ¸è¢«å¾€ä¸Šé¡¶ï¼Œå› æ­¤åœ¨è¿™é‡Œæˆ‘ä»¬çš„ç›®çš„æ˜¯ä¸ç®¡ "),s("code",[t._v("item0")]),t._v(" å¦‚ä½•å˜åŒ–ï¼Œéƒ½éœ€è¦ä¿æŒ "),s("code",[t._v("item1")]),t._v(" åŠä»¥ä¸Šæ¶ˆæ¯çš„ä½ç½®ï¼Œæ‰€ä»¥ "),s("code",[t._v("item1")]),t._v(" å°±æˆä¸ºäº†æˆ‘ä»¬çš„å‚ç…§æ¶ˆæ¯ï¼Œå®ƒæ­¤åˆ»çš„ä¸‹æ ‡ä¸º "),s("code",[t._v("1")]),t._v("ï¼Œè€Œç”Ÿæˆå¼æ¶ˆæ¯çš„å˜åŒ–å‰åï¼Œ"),s("code",[t._v("item1")]),t._v(" çš„ä¸‹æ ‡ä¸€ç›´éƒ½æ˜¯ "),s("code",[t._v("1")]),t._v("ï¼")]),t._v(" "),s("p",[t._v("æ”¹é€ çš„ä»£ç å¦‚ä¸‹ï¼š")]),t._v(" "),s("div",{staticClass:"language-dart extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[t._v("chatObserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("standby")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  changeCount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾ç½®å¤„ç†æ¨¡å¼ä¸º .specified")]),t._v("\n  mode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ChatScrollObserverHandleMode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("specified"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ»šåŠ¨è§†å›¾æ›´æ–°å‰ï¼Œå‚ç…§æ¶ˆæ¯çš„ç›¸å¯¹ä¸‹æ ‡")]),t._v("\n  refItemRelativeIndex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ»šåŠ¨è§†å›¾æ›´æ–°åï¼Œå‚ç…§æ¶ˆæ¯çš„ç›¸å¯¹ä¸‹æ ‡")]),t._v("\n  refItemRelativeIndexAfterUpdate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("æ³¨æ„ï¼Œ"),s("code",[t._v("refItemRelativeIndex")]),t._v(" å’Œ "),s("code",[t._v("refItemRelativeIndexAfterUpdate")]),t._v(" åº”è¯¥æŒ‡å‘åŒä¸€æ¡æ¶ˆæ¯ï¼")]),t._v(" "),s("p",[t._v("å…¶å®å‚ç…§æ¶ˆæ¯åœ¨ç†è®ºä¸Šåªè¦æ˜¯ "),s("code",[t._v("item0")]),t._v(" ä»¥ä¸Šçš„å·²ç»æ¸²æŸ“çš„æ¶ˆæ¯å³å¯ï¼Œå³ä¸Šè¿°çš„å‚ç…§æ¶ˆæ¯çš„ç›¸å¯¹ä¸‹æ ‡ä¹Ÿå¯ä»¥æ˜¯ "),s("code",[t._v("2")]),t._v("ã€ "),s("code",[t._v("3")]),t._v(" å’Œ "),s("code",[t._v("4")]),t._v("ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("æ³¨: å¦‚æœæ›´æ–°æ»šåŠ¨è§†å›¾åå‚ç…§çš„æ¶ˆæ¯æ— æ³•å¾—åˆ°æ¸²æŸ“ï¼Œåˆ™è¯¥åŠŸèƒ½å°±ä¼šå¤±æ•ˆï¼Œæ‰€ä»¥å»ºè®®è¿˜æ˜¯é€‰æ‹©å½“å‰å‘ç”Ÿå˜åŒ–çš„æ¶ˆæ¯çš„ä¸Šä¸€æ¡æ¶ˆæ¯çš„ç›¸å¯¹ä¸‹æ ‡~")])]),t._v(" "),s("p",[t._v("æ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯ï¼Œå‡è®¾æˆ‘ä»¬åœ¨å‘å‡ºé—®é¢˜åï¼Œå¾€ä¸Šç¿»é¡µäº†ï¼Œ1ç§’åæ»šåŠ¨è§†å›¾æ¸²æŸ“çš„æ¶ˆæ¯æ˜¯ "),s("code",[t._v("item10")]),t._v(" åˆ° "),s("code",[t._v("item14")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("     trailing        relativeIndex\n-----------------  -----------------\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("     item14    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("     item13    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("     item12    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("     item11    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("     item10    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" \n-----------------  -----------------\n     leading\n")])])]),s("p",[t._v("æ­¤æ—¶ä½ çš„å‚ç…§æ¶ˆæ¯çš„ç›¸å¯¹ä¸‹æ ‡å°±å¯ä»¥ä¸º "),s("code",[t._v("0")]),t._v(" äº†ï¼Œä½†æ˜¯ä½ éœ€è¦åˆ¤æ–­å½“å‰å·²æ¸²æŸ“çš„ç¬¬ä¸€ä¸ª "),s("code",[t._v("item")]),t._v(" æ˜¯å¦ä¸ºç”Ÿæˆå¼æ¶ˆæ¯ï¼Œè¿™å°±å¾ˆéº»çƒ¦ï¼Œæ²¡æœ‰å¿…è¦ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("æ€»ç»“æ¥è¯´ï¼Œå‚ç…§çš„æ¶ˆæ¯ä¸å¯ä»¥ä¸ºå‘ç”Ÿå˜åŒ–çš„æ¶ˆæ¯æœ¬èº«ï¼Œè€Œæ˜¯ä¸ºæ»šåŠ¨è§†å›¾åœ¨æ›´æ–°å‰åéƒ½ä¼šè¢«æ¸²æŸ“çš„ "),s("code",[t._v("item")]),t._v(" å³å¯ï¼")])]),t._v(" "),s("h2",{attrs:{id:"äº”ã€æœ€å"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#äº”ã€æœ€å"}},[t._v("#")]),t._v(" äº”ã€æœ€å")]),t._v(" "),s("p",[t._v("é€šè¿‡ä¸Šè¿°ç¤ºä¾‹çš„è®²è§£ï¼Œç›¸ä¿¡ä½ å¯¹ "),s("code",[t._v("scrollview_observer")]),t._v(" çš„ä½¿ç”¨åˆæ›´åŠ æ¸…æ¥šï¼Œå¦‚æœä½ ä¹Ÿè§‰å¾—è¿™ä¸ªåº“å¥½ç”¨ï¼Œè¯·ä¸åç»™ä¸ª "),s("code",[t._v("Star")]),t._v("  ğŸ‘")]),t._v(" "),s("p",[t._v("GitHub: "),s("a",{attrs:{href:"https://github.com/LinXunFeng/flutter_scrollview_observer",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/LinXunFeng/flutter_scrollview_observer"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);