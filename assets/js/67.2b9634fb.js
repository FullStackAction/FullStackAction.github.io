(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{412:function(e,o,a){"use strict";a.r(o);var r=a(15),s=Object(r.a)({},(function(){var e=this,o=e._self._c;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"fresco版本说明"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#fresco版本说明"}},[e._v("#")]),e._v(" Fresco版本说明")]),e._v(" "),o("p",[e._v("目前fresco最新版本2.3.0，但无法直接在插件中集成")]),e._v(" "),o("ul",[o("li",[o("p",[e._v("从1.14开始要求使用AndroidX ，向下选择1.13.0")])]),e._v(" "),o("li",[o("p",[e._v("从1.10.0开始没有armeabi, 向下选择1.9.0")])]),e._v(" "),o("li",[o("p",[e._v("从1.8.0开始强制使用SoLoader，向下选择1.7.1")])])]),e._v(" "),o("h1",{attrs:{id:"插件集成fresco遇到的问题"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#插件集成fresco遇到的问题"}},[e._v("#")]),e._v(" 插件集成Fresco遇到的问题")]),e._v(" "),o("p",[e._v("这里需要重点说明一下SoLoader问题，fresco在1.8.0版本开始，就使用SoLoader替换了SoLoaderShim，原文：")]),e._v(" "),o("blockquote",[o("p",[e._v("SoLoader has been released for a while now, and updated just last week. We've made the decision to add a hard dependency on it and make SoLoader the one and only native code loader that we use in Fresco. API-wise, this means SoLoaderShim is gone. If you were using some other native loading library (e.g. ReLinker), you can either:")]),e._v(" "),o("p",[e._v("keep both and just delete your SoLoaderShim implementation, but this will make your APK size bigger\nswitch to SoLoader for the rest of your app as well and remove the other dependency")])]),e._v(" "),o("p",[e._v("插件中的SoLoader在加载时会使用到一个宿主无权操作的路径："),o("code",[e._v("/data/user/0/插件包名/lib-main")]),e._v("（但这个路径并不存在！），导致宿主在加载插件时，直接报错，因此插件并不会成功启动。")]),e._v(" "),o("h1",{attrs:{id:"插件集成fresco的解决方案"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#插件集成fresco的解决方案"}},[e._v("#")]),e._v(" 插件集成Fresco的解决方案")]),e._v(" "),o("p",[e._v("解决办法有2种：")]),e._v(" "),o("ul",[o("li",[o("p",[e._v("方案1：fresco降级，使用1.7.1版本。")])]),e._v(" "),o("li",[o("p",[e._v("方案2：宿主compile fresco，插件provided fresco。")])])]),e._v(" "),o("blockquote",[o("p",[e._v("方案2需要修改fresco源码，因为provided不支持依赖aar，详情见：https://mp.weixin.qq.com/s/ICjLCTWIeHy58ayp_cEvSQ。")])]),e._v(" "),o("p",[e._v("方案2示例中没有具体的操作步骤说明，感觉去折腾Fresco的源码也有点麻烦，1.7.1跟1.9.0相差似乎也不是很大。所以，最终选择方案一，在插件工程中集成1.7.1版本的Fresco：")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v('compile "com.facebook.fresco:fresco:1.7.1"\n')])])]),o("blockquote",[o("p",[e._v("有时间了再回头研究怎么使用方案2集成～")])])])}),[],!1,null,null,null);o.default=s.exports}}]);